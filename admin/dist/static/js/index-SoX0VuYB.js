import{u as V,a as P,m as Z,b as ee}from"./index-C5WS2hJt.js";import"./store@2.0.12-i6xqVJod.js";import{U as te}from"./@element-plus_icons-vue@2.3.1_vue@3.5.16_typescript@5.5.4_-CeLFb4Nw.js";import{c as oe,F as q,v as ne,D as se,d as ae}from"./lodash-es@4.17.21-BYk7DlcU.js";import{d as x,v as E,P as k,c as $,o as n,y as F,H as g,J as T,F as D,L as j,a as c,w as O,z as U,e as G,i as t,I as Q,l as X,X as re,f as le,a9 as ce}from"./@vue_runtime-core@3.5.16-Cn8z-kNe.js";import{y as a,v as J,u as ie,m as pe}from"./@vue_reactivity@3.5.16-Dqy0TPbS.js";import{O as N,p as A}from"./@vue_shared@3.5.16-UwmvJIHj.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as ue,b as _e}from"./element-plus@2.9.11_vue@3.5.16_typescript@5.5.4_-BTKo5Rtv.js";import{u as K}from"./vue-i18n@11.1.5_vue@3.5.16_typescript@5.5.4_-Bqjl69Su.js";import{_ as de}from"./logo-CxXS7KxG.js";import{w as Y,T as me}from"./@vue_runtime-dom@3.5.16-DriBzn4z.js";import{b as fe}from"./comm-Ba3vmJ1R.js";import"./@vueuse_core@12.8.2_typescript@5.5.4-7kYVjNRB.js";import"./@vueuse_shared@12.8.2_typescript@5.5.4-CuUdMqkw.js";import"./mitt@3.0.1-C1z4c41a.js";import"./@codemirror_language-data@6.5.1-Blx1hvTn.js";import"./@codemirror_language@6.11.1-BYrSuhr8.js";import"./@lezer_common@1.2.3-CP7NCNqd.js";import"./@codemirror_state@6.5.2-DQ6R6BiX.js";import"./@marijn_find-cluster-break@1.0.2-DXwl3gUT.js";import"./@codemirror_view@6.37.1-Bd3_Yh4F.js";import"./style-mod@4.1.2-Bc2inJdb.js";import"./w3c-keyname@2.2.8-Vcq4gwWv.js";import"./@lezer_highlight@1.2.1-DwVMghhY.js";import"./pinia@2.3.1_typescript@5.5.4_vue@3.5.16_typescript@5.5.4_-BZ2tmr1d.js";import"./vue-router@4.5.1_vue@3.5.16_typescript@5.5.4_-ODt3CAxp.js";import"./vue-echarts@7.0.3_@vue_runtime-core@3.5.16_echarts@5.6.0_vue@3.5.16_typescript@5.5.4_-Dhz4IGE5.js";import"./echarts@5.6.0-DvAKqd2B.js";import"./tslib@2.3.0-BDyQ-Jie.js";import"./zrender@5.6.1-DcQm8NwP.js";import"./axios@1.9.0-D--XfsWq.js";import"./nprogress@0.2.0-dOd6e7EG.js";import"./chardet@2.1.0-CTPPlwpv.js";import"./@vueuse_shared@9.13.0_vue@3.5.16_typescript@5.5.4_-4q0MSQPl.js";import"./@vueuse_core@9.13.0_vue@3.5.16_typescript@5.5.4_-DmiypGF2.js";import"./@sxzz_popperjs-es@2.11.7-D_chPuIy.js";import"./@ctrl_tinycolor@3.6.1-r5W6hzzQ.js";import"./dayjs@1.11.13-DUxgsv0d.js";import"./async-validator@4.2.5-CDKkdPIV.js";import"./memoize-one@6.0.0-BdPwpGay.js";import"./normalize-wheel-es@1.2.0-BQoi3Ox2.js";import"./@floating-ui_dom@1.7.1-Ba-2EiSn.js";import"./@floating-ui_core@1.7.1-C83JrwzW.js";import"./@floating-ui_utils@0.2.9-CBkBHzV8.js";import"./@intlify_core-base@11.1.5-rFPZQXdu.js";import"./@intlify_shared@11.1.5-CY44FrR8.js";import"./@intlify_message-compiler@11.1.5-CZ-uatfp.js";const he={class:"route-nav"},ve={class:"text-[14px]"},be=x({name:"undefined"}),ke=x({...be,name:"route-nav",setup(C){const{route:d,browser:b}=V(),{menu:u}=P(),i=E(()=>{function o(s){if(d.path==="/")return!1;if(s.path==d.path)return s;if(s.children){const h=s.children.map(o).find(Boolean);return h?[s,h]:!1}else return!1}return oe(u.group.map(o).filter(Boolean))}),f=E(()=>{var o,s;return(s=(o=q(i.value))==null?void 0:o.meta)==null?void 0:s.label});return(o,s)=>{const h=k("el-text"),m=k("el-breadcrumb-item"),r=k("el-breadcrumb");return n(),$("div",he,[a(b).isMini?(n(),F(h,{key:0,class:"font-bold"},{default:g(()=>[T(N(f.value),1)]),_:1})):(n(),F(r,{key:1,"separator-icon":a(te)},{default:g(()=>[(n(!0),$(D,null,j(i.value,(e,l)=>(n(),F(m,{key:l},{default:g(()=>{var p;return[c("span",ve,N(((p=e.meta)==null?void 0:p.label)||e.name),1)]}),_:2},1024))),128))]),_:1},8,["separator-icon"]))])}}}),ye=L(ke,[["__scopeId","data-v-92a1d07f"]]),we={class:"a-menu"},ge=["onClick"],$e={class:"text-[12px] tracking-wider whitespace-nowrap"},xe=x({name:"undefined"}),Ce=x({...xe,name:"a-menu",setup(C){const{router:d,route:b}=V(),{menu:u}=P(),{t:i}=K(),f=J(0),o=E(()=>u.group.filter(m=>m.isShow));function s(m){var l;if(m==f.value)return!1;const r=o.value[m],e=u.getPath(r);e?(u.setMenu(m),d.push(e)):ue.warning(i("{label} 没有子菜单，请先添加",{label:(l=r.meta)==null?void 0:l.label}))}function h(){let m=0;function r(e,l){switch(e.type){case 0:e.children&&e.children.forEach(p=>{r(p,l)});break;case 1:b.path.includes(e.path)&&(m=l);break}}o.value.forEach(r),f.value=m,u.setMenu(m)}return O(()=>[b.path,u.group.length],()=>{h()},{immediate:!0}),(m,r)=>{const e=k("cl-svg");return n(),$("div",we,[(n(!0),$(D,null,j(o.value,(l,p)=>{var M;return n(),$("div",{class:A(["a-menu__item",{"is-active":p==f.value}]),key:l.id,onClick:B=>s(p)},[l.icon?(n(),F(e,{key:0,class:"mr-3",name:l.icon,size:16},null,8,["name"])):U("",!0),c("span",$e,N((M=l.meta)==null?void 0:M.label),1)],10,ge)}),128))])}}}),Me=L(Ce,[["__scopeId","data-v-8cffe37a"]]),Fe={class:"app-topbar"},Se={class:"app-topbar__tools"},Be={class:"app-topbar__user"},Ie={class:"user"},Ne={class:"det"},We=x({name:"undefined"}),ze=x({...We,name:"app-topbar",setup(C){const{router:d,service:b,browser:u}=V(),{user:i,app:f}=P(),{t:o}=K();async function s(r){switch(r){case"my":d.push("/my/info");break;case"exit":_e.confirm(o("确定退出登录吗？"),o("提示"),{type:"warning"}).then(async()=>{await b.base.comm.logout(),i.logout()}).catch(()=>null);break}}const h=ie({list:[],async init(){const r=ne(Z.list.filter(e=>e.enable!==!1&&!!e.toolbar).map(e=>e.toolbar),"order");this.list=await Promise.all(r.filter(e=>e==null?void 0:e.component).map(async e=>{if(e){const l=await(se(e.component)?e.component():e.component);return{...e,component:pe(l.default||l)}}}))}}),m=E(()=>h.list.filter(r=>u.isMini?(r==null?void 0:r.h5)??!0:(r==null?void 0:r.pc)??!0));return G(()=>{h.init()}),(r,e)=>{const l=k("cl-svg"),p=k("el-text"),M=k("cl-avatar"),B=k("el-dropdown-item"),R=k("el-dropdown-menu"),y=k("el-dropdown");return n(),$("div",Fe,[c("div",{class:"cl-comm__icon mr-[10px]",onClick:e[0]||(e[0]=I=>a(f).fold())},[a(f).isFold?(n(),F(l,{key:0,name:"fold"})):(n(),F(l,{key:1,name:"expand"}))]),a(f).info.menu.isGroup?(n(),F(Me,{key:0})):(n(),F(ye,{key:1})),e[1]||(e[1]=c("div",{class:"flex1"},null,-1)),c("ul",Se,[(n(!0),$(D,null,j(m.value,(I,_)=>(n(),$("li",{key:_},[(n(),F(Q(I.component)))]))),128))]),a(i).info?(n(),F(y,{key:2,"hide-on-click":"","popper-class":"app-topbar__user-popper","popper-options":{},onCommand:s},{dropdown:g(()=>[c("div",Ie,[t(M,{size:34,src:a(i).info.headImg},null,8,["src"]),c("div",Ne,[t(p,{size:"small",tag:"p"},{default:g(()=>[T(N(a(i).info.nickName),1)]),_:1}),t(p,{size:"small",type:"info"},{default:g(()=>[T(N(a(i).info.email),1)]),_:1})])]),t(R,null,{default:g(()=>[t(B,{command:"my"},{default:g(()=>[t(l,{name:"my"}),c("span",null,N(a(o)("个人中心")),1)]),_:1}),t(B,{command:"exit"},{default:g(()=>[t(l,{name:"exit"}),c("span",null,N(a(o)("退出登录")),1)]),_:1})]),_:1})]),default:g(()=>[c("div",Be,[t(p,{class:"mr-[10px]"},{default:g(()=>[T(N(a(i).info.nickName),1)]),_:1}),t(M,{size:26,src:a(i).info.headImg},null,8,["src"])])]),_:1})):U("",!0)])}}}),Pe=L(ze,[["__scopeId","data-v-219d5939"]]);function Re(C){return typeof C=="function"||Object.prototype.toString.call(C)==="[object Object]"&&!re(C)}const Ve=x({name:"b-menu",props:{keyWord:String},setup(C){const{router:d,route:b,browser:u,refs:i,setRefs:f}=V(),{menu:o,app:s}=P();function h(e){e!=b.path&&d.push(e),u.isMini&&s.fold(!0)}function m(){function e(l,p){var R;const M=((R=C.keyWord)==null?void 0:R.toLowerCase())||"";function B(y){var I,_;return y.isShow?p||(_=(I=y.meta)==null?void 0:I.label)!=null&&_.toLowerCase().includes(M)?!0:y.children?y.children.some(B):!1:!1}return l.filter(B).map(y=>{var _,v,w;(v=(_=y.meta)==null?void 0:_.label)!=null&&v.toLowerCase().includes(M)&&(p=!0);const I=S=>{var z;const W=[t(k("cl-svg"),{name:S.icon,size:18},null),t("span",{class:"ml-4 tracking-wider text-[14px] mr-auto text-ellipsis overflow-hidden whitespace-nowrap"},[(z=S.meta)==null?void 0:z.label])];return S.type==1&&S.badge&&W.push(t("div",{class:["b-menu__badge",`is-${S.badgeColor}`]},[t("span",null,[S.badge])])),W};return y.type==0?X(t(k("el-sub-menu"),null,null),{index:String(y.id),key:y.id,popperClass:"app-slider__menu"},{title(){return I(y)},default(){return e(y.children||[],p)}}):X(t(k("el-menu-item"),null,null),{index:(w=y.meta)!=null&&w.isHome?"/":y.path,key:y.id},{default(){return I(y)}})})}return e(o.list)}const r=ae(()=>{if(!C.keyWord)return;const e=l=>{l.forEach(p=>{var M;if(p.type==0){try{(M=i.menu)==null||M.open(String(p.id))}catch{}p.children&&e(p.children)}})};e(o.list)},300);return O(()=>C.keyWord,r),()=>{let e;return t("div",{class:"app-slider__menu"},[t(k("el-menu"),{ref:f("menu"),"default-active":b.path,"background-color":"transparent","collapse-transition":!1,collapse:u.isMini?!1:s.isFold,onSelect:h,"popper-offset":10},Re(e=m())?e:{default:()=>[e]})])}}}),Le={class:"app-slider__logo"},Ee={key:0},Te={class:"app-slider__search"},De={class:"app-slider__container"},je=x({name:"undefined"}),Ae=x({...je,name:"app-slider",setup(C){const{browser:d}=ee(),{app:b}=P(),u=J("");return(i,f)=>{const o=k("cl-svg"),s=k("el-input"),h=k("el-scrollbar");return n(),$("div",{class:A(["app-slider",{"is-collapse":a(b).isFold}])},[c("div",Le,[f[2]||(f[2]=c("img",{src:de},null,-1)),!a(b).isFold||a(d).isMini?(n(),$("span",Ee,N(a(b).info.name),1)):U("",!0)]),c("div",Te,[t(s,{modelValue:u.value,"onUpdate:modelValue":f[0]||(f[0]=m=>u.value=m),placeholder:i.$t("搜索关键字"),clearable:"",onFocus:f[1]||(f[1]=m=>a(b).fold(!1))},{prefix:g(()=>[t(o,{name:"search",size:16})]),_:1},8,["modelValue","placeholder"])]),c("div",De,[t(h,null,{default:g(()=>[t(a(Ve),{keyWord:u.value},null,8,["keyWord"])]),_:1})])],2)}}}),He={class:"app-process"},Oe={class:"app-process__op"},Ue={class:"app-process__container"},Ge={class:"app-process__list"},Je=["data-index","onClick","onContextmenu"],Ke={class:"label tracking-wider"},Xe={class:"app-process__op"},Ye=x({name:"undefined"}),qe=x({...Ye,name:"app-process",setup(C){const{refs:d,setRefs:b,route:u,router:i,mitt:f}=V(),{process:o,app:s}=P(),{t:h}=K();function m(){f.emit("view.refresh")}function r(){i.push("/")}function e(){i.back()}function l(){s.setFull(!s.isFull)}function p(){if(!o.list.find(v=>v.active)){const v=q(o.list);i.push(v?v.fullPath:"/")}}function M(_){d.scroller.wrapRef.scrollTo({left:_,behavior:"smooth"})}function B(_){const v=d[`item-${_}`];v&&M(v.offsetLeft-(d.scroller.wrapRef.clientWidth+v.clientWidth)/2)}function R(_,v){B(v),i.push(_.fullPath)}function y(_){o.remove(_),p()}function I(_,v){fe.open(_,{list:[{label:h("关闭当前"),hidden:v.path!==u.path,callback(w){w(),o.close(),p()}},{label:h("关闭其他"),callback(w){w(),o.set(o.list.filter(S=>S.fullPath==v.fullPath)),p()}},{label:h("关闭所有"),callback(w){w(),o.clear(),p()}}]})}return O(()=>u.path,function(_){B(o.list.findIndex(v=>v.fullPath===_)||0)}),G(()=>{var _;(_=d.scroller.wrapRef)==null||_.addEventListener("wheel",function(v){const S=v.deltaY*2;M(d.scroller.wrapRef.scrollLeft+S)},{passive:!1})}),(_,v)=>{const w=k("cl-svg"),S=k("el-scrollbar");return n(),$("div",He,[c("ul",Oe,[c("li",{class:"cl-comm__icon",onClick:e},[t(w,{name:"back"})]),c("li",{class:"cl-comm__icon",onClick:m},[t(w,{name:"refresh"})]),c("li",{class:"cl-comm__icon",onClick:r},[t(w,{name:"home"})])]),c("div",Ue,[t(S,{ref:a(b)("scroller"),class:"app-process__scroller"},{default:g(()=>[c("div",Ge,[(n(!0),$(D,null,j(a(o).list,(W,z)=>(n(),$("div",{key:z,ref_for:!0,ref:a(b)(`item-${z}`),class:A(["app-process__item",{active:W.active}]),"data-index":z,onClick:H=>R(W,Number(z)),onContextmenu:Y(H=>I(H,W),["stop","prevent"])},[c("span",Ke,N(W.meta.label||W.name||W.path),1),t(w,{class:"close",name:"close",onMousedown:Y(H=>y(Number(z)),["stop"])},null,8,["onMousedown"])],42,Je))),128))])]),_:1},512)]),c("ul",Xe,[c("li",{class:"cl-comm__icon",onClick:l},[a(s).isFull?(n(),F(w,{key:0,name:"screen-normal"})):(n(),F(w,{key:1,name:"screen-full"}))])])])}}}),Qe=L(qe,[["__scopeId","data-v-f0888500"]]),Ze={class:"app-views"},et=x({name:"undefined"}),tt=x({...et,name:"app-views",setup(C){const{mitt:d}=V(),{process:b,app:u}=P(),i=J(1),f=E(()=>b.list.filter(s=>{var h;return(h=s.meta)==null?void 0:h.keepAlive}).map(s=>s.path.substring(1,s.path.length).replace(/\//g,"-")));function o(){i.value+=1}return G(()=>{d.on("view.refresh",o)}),le(()=>{d.off("view.refresh")}),(s,h)=>{const m=k("router-view");return n(),$("div",Ze,[t(m,null,{default:g(({Component:r})=>[t(me,{name:a(u).info.router.transition||"none"},{default:g(()=>[(n(),F(ce,{key:i.value,include:f.value},[(n(),F(Q(r)))],1032,["include"]))]),_:2},1032,["name"])]),_:1})])}}}),ot=L(tt,[["__scopeId","data-v-0a75356d"]]),nt={class:"app-layout__left"},st={class:"app-layout__right"},at=x({name:"undefined"}),rt=x({...at,name:"app-layout",setup(C){const{app:d}=P();return(b,u)=>(n(),$("div",{class:A(["app-layout",{"is-collapse":a(d).isFold,"is-full":a(d).isFull}])},[c("div",{class:"app-layout__mask",onClick:u[0]||(u[0]=i=>a(d).fold(!0))}),c("div",nt,[t(Ae)]),c("div",st,[t(Pe),t(Qe),t(ot)])],2))}}),to=L(rt,[["__scopeId","data-v-28c23ccd"]]);export{to as default};
