import{e as S,c as $,u as q}from"./comm-Ba3vmJ1R.js";import{u as B,g as D,P as h}from"./index-C5WS2hJt.js";import"./store@2.0.12-i6xqVJod.js";import{u as G}from"./group-CxGNcSJX.js";import{d as y,P as n,y as K,o as O,H as p,i as l,a as P,J as A}from"./@vue_runtime-core@3.5.16-Cn8z-kNe.js";import{u as E}from"./vue-i18n@11.1.5_vue@3.5.16_typescript@5.5.4_-Bqjl69Su.js";import{O as v}from"./@vue_shared@3.5.16-UwmvJIHj.js";const H=y({name:"undefined"}),Y=y({...H,name:"dict-list",setup(J){const{service:c}=B(),{dict:w}=D(),{t}=E(),{ViewGroup:u}=G({label:t("类型"),title:t("字典列表"),service:c.dict.type,onSelect(e){x({typeId:e.id,page:1,prop:"orderNum",order:"desc"})},onEdit(){return{width:"500px",props:{labelWidth:"60px"},items:[{label:t("名称"),prop:"name",component:{name:"el-input",props:{maxlength:20}},required:!0},{label:"Key",prop:"key",component:{name:"el-input",props:{maxlength:20}},required:!0}]}}}),_=S({dialog:{width:"600px"},props:{labelWidth:"100px"},items:[{label:t("上级节点"),prop:"parentId",component:{name:"cl-select",props:{labelKey:"name",valueKey:"id",checkStrictly:!0,tree:!0,current:!0,defaultExpandAll:!0}}},{label:t("名称"),prop:"name",required:!0,component:{name:"el-input"}},{label:t("值"),prop:"value",component:{name:"slot-value"}},{label:t("排序"),prop:"orderNum",value:1,component:{name:"el-input-number",props:{min:1}}},{label:t("备注"),prop:"remark",component:{name:"el-input",props:{type:"textarea",rows:4}}}],onSubmit(e,{next:o}){var r,a;o({...e,typeId:(a=(r=u.value)==null?void 0:r.selected)==null?void 0:a.id})},plugins:[h.Form.setFocus("name")]}),k=$({contextMenu:["refresh",e=>{var o;return{label:t("新增"),hidden:!((o=c.dict.info._permission)!=null&&o.add),callback(r){f(e),r()}}},"edit","delete","order-asc","order-desc"],columns:[{type:"selection"},{label:t("名称"),prop:"name",align:"left",minWidth:200},{label:t("ID"),prop:"id",minWidth:120},{label:t("值"),prop:"value",minWidth:200,showOverflowTooltip:!0},{label:t("备注"),prop:"remark",showOverflowTooltip:!0,minWidth:170},{label:t("排序"),prop:"orderNum",sortable:"desc",width:100,fixed:"right"},{label:t("创建时间"),prop:"createTime",sortable:"custom",minWidth:170},{label:t("更新时间"),prop:"updateTime",sortable:"custom",minWidth:170},{type:"op",width:250,buttons:[{label:t("新增"),type:"success",hidden:!c.dict.info._permission.add,onClick({scope:e}){f(e.row)}},"edit","delete"]}],plugins:[h.Table.toTree()]}),d=q({service:c.dict.info,onRefresh(e,{render:o}){c.dict.info.list(e).then(r=>{var a,i;o(r),w.refresh([(i=(a=u.value)==null?void 0:a.selected)==null?void 0:i.key])})}});function x(e){var o;(o=d.value)==null||o.refresh(e)}function f(e){var o;(o=d.value)==null||o.rowAppend({parentId:e.id,orderNum:1})}function g(e){var o,r;(r=_.value)==null||r.setForm("value",(o=e[0])==null?void 0:o.url)}return(e,o)=>{const r=n("cl-refresh-btn"),a=n("cl-add-btn"),i=n("cl-multi-delete-btn"),b=n("cl-flex1"),C=n("cl-search-key"),m=n("cl-row"),T=n("cl-table"),V=n("el-input"),W=n("cl-upload-space"),N=n("cl-upsert"),I=n("cl-crud"),U=n("cl-view-group");return O(),K(U,{ref_key:"ViewGroup",ref:u},{"item-name":p(({item:s})=>[A(v(s.name)+" - "+v(s.key),1)]),right:p(()=>[l(I,{ref_key:"Crud",ref:d},{default:p(()=>[l(m,null,{default:p(()=>[l(r),l(a),l(i),l(b),l(C,{placeholder:e.$t("搜索名称")},null,8,["placeholder"])]),_:1}),l(m,null,{default:p(()=>[l(T,{ref_key:"Table",ref:k},null,512)]),_:1}),l(m,null,{default:p(()=>[l(b)]),_:1}),l(N,{ref_key:"Upsert",ref:_},{"slot-value":p(({scope:s})=>[P("div",null,[l(V,{modelValue:s.value,"onUpdate:modelValue":F=>s.value=F,placeholder:e.$t("请填写值"),clearable:"",type:"textarea",rows:4,class:"mb-2"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(W,{text:e.$t("使用文件"),limit:1,onConfirm:g},null,8,["text"])])]),_:1},512)]),_:1},512)]),_:1},512)}}});export{Y as _};
