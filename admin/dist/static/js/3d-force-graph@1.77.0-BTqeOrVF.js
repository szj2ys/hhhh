import{D as R,R as L,A as T,a as S}from"./three@0.175.0-DVJ6AaYR.js";import{t as D}from"./three-forcegraph@1.42.13_three@0.175.0-Ca0pnlZn.js";import{t as A}from"./three-render-objects@1.40.2_three@0.175.0-BbzzENYd.js";import{i as I}from"./accessor-fn@1.5.3-Dh2lNxUP.js";import{i as N}from"./kapsule@1.16.3-C41LLEgf.js";function F(n,r){r===void 0&&(r={});var e=r.insertAt;if(!(typeof document>"u")){var t=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css",e==="top"&&t.firstChild?t.insertBefore(l,t.firstChild):t.appendChild(l),l.styleSheet?l.styleSheet.cssText=n:l.appendChild(document.createTextNode(n))}}var z=`.graph-info-msg {
  top: 50%;
  width: 100%;
  text-align: center;
  color: lavender;
  opacity: 0.7;
  font-size: 22px;
  position: absolute;
  font-family: Sans-serif;
}

.scene-container .clickable {
  cursor: pointer;
}

.scene-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.scene-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}`;F(z);function P(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=Array(r);e<r;e++)t[e]=n[e];return t}function U(n){if(Array.isArray(n))return P(n)}function v(n,r,e){return(r=H(r))in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function G(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function M(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),e.push.apply(e,t)}return e}function _(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?E(Object(e),!0).forEach(function(t){v(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):E(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function O(n){return U(n)||G(n)||V(n)||M()}function B(n,r){if(typeof n!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,r);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function H(n){var r=B(n,"string");return typeof r=="symbol"?r:r+""}function V(n,r){if(n){if(typeof n=="string")return P(n,r);var e={}.toString.call(n).slice(8,-1);return e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set"?Array.from(n):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?P(n,r):void 0}}function w(n,r){var e=new r;return e._destructor&&e._destructor(),{linkProp:function(l){return{default:e[l](),onChange:function(s,d){d[n][l](s)},triggerUpdate:!1}},linkMethod:function(l){return function(f){for(var s=f[n],d=arguments.length,u=new Array(d>1?d-1:0),a=1;a<d;a++)u[a-1]=arguments[a];var o=s[l].apply(s,u);return o===s?this:o}}}}var C=window.THREE?window.THREE:{AmbientLight:T,DirectionalLight:S,REVISION:L},q=170,x=w("forceGraph",D),K=Object.assign.apply(Object,O(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","nodePositionUpdate","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(n){return v({},n,x.linkProp(n))}))),W=Object.assign.apply(Object,O(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(n){return v({},n,x.linkMethod(n))}))),j=w("renderObjs",A),Z=Object.assign.apply(Object,O(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(n){return v({},n,j.linkProp(n))}))),$=Object.assign.apply(Object,O(["lights","cameraPosition","postProcessingComposer"].map(function(n){return v({},n,j.linkMethod(n))})).concat([{graph2ScreenCoords:j.linkMethod("getScreenCoords"),screen2GraphCoords:j.linkMethod("getSceneCoords")}])),ne=N({props:_(_({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(r,e){return e.renderObjs.lineHoverPrecision(r)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(r,e){var t=e.renderObjs.controls();t&&(t.enabled=r,r&&t.domElement&&t.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},K),Z),methods:_(_({zoomToFit:function(r,e,t){for(var l,f=arguments.length,s=new Array(f>3?f-3:0),d=3;d<f;d++)s[d-3]=arguments[d];return r.renderObjs.fitToBbox((l=r.forceGraph).getGraphBbox.apply(l,s),e,t),this},pauseAnimation:function(r){return r.animationFrameRequestId!==null&&(cancelAnimationFrame(r.animationFrameRequestId),r.animationFrameRequestId=null),this},resumeAnimation:function(r){return r.animationFrameRequestId===null&&this._animationCycle(),this},_animationCycle:function(r){r.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),r.forceGraph.tickFrame(),r.renderObjs.tick(),r.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(r){return r.renderObjs.scene()},camera:function(r){return r.renderObjs.camera()},renderer:function(r){return r.renderObjs.renderer()},controls:function(r){return r.renderObjs.controls()},tbControls:function(r){return r.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},W),$),stateInit:function(r){var e=r.controlType,t=r.rendererConfig,l=r.extraRenderers,f=new D;return{forceGraph:f,renderObjs:A({controlType:e,rendererConfig:t,extraRenderers:l}).objects([f]).lights([new C.AmbientLight(13421772,Math.PI),new C.DirectionalLight(16777215,.6*Math.PI)])}},init:function(r,e){r.innerHTML="",r.appendChild(e.container=document.createElement("div")),e.container.style.position="relative";var t=document.createElement("div");e.container.appendChild(t),e.renderObjs(t);var l=e.renderObjs.camera(),f=e.renderObjs.renderer(),s=e.renderObjs.controls();s.enabled=!!e.enableNavigationControls,e.lastSetCameraZ=l.position.z;var d;e.container.appendChild(d=document.createElement("div")),d.className="graph-info-msg",d.textContent="",e.forceGraph.onLoading(function(){d.textContent="Loading..."}).onFinishLoading(function(){d.textContent=""}).onUpdate(function(){e.graphData=e.forceGraph.graphData(),l.position.x===0&&l.position.y===0&&l.position.z===e.lastSetCameraZ&&e.graphData.nodes.length&&(l.lookAt(e.forceGraph.position),e.lastSetCameraZ=l.position.z=Math.cbrt(e.graphData.nodes.length)*q)}).onFinishUpdate(function(){if(e._dragControls){var u=e.graphData.nodes.find(function(o){return o.__initialFixedPos&&!o.__disposeControlsAfterDrag});u?u.__disposeControlsAfterDrag=!0:e._dragControls.dispose(),e._dragControls=void 0}if(e.enableNodeDrag&&e.enablePointerInteraction&&e.forceEngine==="d3"){var a=e._dragControls=new R(e.graphData.nodes.map(function(o){return o.__threeObj}).filter(function(o){return o}),l,f.domElement);a.addEventListener("dragstart",function(o){var c=h(o.object);if(c){s.enabled=!1,o.object.__initialPos=o.object.position.clone(),o.object.__prevPos=o.object.position.clone();var i=c.__data;!i.__initialFixedPos&&(i.__initialFixedPos={fx:i.fx,fy:i.fy,fz:i.fz}),!i.__initialPos&&(i.__initialPos={x:i.x,y:i.y,z:i.z}),["x","y","z"].forEach(function(b){return i["f".concat(b)]=i[b]}),f.domElement.classList.add("grabbable")}}),a.addEventListener("drag",function(o){var c=h(o.object);if(c){if(!o.object.hasOwnProperty("__graphObjType")){var i=o.object.__initialPos,b=o.object.__prevPos,p=o.object.position;c.position.add(p.clone().sub(b)),b.copy(p),p.copy(i)}var g=c.__data,m=c.position,y={x:m.x-g.x,y:m.y-g.y,z:m.z-g.z};["x","y","z"].forEach(function(k){return g["f".concat(k)]=g[k]=m[k]}),e.forceGraph.d3AlphaTarget(.3).resetCountdown(),g.__dragged=!0,e.onNodeDrag(g,y)}}),a.addEventListener("dragend",function(o){var c=h(o.object);if(c){delete o.object.__initialPos,delete o.object.__prevPos;var i=c.__data;i.__disposeControlsAfterDrag&&(a.dispose(),delete i.__disposeControlsAfterDrag);var b=i.__initialFixedPos,p=i.__initialPos,g={x:p.x-i.x,y:p.y-i.y,z:p.z-i.z};b&&(["x","y","z"].forEach(function(m){var y="f".concat(m);b[y]===void 0&&delete i[y]}),delete i.__initialFixedPos,delete i.__initialPos,i.__dragged&&(delete i.__dragged,e.onNodeDragEnd(i,g))),e.forceGraph.d3AlphaTarget(0).resetCountdown(),e.enableNavigationControls&&(s.enabled=!0,s.domElement&&s.domElement.ownerDocument&&s.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),f.domElement.classList.remove("grabbable")}})}}),C.REVISION<155&&(e.renderObjs.renderer().useLegacyLights=!1),e.renderObjs.hoverOrderComparator(function(u,a){var o=h(u);if(!o)return 1;var c=h(a);if(!c)return-1;var i=function(p){return p.__graphObjType==="node"};return i(c)-i(o)}).tooltipContent(function(u){var a=h(u);return a&&I(e["".concat(a.__graphObjType,"Label")])(a.__data)||""}).hoverDuringDrag(!1).onHover(function(u){var a=h(u);if(a!==e.hoverObj){var o=e.hoverObj?e.hoverObj.__graphObjType:null,c=e.hoverObj?e.hoverObj.__data:null,i=a?a.__graphObjType:null,b=a?a.__data:null;if(o&&o!==i){var p=e["on".concat(o==="node"?"Node":"Link","Hover")];p&&p(null,c)}if(i){var g=e["on".concat(i==="node"?"Node":"Link","Hover")];g&&g(b,o===i?c:null)}f.domElement.classList[a&&e["on".concat(i==="node"?"Node":"Link","Click")]||!a&&e.onBackgroundClick?"add":"remove"]("clickable"),e.hoverObj=a}}).clickAfterDrag(!1).onClick(function(u,a){var o=h(u);if(o){var c=e["on".concat(o.__graphObjType==="node"?"Node":"Link","Click")];c&&c(o.__data,a)}else e.onBackgroundClick&&e.onBackgroundClick(a)}).onRightClick(function(u,a){var o=h(u);if(o){var c=e["on".concat(o.__graphObjType==="node"?"Node":"Link","RightClick")];c&&c(o.__data,a)}else e.onBackgroundRightClick&&e.onBackgroundRightClick(a)}),this._animationCycle()}});function h(n){for(var r=n;r&&!r.hasOwnProperty("__graphObjType");)r=r.parent;return r}export{ne as _};
