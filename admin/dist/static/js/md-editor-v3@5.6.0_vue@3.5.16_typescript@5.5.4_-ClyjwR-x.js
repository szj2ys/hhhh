import{M as Ro,u as Fo,U as at,k as Ql,x as eo,$ as No,C as Do,I as Po}from"./@vavt_util@2.1.0-DP7Y4tOx.js";import{d as B,w as M,e as j,M as pe,_ as Ie,i as m,C as A,O as ne,v as Z,F as Le,a5 as Oo,n as ue,l as to,T as Bo,X as Vo}from"./@vue_runtime-core@3.5.16-Cn8z-kNe.js";import{u as te,v as D,z as de,x as he}from"./@vue_reactivity@3.5.16-Dqy0TPbS.js";import{m as jo}from"./medium-zoom@1.1.0-DpOV4RrF.js";import{c as Wo}from"./@vavt_copy2clipboard@1.0.3-ByRarttu.js";import{M as zo}from"./markdown-it@14.1.0-Djuc-qfa.js";import{r as Uo}from"./markdown-it-image-figures@2.1.1_markdown-it@14.1.0-IpqUZCLv.js";import{s as qo}from"./markdown-it-sub@2.0.0-Bxi31R0z.js";import{s as Go}from"./markdown-it-sup@2.0.0-Bp2DoVCN.js";import{L as Xo}from"./lru-cache@11.1.0-DCqz6wGB.js";import{U as Ko,T as Yo,X as Zo,S as Jo,C as Qo,L as en,a as tn,E as ln,V as on,b as nn,c as an,M as rn,d as sn,e as bl,f as cn,F as dn,R as un,g as mn,I as fn,h as vn,i as gn,j as hn,k as pn,l as bn,Q as yn,m as kn,n as wn,H as Cn,o as $n,p as Tn,q as Sn,B as xn}from"./lucide-vue-next@0.453.0_vue@3.5.16_typescript@5.5.4_-BEMPzl1l.js";import{k as En,E as me,d as _n,p as An}from"./@codemirror_view@6.37.1-Bd3_Yh4F.js";import{l as In}from"./@codemirror_language-data@6.5.1-Blx1hvTn.js";import{markdown as Ln}from"./@codemirror_lang-markdown@6.3.2-CYa6dX39.js";import{o as ke,j as Qe,E as $e,a as Hn}from"./@codemirror_state@6.5.2-DQ6R6BiX.js";import{d as Mn,h as Rn,i as Fn,a as yl,u as Nn,r as Dn,b as Pn}from"./@codemirror_commands@6.8.1-BcyFRvqW.js";import{u as lo,i as On,H as oo}from"./@codemirror_language@6.11.1-BYrSuhr8.js";import{t as T}from"./@lezer_highlight@1.2.1-DwVMghhY.js";import{a as Bn}from"./@codemirror_autocomplete@6.18.6-BmbiSXaS.js";import{s as Vn}from"./@codemirror_search@6.5.11-CSoQfkg1.js";const r="md-editor",O="https://unpkg.com",jn=`${O}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,kl={main:`${O}/prettier@3.3.3/standalone.js`,markdown:`${O}/prettier@3.3.3/plugins/markdown.js`},Wn={css:`${O}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${O}/cropperjs@1.6.2/dist/cropper.min.js`},zn=`${O}/screenfull@5.2.0/dist/screenfull.js`,Un=`${O}/mermaid@11.3.0/dist/mermaid.min.js`,qn={js:`${O}/katex@0.16.11/dist/katex.min.js`,css:`${O}/katex@0.16.11/dist/katex.min.css`},it={a11y:{light:`${O}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${O}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${O}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${O}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${O}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${O}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${O}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${O}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${O}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${O}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${O}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${O}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${O}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${O}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${O}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${O}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},no=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],ao=["markdownTotal","=","scrollSwitch"],wl={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},G={editorExtensions:{highlight:{js:jn,css:it},prettier:{standaloneJs:kl.main,parserMarkdownJs:kl.markdown},cropper:{...Wn},screenfull:{js:zn},mermaid:{js:Un,enableZoom:!0},katex:{...qn}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,l)=>l,markdownItConfig:()=>{},markdownItPlugins:e=>e,mermaidConfig:e=>e,katexConfig:e=>e},He=.1,le=({instance:e,ctx:l,props:t={}},o="default")=>{const n=(e==null?void 0:e.$slots[o])||(l==null?void 0:l.slots[o]);return(n?n(e):"")||t[o]},Gn={overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},relative:{type:String,default:"html"},disabled:{type:Boolean,default:void 0}},we=B({name:`${r}-dropdown`,props:Gn,setup(e,l){const t=`${r}-dropdown-hidden`,o=te({overlayClass:[t],overlayStyle:{},triggerHover:!1,overlayHover:!1}),n=D(),a=D(),i=()=>{var d,s;if(e.disabled)return!1;o.triggerHover=!0;const v=n.value,h=a.value;if(!v||!h)return;const y=v.getBoundingClientRect(),w=v.offsetTop,b=v.offsetLeft,C=y.height,g=y.width,k=v.getRootNode(),$=((d=k.querySelector(e.relative))==null?void 0:d.scrollLeft)||0,p=((s=k.querySelector(e.relative))==null?void 0:s.clientWidth)||0;let x=b-h.offsetWidth/2+g/2-$;x+h.offsetWidth>$+p&&(x=$+p-h.offsetWidth),x<0&&(x=0),o.overlayStyle={...o.overlayStyle,top:w+C+"px",left:x+"px"},e.onChange(!0)},u=()=>{if(e.disabled)return!1;o.overlayHover=!0};M(()=>e.visible,d=>{d?o.overlayClass=o.overlayClass.filter(s=>s!==t):o.overlayClass.push(t)});let c=-1;const f=d=>{n.value===d.target?o.triggerHover=!1:o.overlayHover=!1,clearTimeout(c),c=window.setTimeout(()=>{!o.overlayHover&&!o.triggerHover&&e.onChange(!1)},10)};return j(()=>{n.value.addEventListener("mouseenter",i),n.value.addEventListener("mouseleave",f),a.value.addEventListener("mouseenter",u),a.value.addEventListener("mouseleave",f)}),pe(()=>{n.value.removeEventListener("mouseenter",i),n.value.removeEventListener("mouseleave",f),a.value.removeEventListener("mouseenter",u),a.value.removeEventListener("mouseleave",f)}),()=>{const d=le({ctx:l}),s=le({props:e,ctx:l},"overlay"),v=Ie(d instanceof Array?d[0]:d,{ref:n,key:"cloned-dropdown-trigger"}),h=m("div",{class:[`${r}-dropdown`,o.overlayClass],style:o.overlayStyle,ref:a},[m("div",{class:`${r}-dropdown-overlay`},[s instanceof Array?s[0]:s])]);return[v,h]}}}),Xn={title:{type:String,default:""},visible:{type:Boolean,default:void 0},trigger:{type:[String,Object],default:void 0},onChange:{type:Function,default:void 0},overlay:{type:[String,Object],default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},De=B({name:"DropdownToolbar",props:Xn,emits:["onChange"],setup(e,l){const t=A("editorId");return()=>{const o=le({props:e,ctx:l},"trigger"),n=le({props:e,ctx:l},"overlay"),a=le({props:e,ctx:l});return m(we,{relative:`#${t}-toolbar-wrapper`,visible:e.visible,onChange:i=>{var u;(u=e.onChange)==null||u.call(e,i),l.emit("onChange",i)},overlay:n,disabled:e.disabled},{default:()=>[m("div",{class:[`${r}-toolbar-item`,e.disabled&&`${r}-disabled`],title:e.title||""},[a||o])]})}}});De.install=e=>(e.component(De.name,De),e);var Kn=Object.defineProperty,Yn=(e,l,t)=>l in e?Kn(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,Zn=(e,l,t)=>Yn(e,l+"",t);class Jn{constructor(){Zn(this,"pools",{})}remove(l,t,o){const a=this.pools[l]&&this.pools[l][t];a&&(this.pools[l][t]=a.filter(i=>i!==o))}clear(l){this.pools[l]={}}on(l,t){return this.pools[l]||(this.pools[l]={}),this.pools[l][t.name]||(this.pools[l][t.name]=[]),this.pools[l][t.name].push(t.callback),this.pools[l][t.name].includes(t.callback)}emit(l,t,...o){this.pools[l]||(this.pools[l]={});const a=this.pools[l][t];a&&a.forEach(i=>{try{i(...o)}catch{}})}}const S=new Jn,Xe="onSave",ct="changeCatalogVisible",io="changeFullscreen",Cl="pageFullscreenChanged",$l="fullscreenChanged",Tl="previewChanged",Sl="previewOnlyChanged",xl="htmlPreviewChanged",El="catalogVisibleChanged",Pe="buildFinished",ge="errorCatcher",P="replace",Ke="uploadImage",rt="openModals",ro="ctrlZ",so="ctrlShiftZ",_e="catalogChanged",co="pushCatalog",dt="rerender",uo="eventListener",mo="taskStateChanged",fo="sendEditorView",Ue="getEditorView",Qn={copy:`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy ${r}-icon"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`,"collapse-tips":`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-circle-chevron-left ${r}-icon"><circle cx="12" cy="12" r="10"/><path d="m14 16-4-4 4-4"/></svg>`,pin:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin"><path d="M12 17v5"/><path d="M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z"/></svg>',"pin-off":'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pin-off"><path d="M12 17v5"/><path d="M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89"/><path d="m2 2 20 20"/><path d="M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11"/></svg>'},Oe=(e,l)=>typeof l[e]=="string"?l[e]:Qn[e],_l=(e,l)=>{const t=o=>{const n=e.parentElement||document.body,a=n.offsetWidth,i=n.offsetHeight,{clientWidth:u,clientHeight:c}=document.documentElement,f=o.offsetX,d=o.offsetY,s=h=>{let y=h.x+document.body.scrollLeft-document.body.clientLeft-f,w=h.y+document.body.scrollTop-document.body.clientTop-d;y=y<1?1:y<u-a-1?y:u-a-1,w=w<1?1:w<c-i-1?w:c-i-1,l?l(y,w):(n.style.left=`${y}px`,n.style.top=`${w}px`)};document.addEventListener("mousemove",s);const v=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",v)};document.addEventListener("mouseup",v)};return e.addEventListener("mousedown",t),()=>{e.removeEventListener("mousedown",t)}},se=(e,l,t="")=>{var o;const n=document.getElementById(l.id);if(n)t!==""&&(Reflect.get(window,t)?(o=l.onload)==null||o.call(n,new Event("load")):l.onload&&n.addEventListener("load",l.onload));else{const a={...l};a.onload=null;const i=ta(e,a);l.onload&&i.addEventListener("load",l.onload),document.head.appendChild(i)}},ea=(e,l)=>{const t=document.getElementById(l.id);t==null||t.remove(),se(e,l)},ta=(e,l)=>{const t=document.createElement(e);return Object.keys(l).forEach(o=>{l[o]!==void 0&&(t[o]=l[o])}),t},Al=(()=>{const e=t=>{if(!t)return()=>{};const o=t.firstChild;let n=1,a=0,i=0,u=!1,c,f,d,s=1;const v=()=>{o.style.transform=`translate(${a}px, ${i}px) scale(${n})`},h=p=>{p.touches.length===1?(u=!0,c=p.touches[0].clientX-a,f=p.touches[0].clientY-i):p.touches.length===2&&(d=Math.hypot(p.touches[0].clientX-p.touches[1].clientX,p.touches[0].clientY-p.touches[1].clientY),s=n)},y=p=>{if(p.preventDefault(),u&&p.touches.length===1)a=p.touches[0].clientX-c,i=p.touches[0].clientY-f,v();else if(p.touches.length===2){const F=Math.hypot(p.touches[0].clientX-p.touches[1].clientX,p.touches[0].clientY-p.touches[1].clientY)/d,E=n;n=s*(1+(F-1));const _=(p.touches[0].clientX+p.touches[1].clientX)/2,I=(p.touches[0].clientY+p.touches[1].clientY)/2,L=o.getBoundingClientRect(),H=(_-L.left)/E,z=(I-L.top)/E;a-=H*(n-E),i-=z*(n-E),v()}},w=()=>{u=!1},b=p=>{p.preventDefault();const x=.02,F=n;p.deltaY<0?n+=x:n=Math.max(.1,n-x);const E=o.getBoundingClientRect(),_=p.clientX-E.left,I=p.clientY-E.top;a-=_/F*(n-F),i-=I/F*(n-F),v()},C=p=>{u=!0,c=p.clientX-a,f=p.clientY-i},g=p=>{u&&(a=p.clientX-c,i=p.clientY-f,v())},k=()=>{u=!1},$=()=>{u=!1};return t.addEventListener("touchstart",h,{passive:!1}),t.addEventListener("touchmove",y,{passive:!1}),t.addEventListener("touchend",w),t.addEventListener("wheel",b,{passive:!1}),t.addEventListener("mousedown",C),t.addEventListener("mousemove",g),t.addEventListener("mouseup",k),t.addEventListener("mouseleave",$),()=>{t.removeEventListener("touchstart",h),t.removeEventListener("touchmove",y),t.removeEventListener("touchend",w),t.removeEventListener("wheel",b),t.removeEventListener("mousedown",C),t.removeEventListener("mousemove",g),t.removeEventListener("mouseup",k),t.removeEventListener("mouseleave",$)}};return(t,o)=>{const n=new Map;return t==null||t.forEach(a=>{let i=a.querySelector(`.${r}-mermaid-action`);i||(a.insertAdjacentHTML("beforeend",`<div class="${r}-mermaid-action">${Oe("pin-off",o.customIcon)}</div>`),i=a.querySelector(`.${r}-mermaid-action`));const u=()=>{const c=n.get(a);if(c!=null&&c.removeEvent)c.removeEvent(),a.removeAttribute("data-grab"),n.set(a,{removeClick:c.removeClick}),i.innerHTML=Oe("pin-off",o.customIcon);else{const f=e(a);a.setAttribute("data-grab",""),n.set(a,{removeEvent:f,removeClick:c==null?void 0:c.removeClick}),i.innerHTML=Oe("pin",o.customIcon)}};i.addEventListener("click",u),n.set(a,{removeClick:()=>i.removeEventListener("click",u)})}),()=>{n.forEach(({removeEvent:a,removeClick:i})=>{a==null||a(),i==null||i()}),n.clear()}}})(),la=(e,l="image.png")=>{const t=e.split(","),o=t[0].match(/:(.*?);/);if(o){const n=o[1],a=atob(t[1]);let i=a.length;const u=new Uint8Array(i);for(;i--;)u[i]=a.charCodeAt(i);return new File([u],l,{type:n})}return null},oa=(e,l)=>{if(!e)return e;const t=l.split(`
`),o=['<span rn-wrapper aria-hidden="true">'];return t.forEach(()=>{o.push("<span></span>")}),o.push("</span>"),`<span class="${r}-code-block">${e}</span>${o.join("")}`},na=(e,l)=>{if(!e||!l)return 0;const t=e==null?void 0:e.getBoundingClientRect();if(l===document.documentElement)return t.top-l.clientTop;const o=l==null?void 0:l.getBoundingClientRect();return t.top-o.top},Il=(()=>{let e=0;return()=>++e})(),ce={hljs:`${r}-hljs`,hlcss:`${r}-hlCss`,prettier:`${r}-prettier`,prettierMD:`${r}-prettierMD`,cropperjs:`${r}-cropper`,croppercss:`${r}-cropperCss`,screenfull:`${r}-screenfull`,mermaidM:`${r}-mermaid-m`,mermaid:`${r}-mermaid`,katexjs:`${r}-katex`,katexcss:`${r}-katexCss`},aa=(e,l)=>{const t=A("editorId"),{noImgZoomIn:o}=e,n=Ql(()=>{const a=document.querySelectorAll(`#${t}-preview img:not(.not-zoom):not(.medium-zoom-image)`);a.length!==0&&jo(a,{background:"#00000073"})});j(()=>{!o&&e.setting.preview&&n()}),M([l,de(e.setting,"preview")],()=>{!o&&e.setting.preview&&n()})},ia=(e,l,t)=>{const o=A("editorId"),n=A("rootRef"),a=A("usedLanguageText"),i=()=>{n.value.querySelectorAll(`#${o} .${r}-preview .${r}-code`).forEach(f=>{let d=-1;const s=f.querySelector(`.${r}-copy-button`);s&&(s.onclick=v=>{v.preventDefault(),clearTimeout(d);const y=(f.querySelector("input:checked + pre code")||f.querySelector("pre code")).textContent,{text:w,successTips:b,failTips:C}=a.value.copyCode;let g=b;Wo(e.formatCopiedText(y)).catch(()=>{g=C}).finally(()=>{s.dataset.isIcon?s.dataset.tips=g:s.innerHTML=g,d=window.setTimeout(()=>{s.dataset.isIcon?s.dataset.tips=w:s.innerHTML=w},1500)})})})},u=()=>{ue(i)},c=f=>{f&&ue(i)};M([l,t],u),M(()=>e.setting.preview,c),M(()=>e.setting.htmlPreview,c),j(i)},ra=e=>{const l=A("highlight"),t=he(G.editorExtensions.highlight.instance);return j(()=>{e.noHighlight||t.value||(se("link",{...l.value.css,rel:"stylesheet",id:ce.hlcss}),se("script",{...l.value.js,id:ce.hljs,onload(){t.value=window.hljs}},"hljs"))}),M(()=>l.value.css,()=>{e.noHighlight||G.editorExtensions.highlight.instance||ea("link",{...l.value.css,rel:"stylesheet",id:ce.hlcss})}),t},Be=new Xo({max:1e3,ttl:6e5}),sa=e=>{const l=A("editorId"),t=A("theme"),o=A("rootRef"),{editorExtensions:n,editorExtensionsAttrs:a,mermaidConfig:i}=G;let u=n.mermaid.instance;const c=he(-1),f=()=>{!e.noMermaid&&u&&(u.initialize(i({startOnLoad:!1,theme:t.value==="dark"?"dark":"default"})),c.value=c.value+1)};return M(()=>t.value,()=>{Be.clear(),f()}),j(()=>{var s,v;if(e.noMermaid||u)return;const h=n.mermaid.js;/\.mjs/.test(h)?(se("link",{...(s=a.mermaid)==null?void 0:s.js,rel:"modulepreload",href:h,id:ce.mermaidM}),import(h).then(y=>{u=y.default,f()})):se("script",{...(v=a.mermaid)==null?void 0:v.js,src:h,id:ce.mermaid,onload(){u=window.mermaid,f()}},"mermaid")}),{reRenderRef:c,replaceMermaid:async()=>{if(!e.noMermaid&&u){const s=o.value.querySelectorAll(`div.${r}-mermaid`),v=document.createElement("div"),h=document.body.offsetWidth>1366?document.body.offsetWidth:1366,y=document.body.offsetHeight>768?document.body.offsetHeight:768;v.style.width=h+"px",v.style.height=y+"px",v.style.position="fixed",v.style.zIndex="-10000",v.style.top="-10000";let w=s.length;w>0&&document.body.appendChild(v),await Promise.allSettled(Array.from(s).map(b=>(async g=>{var k;const $=g.innerText;let p=Be.get($);if(!p){const x=at();let F={svg:""};try{F=await u.render(x,$,v),p=await e.sanitizeMermaid(F.svg);const E=document.createElement("p");E.className=`${r}-mermaid`,E.setAttribute("data-processed",""),E.innerHTML=p,(k=E.children[0])==null||k.removeAttribute("height"),Be.set($,E.innerHTML),g.dataset.line!==void 0&&(E.dataset.line=g.dataset.line),g.replaceWith(E)}catch(E){S.emit(l,ge,{name:"mermaid",message:E.message,error:E})}--w===0&&v.remove()}})(b)))}}}},ca=e=>{const l=he(G.editorExtensions.katex.instance);return j(()=>{if(e.noKatex||l.value)return;const{editorExtensions:t}=G;se("script",{src:t.katex.js,id:ce.katexjs,onload(){l.value=window.katex}},"katex"),se("link",{rel:"stylesheet",href:t.katex.css,id:ce.katexcss})}),l},da=(e,l)=>{const t=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(o,n,a,i,u)=>{const c=o[n],f=c.content.trim();if(c.info==="mermaid"){let d;o[n].map&&o[n].level===0&&(d=o[n].map[0],o[n].attrSet("data-line",String(d)));const s=Be.get(f);return s?`<p class="${r}-mermaid" ${d!==void 0?"data-line="+d:""} data-processed>${s}</p>`:`<div class="${r}-mermaid" ${d!==void 0?"data-line="+d:""} data-mermaid-theme=${l.themeRef.value}">${e.utils.escapeHtml(f)}</div>`}return t(o,n,a,i,u)}},qe=(e,l)=>{const t=e.attrs?e.attrs.slice():[];return l.forEach(o=>{const n=e.attrIndex(o[0]);n<0?t.push(o):(t[n]=t[n].slice(),t[n][1]+=` ${o[1]}`)}),t},Ll={block:[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}],inline:[{open:"$$",close:"$$"},{open:"$",close:"$"},{open:"\\[",close:"\\]"},{open:"\\(",close:"\\)"}]},ua=e=>(l,t)=>{const o=e.delimiters;let n,a,i;for(const u of o)if(l.src.startsWith(u.open,l.pos)){const c=l.pos+u.open.length;for(n=c;(n=l.src.indexOf(u.close,n))!==-1;){for(i=n-1;l.src[i]==="\\";)i-=1;if((n-i)%2===1)break;n+=u.close.length}if(n===-1)return t||(l.pending+=u.open),l.pos=c,!0;if(n-c===0)return t||(l.pending+=u.open+u.close),l.pos=c+u.close.length,!0;if(!t){const f=l.src.slice(c,n);a=l.push("math_inline","math",0),a.markup=u.open,a.content=f}return l.pos=n+u.close.length,!0}return!1},ma=e=>(l,t,o,n)=>{const a=e.delimiters;let i,u,c,f,d=!1,s=l.bMarks[t]+l.tShift[t],v=l.eMarks[t];for(const h of a)if(l.src.slice(s,s+h.open.length)===h.open&&l.src.slice(v-h.close.length,v)===h.close){if(s+=h.open.length,i=l.src.slice(s,v),n)return!0;for(i.trim().slice(-h.close.length)===h.close&&(i=i.trim().slice(0,-h.close.length),d=!0),c=t;!d&&(c++,!(c>=o||(s=l.bMarks[c]+l.tShift[c],v=l.eMarks[c],s<v&&l.tShift[c]<l.blkIndent)));)l.src.slice(s,v).trim().slice(-h.close.length)===h.close&&(f=l.src.slice(0,v).lastIndexOf(h.close),u=l.src.slice(s,f),d=!0);l.line=c+1;const y=l.push("math_block","math",0);return y.block=!0,y.content=(i&&i.trim()?i+`
`:"")+l.getLines(t+1,c,l.tShift[t],!0)+(u&&u.trim()?u:""),y.map=[t,l.line],y.markup=h.open,!0}return!1},fa=(e,{katexRef:l,inlineDelimiters:t,blockDelimiters:o})=>{const n=(i,u,c,f,d)=>{const s=i[u],v={attrs:qe(s,[["class",`${r}-katex-inline`]])};if(l.value){const h=l.value.renderToString(s.content,G.katexConfig({throwOnError:!1}));return`<span ${d.renderAttrs(v)} data-processed>${h}</span>`}else return`<span ${d.renderAttrs(v)}>${s.content}</span>`},a=(i,u,c,f,d)=>{const s=i[u],v={attrs:qe(s,[["class",`${r}-katex-block`]])};if(l.value){const h=l.value.renderToString(s.content,G.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${d.renderAttrs(v)} data-processed>${h}</p>`}else return`<p ${d.renderAttrs(v)}>${s.content}</p>`};e.inline.ruler.before("escape","math_inline",ua({delimiters:t||Ll.inline})),e.block.ruler.after("blockquote","math_block",ma({delimiters:o||Ll.block}),{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=n,e.renderer.rules.math_block=a},va=(e,l)=>{l=l||{};const t=3,o=l.marker||"!",n=o.charCodeAt(0),a=o.length;let i="",u="";const c=(d,s,v,h,y)=>{const w=d[s];return w.type==="admonition_open"?d[s].attrPush(["class",`${r}-admonition ${r}-admonition-${w.info}`]):w.type==="admonition_title_open"&&d[s].attrPush(["class",`${r}-admonition-title`]),y.renderToken(d,s,v)},f=d=>{const s=d.trim().split(" ",2);u="",i=s[0],s.length>1&&(u=d.substring(i.length+2))};e.block.ruler.before("code","admonition",(d,s,v,h)=>{let y,w,b,C=!1,g=d.bMarks[s]+d.tShift[s],k=d.eMarks[s];if(n!==d.src.charCodeAt(g))return!1;for(y=g+1;y<=k&&o[(y-g)%a]===d.src[y];y++);const $=Math.floor((y-g)/a);if($!==t)return!1;y-=(y-g)%a;const p=d.src.slice(g,y),x=d.src.slice(y,k);if(f(x),h)return!0;for(w=s;w++,!(w>=v||(g=d.bMarks[w]+d.tShift[w],k=d.eMarks[w],g<k&&d.sCount[w]<d.blkIndent));)if(n===d.src.charCodeAt(g)&&!(d.sCount[w]-d.blkIndent>=4)){for(y=g+1;y<=k&&o[(y-g)%a]===d.src[y];y++);if(!(Math.floor((y-g)/a)<$)&&(y-=(y-g)%a,y=d.skipSpaces(y),!(y<k))){C=!0;break}}const F=d.parentType,E=d.lineMax;return d.parentType="root",d.lineMax=w,b=d.push("admonition_open","div",1),b.markup=p,b.block=!0,b.info=i,b.map=[s,w],u&&(b=d.push("admonition_title_open","p",1),b.markup=p+" "+i,b.map=[s,w],b=d.push("inline","",0),b.content=u,b.map=[s,d.line-1],b.children=[],b=d.push("admonition_title_close","p",-1),b.markup=p+" "+i),d.md.block.tokenize(d,s+1,w),b=d.push("admonition_close","div",-1),b.markup=d.src.slice(g,y),b.block=!0,d.parentType=F,d.lineMax=E,d.line=w+(C?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=c,e.renderer.rules.admonition_title_open=c,e.renderer.rules.admonition_title_close=c,e.renderer.rules.admonition_close=c},ga=(e,l)=>{e.renderer.rules.heading_open=(t,o)=>{var n;const a=t[o],i=((n=t[o+1].children)==null?void 0:n.reduce((c,f)=>c+(["text","code_inline","math_inline"].includes(f.type)&&f.content||""),""))||"",u=a.markup.length;return l.headsRef.value.push({text:i,level:u,line:a.map[0]}),a.map&&a.level===0&&a.attrSet("id",l.mdHeadingId(i,u,l.headsRef.value.length)),e.renderer.renderToken(t,o,l)},e.renderer.rules.heading_close=(t,o,n,a,i)=>i.renderToken(t,o,n)},ha=(e,l)=>{const t=e.renderer.rules.fence,o=e.utils.unescapeAll,n=/\[(\w*)(?::([\w ]*))?\]/,a=/::(open|close)/,i=s=>s.info?o(s.info).trim():"",u=s=>{const v=i(s),[h=null,y=""]=(n.exec(v)||[]).slice(1);return[h,y]},c=s=>{const v=i(s);return v?v.split(/(\s+)/g)[0]:""},f=s=>{const v=s.info.match(a)||[],h=v[1]==="open"||v[1]!=="close"&&l.codeFoldable&&s.content.trim().split(`
`).length<l.autoFoldThreshold,y=v[1]||l.codeFoldable?"details":"div",w=v[1]||l.codeFoldable?"summary":"div";return{open:h,tagContainer:y,tagHeader:w}},d=(s,v,h,y,w)=>{var b;if(s[v].hidden)return"";const C=(b=l.usedLanguageTextRef.value)==null?void 0:b.copyCode.text,g=l.customIconRef.value.copy||C,k=!!l.customIconRef.value.copy,$=`<span class="${r}-collapse-tips">${Oe("collapse-tips",l.customIconRef.value)}</span>`,[p]=u(s[v]);if(p===null){const{open:q,tagContainer:Y,tagHeader:ie}=f(s[v]),oe=[["class",`${r}-code`]];q&&oe.push(["open",""]);const ee={attrs:qe(s[v],oe)};s[v].info=s[v].info.replace(a,"");const U=t(s,v,h,y,w);return`
        <${Y} ${w.renderAttrs(ee)}>
          <${ie} class="${r}-code-head">
            <div class="${r}-code-flag"><span></span><span></span><span></span></div>
            <div class="${r}-code-action">
              <span class="${r}-code-lang">${s[v].info.trim()}</span>
              <span class="${r}-copy-button" data-tips="${C}"${k?" data-is-icon=true":""}>${g}</span>
              ${l.extraTools||""}
              ${Y==="details"?$:""}
            </div>
          </${ie}>
          ${U}
        </${Y}>
      `}let x,F,E,_,I="",L="",H="";const{open:z,tagContainer:V,tagHeader:X}=f(s[v]),K=[["class",`${r}-code`]];z&&K.push(["open",""]);const ae={attrs:qe(s[v],K)};for(let q=v;q<s.length&&(x=s[q],[F,E]=u(x),F===p);q++){x.info=x.info.replace(n,"").replace(a,""),x.hidden=!0;const Y=`${r}-codetab-${l.editorId}-${v}-${q-v}`;_=q-v>0?"":"checked",I+=`
        <li>
          <input
            type="radio"
            id="label-${r}-codetab-label-1-${l.editorId}-${v}-${q-v}"
            name="${r}-codetab-label-${l.editorId}-${v}"
            class="${Y}"
            ${_}
          >
          <label
            for="label-${r}-codetab-label-1-${l.editorId}-${v}-${q-v}"
            onclick="this.getRootNode().querySelectorAll('.${Y}').forEach(e => e.click())"
          >
            ${E||c(x)}
          </label>
        </li>`,L+=`
        <div role="tabpanel">
          <input
            type="radio"
            name="${r}-codetab-pre-${l.editorId}-${v}"
            class="${Y}"
            ${_}
            role="presentation">
          ${t(s,q,h,y,w)}
        </div>`,H+=`
        <input
          type="radio"
          name="${r}-codetab-lang-${l.editorId}-${v}"
          class="${Y}"
          ${_}
          role="presentation">
        <span class=${r}-code-lang role="note">${c(x)}</span>`}return`
      <${V} ${w.renderAttrs(ae)}>
        <${X} class="${r}-code-head">
          <div class="${r}-code-flag">
            <ul class="${r}-codetab-label" role="tablist">${I}</ul>
          </div>
          <div class="${r}-code-action">
            <span class="${r}-codetab-lang">${H}</span>
            <span class="${r}-copy-button" data-tips="${C}"${k?" data-is-icon=true":""}>${g}</span>
            ${l.extraTools||""}
            ${V==="details"?$:""}
          </div>
        </${X}>
        ${L}
      </${V}>
    `};e.renderer.rules.fence=d,e.renderer.rules.code_block=d},Hl=(e,l,t)=>{const o=e.attrIndex(l),n=[l,t];o<0?e.attrPush(n):(e.attrs=e.attrs||[],e.attrs[o]=n)},pa=e=>e.type==="inline",ba=e=>e.type==="paragraph_open",ya=e=>e.type==="list_item_open",ka=e=>e.content.indexOf("[ ] ")===0||e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0,wa=(e,l)=>pa(e[l])&&ba(e[l-1])&&ya(e[l-2])&&ka(e[l]),Ca=(e,l)=>{const t=e[l].level-1;for(let o=l-1;o>=0;o--)if(e[o].level===t)return o;return-1},$a=e=>{const l=new e("html_inline","",0);return l.content="<label>",l},Ta=e=>{const l=new e("html_inline","",0);return l.content="</label>",l},Sa=(e,l,t)=>{const o=new t("html_inline","",0);return o.content='<label class="task-list-item-label" for="'+l+'">'+e+"</label>",o.attrs=[{for:l}],o},xa=(e,l,t)=>{const o=new l("html_inline","",0),n=t.enabled?" ":' disabled="" ';return e.content.indexOf("[ ] ")===0?o.content='<input class="task-list-item-checkbox"'+n+'type="checkbox">':(e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0)&&(o.content='<input class="task-list-item-checkbox" checked=""'+n+'type="checkbox">'),o},Ea=(e,l,t)=>{if(e.children=e.children||[],e.children.unshift(xa(e,l,t)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),t.label)if(t.labelAfter){e.children.pop();const o="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+o+'">',e.children.push(Sa(e.content,o,l))}else e.children.unshift($a(l)),e.children.push(Ta(l))},_a=(e,l={})=>{e.core.ruler.after("inline","github-task-lists",t=>{const o=t.tokens;for(let n=2;n<o.length;n++)wa(o,n)&&(Ea(o[n],t.Token,l),Hl(o[n-2],"class","task-list-item"+(l.enabled?" enabled":" ")),Hl(o[Ca(o,n-2)],"class","contains-task-list"))})},Aa=e=>{e.core.ruler.push("init-line-number",l=>(l.tokens.forEach(t=>{t.map&&(t.attrs||(t.attrs=[]),t.attrs.push(["data-line",t.map[0].toString()]))}),!0))},Ia=(e,l)=>{const{editorConfig:t,markdownItPlugins:o,editorExtensions:n}=G,a=A("editorId"),i=A("language"),u=A("usedLanguageText"),c=A("showCodeRowNumber"),f=A("theme"),d=A("customIcon"),s=A("rootRef"),v=D([]);let h=()=>{};const y=ra(e),w=ca(e),{reRenderRef:b,replaceMermaid:C}=sa(e),g=zo({html:!0,breaks:!0,linkify:!0}),k=[{type:"image",plugin:Uo,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:va,options:{}},{type:"taskList",plugin:_a,options:{}},{type:"heading",plugin:ga,options:{mdHeadingId:e.mdHeadingId,headsRef:v}},{type:"code",plugin:ha,options:{editorId:a,usedLanguageTextRef:u,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,customIconRef:d}},{type:"sub",plugin:qo,options:{}},{type:"sup",plugin:Go,options:{}}];e.noKatex||k.push({type:"katex",plugin:fa,options:{katexRef:w}}),e.noMermaid||k.push({type:"mermaid",plugin:da,options:{themeRef:f}}),o(k,{editorId:a}).forEach(L=>{g.use(L.plugin,L.options)});const $=g.options.highlight;g.set({highlight:(L,H,z)=>{if($){const K=$(L,H,z);if(K)return K}let V;!e.noHighlight&&y.value?y.value.getLanguage(H)?V=y.value.highlight(L,{language:H,ignoreIllegals:!0}).value:V=y.value.highlightAuto(L).value:V=g.utils.escapeHtml(L);const X=c?oa(V.replace(/^\n+|\n+$/g,""),L.replace(/^\n+|\n+$/g,"")):`<span class="${r}-code-block">${V.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${H}" language=${H}>${X}</code></pre>`}}),Aa(g);const p=D(`_article-key_${at()}`),x=D(e.sanitize(g.render(e.modelValue))),F=()=>{S.emit(a,Pe,x.value),e.onHtmlChanged(x.value),e.onGetCatalog(v.value),S.emit(a,_e,v.value),ue(()=>{C().then(()=>{var L,H;(L=n.mermaid)!=null&&L.enableZoom&&(h(),h=Al((H=s.value)==null?void 0:H.querySelectorAll(`#${a} p.${r}-mermaid`),{customIcon:d.value}))})})},E=()=>{v.value=[],x.value=e.sanitize(g.render(e.modelValue)),F()},_=Z(()=>(e.noKatex||w.value)&&(e.noHighlight||y.value));let I=-1;return M([de(e,"modelValue"),_,b,i],()=>{I=window.setTimeout(()=>{E()},l?0:t.renderDelay)}),M(()=>e.setting.preview,()=>{e.setting.preview&&ue(()=>{C().then(()=>{var L,H;(L=n.mermaid)!=null&&L.enableZoom&&(h(),h=Al((H=s.value)==null?void 0:H.querySelectorAll(`#${a} p.${r}-mermaid`),{customIcon:d.value}))}),S.emit(a,_e,v.value)})}),j(F),j(()=>{S.on(a,{name:co,callback(){S.emit(a,_e,v.value)}}),S.on(a,{name:dt,callback:()=>{p.value=`_article-key_${at()}`,E()}})}),pe(()=>{h(),clearTimeout(I)}),{html:x,key:p}},Ml={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},La=(e,l)=>{const t=A("editorId"),o=A("rootRef");let n=()=>{};const a=()=>{if(!o.value)return!1;const i=o.value.querySelectorAll(".task-list-item.enabled"),u=c=>{var f;c.preventDefault();const d=c.target.checked?"unChecked":"checked",s=(f=c.target.parentElement)==null?void 0:f.dataset.line;if(!s)return;const v=Number(s),h=e.modelValue.split(`
`),y=h[Number(v)].replace(Ml[d].regexp,Ml[d].value);e.previewOnly?(h[Number(v)]=y,e.onChange(h.join(`
`))):S.emit(t,mo,v+1,y)};i.forEach(c=>{c.addEventListener("click",u)}),n=()=>{i.forEach(c=>{c.removeEventListener("click",u)})}};pe(()=>{n()}),M([l],()=>{n(),ue(a)},{immediate:!0})},Ha=(e,l,t)=>{const o=()=>{ue(()=>{var a;(a=e.onRemount)==null||a.call(e)})},n=a=>{a&&o()};M([l,t],o),M(()=>e.setting.preview,n),M(()=>e.setting.htmlPreview,n),j(o)},vo={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number},onRemount:{type:Function}},Ma={...vo,updateModelValue:{type:Function,default:()=>{}},placeholder:{type:String,default:""},scrollAuto:{type:Boolean},autofocus:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},maxlength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function,default:()=>{}},onFocus:{type:Function,default:()=>{}},noPrettier:{type:Boolean},completions:{type:Array},catalogVisible:{type:Boolean},theme:{type:String,default:"light"},onInput:{type:Function},onDrop:{type:Function,default:()=>{}},inputBoxWidth:{type:String},oninputBoxWidthChange:{type:Function},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String},catalogMaxDepth:{type:Number}},Ra=e=>{const t=new DOMParser().parseFromString(e,"text/html");return Array.from(t.body.childNodes)},Fa=(e,l)=>{const t=[],o=[];if(e.forEach((n,a)=>{const i=l[a];if(!i){t.push({index:a,newNode:n});return}(n.nodeType!==i.nodeType||n.textContent!==i.textContent||n.nodeType===1&&n.outerHTML!==i.outerHTML)&&t.push({index:a,newNode:n})}),l.length>e.length)for(let n=e.length;n<l.length;n++)o.push(l[n]);return{updates:t,deletes:o}},Na=B({name:"UpdateOnDemand",props:{html:{type:String,required:!0}},setup(e){const l=A("editorId"),t=A("previewTheme"),o=A("showCodeRowNumber"),n=D(),a=e.html,i=(u,c)=>{n.value&&(c.forEach(f=>{f.remove()}),u.forEach(({index:f,newNode:d})=>{var s,v,h;const y=(s=n.value)==null?void 0:s.childNodes[f];y?(h=n.value)==null||h.replaceChild(d.cloneNode(!0),y):(v=n.value)==null||v.appendChild(d.cloneNode(!0))}))};return M(()=>e.html,u=>{var c;const f=Ra(u),d=Array.from(((c=n.value)==null?void 0:c.childNodes)||[]),{updates:s,deletes:v}=Fa(f,d);i(s,v)}),()=>m("div",{id:`${l}-preview`,class:[`${r}-preview`,`${t==null?void 0:t.value}-theme`,o&&`${r}-scrn`],innerHTML:a,ref:n},null)}}),go=B({name:"ContentPreview",props:vo,setup(e){const l=A("editorId"),{html:t,key:o}=Ia(e,e.previewOnly);return ia(e,t,o),aa(e,t),La(e,t),Ha(e,t,o),()=>m(Le,null,[e.setting.preview&&m("div",{id:`${l}-preview-wrapper`,class:`${r}-preview-wrapper`,key:"content-preview-wrapper"},[m(Na,{key:o.value,html:t.value},null)]),!e.previewOnly&&e.setting.htmlPreview&&m("div",{id:`${l}-html-wrapper`,class:`${r}-preview-wrapper`,key:"html-preview-wrapper"},[m("div",{class:`${r}-html`},[t.value])])])}}),Da=(e,l,t)=>{const{editorId:o}=t,n=te({buildFinished:!1,html:""});M(()=>e.modelValue,()=>{n.buildFinished=!1}),j(()=>{S.on(o,{name:Pe,callback(a){n.buildFinished=!0,n.html=a}}),S.on(o,{name:Xe,callback(){const a=new Promise(i=>{if(n.buildFinished)i(n.html);else{const u=c=>{i(c),S.remove(o,Pe,u)};S.on(o,{name:Pe,callback:u})}});e.onSave?e.onSave(e.modelValue,a):l.emit("onSave",e.modelValue,a)}})})},ho=(e,l)=>{const t=G.editorExtensions.highlight,o=G.editorExtensionsAttrs.highlight,n=za(e);ne("editorId",n),ne("rootRef",l),ne("theme",Z(()=>e.theme)),ne("language",Z(()=>e.language)),ne("highlight",Z(()=>{const{js:i}=t,u={...it,...t.css},{js:c,css:f={}}=o||{},d=e.codeStyleReverse&&e.codeStyleReverseList.includes(e.previewTheme)?"dark":e.theme,s=u[e.codeTheme]?u[e.codeTheme][d]:it.atom[d],v=u[e.codeTheme]&&f[e.codeTheme]?f[e.codeTheme][d]:f.atom?f.atom[d]:{};return{js:{src:i,...c},css:{href:s,...v}}})),ne("showCodeRowNumber",e.showCodeRowNumber);const a=Z(()=>{const i={...wl,...G.editorConfig.languageUserDefined};return Ro(Fo(wl["en-US"]),i[e.language]||{})});return ne("usedLanguageText",a),ne("previewTheme",Z(()=>e.previewTheme)),ne("customIcon",Z(()=>e.customIcon)),{editorId:n}},Pa=(e,l)=>(ne("tabWidth",e.tabWidth),ne("disabled",Z(()=>e.disabled)),ho(e,l)),Oa=e=>{const{noPrettier:l,noUploadImg:t}=e,{editorExtensions:o,editorExtensionsAttrs:n}=G,a=l||o.prettier.prettierInstance,i=l||o.prettier.parserMarkdownInstance,u=t||o.cropper.instance;j(()=>{if(!u){const{js:c={},css:f={}}=n.cropper||{};se("link",{...f,rel:"stylesheet",href:o.cropper.css,id:ce.croppercss}),se("script",{...c,src:o.cropper.js,id:ce.cropperjs})}if(!a){const{standaloneJs:c={}}=n.prettier||{};se("script",{...c,src:o.prettier.standaloneJs,id:ce.prettier})}if(!i){const{parserMarkdownJs:c={}}=n.prettier||{};se("script",{...c,src:o.prettier.parserMarkdownJs,id:ce.prettierMD})}})},Ba=(e,l,t)=>{const{editorId:o}=t;j(()=>{S.on(o,{name:ge,callback:n=>{var a;(a=e.onError)==null||a.call(e,n),l.emit("onError",n)}})})},Va=(e,l,t)=>{const{editorId:o}=t,n=te({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:e.preview?!1:e.htmlPreview,previewOnly:!1}),a=te({...n}),i=(f,d)=>{const s=d===void 0?!n[f]:d;switch(f){case"preview":{n.htmlPreview=!1,n.previewOnly=!1;break}case"htmlPreview":{n.preview=!1,n.previewOnly=!1;break}case"previewOnly":{s?!n.preview&&!n.htmlPreview&&(n.preview=!0):(a.preview||(n.preview=!1),a.htmlPreview||(n.htmlPreview=!1));break}}a[f]=s,n[f]=s};let u="";const c=()=>{n.pageFullscreen||n.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=u};return M(()=>[n.pageFullscreen,n.fullscreen],c),j(()=>{S.on(o,{name:Ke,callback(f,d){const s=v=>{S.emit(o,P,"image",{desc:"",urls:v}),d==null||d()};e.onUploadImg?e.onUploadImg(f,s):l.emit("onUploadImg",f,s)}}),u=document.body.style.overflow,c()}),[n,i]},ja=(e,l)=>{const{editorId:t}=l,o=D(!1);return j(()=>{S.on(t,{name:ct,callback:n=>{n===void 0?o.value=!o.value:o.value=n}})}),o},Wa=(e,l,t)=>{const{editorId:o,catalogVisible:n,setting:a,updateSetting:i,codeRef:u}=t;M(()=>a.pageFullscreen,f=>{S.emit(o,Cl,f)}),M(()=>a.fullscreen,f=>{S.emit(o,$l,f)}),M(()=>a.preview,f=>{S.emit(o,Tl,f)}),M(()=>a.previewOnly,f=>{S.emit(o,Sl,f)}),M(()=>a.htmlPreview,f=>{S.emit(o,xl,f)}),M(n,f=>{S.emit(o,El,f)});const c={on(f,d){switch(f){case"pageFullscreen":{S.on(o,{name:Cl,callback(s){d(s)}});break}case"fullscreen":{S.on(o,{name:$l,callback(s){d(s)}});break}case"preview":{S.on(o,{name:Tl,callback(s){d(s)}});break}case"previewOnly":{S.on(o,{name:Sl,callback(s){d(s)}});break}case"htmlPreview":{S.on(o,{name:xl,callback(s){d(s)}});break}case"catalog":{S.on(o,{name:El,callback(s){d(s)}});break}}},togglePageFullscreen(f){i("pageFullscreen",f)},toggleFullscreen(f){S.emit(o,io,f)},togglePreview(f){i("preview",f)},togglePreviewOnly(f){i("previewOnly",f)},toggleHtmlPreview(f){i("htmlPreview",f)},toggleCatalog(f){S.emit(o,ct,f)},triggerSave(){S.emit(o,Xe)},insert(f){S.emit(o,P,"universal",{generate:f})},focus(f){var d;(d=u.value)==null||d.focus(f)},rerender(){S.emit(o,dt)},getSelectedText(){var f;return(f=u.value)==null?void 0:f.getSelectedText()},resetHistory(){var f;(f=u.value)==null||f.resetHistory()},domEventHandlers(f){S.emit(o,uo,f)},execCommand(f){S.emit(o,P,f)},getEditorView(){var f;return(f=u.value)==null?void 0:f.getEditorView()}};l.expose(c)},za=e=>{const l=Oo();return e.id||e.editorId||`${r}-${l}`},Ua=e=>e,po={modelValue:{type:String,default:""},onChange:{type:Function,default:void 0},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function,default:void 0},onGetCatalog:{type:Function,default:void 0},editorId:{type:String,default:void 0},id:{type:String,default:void 0},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:Ua},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:e=>Promise.resolve(e)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30},onRemount:{type:Function,default:void 0}},qa={...po,onSave:{type:Function,default:void 0},onUploadImg:{type:Function,default:void 0},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:no},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array,default:[6,4]},placeholder:{type:String,default:""},defToolbars:{type:[String,Object],default:void 0},onError:{type:Function,default:void 0},footers:{type:Array,default:ao},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object],default:void 0},noUploadImg:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},maxLength:{type:Number,default:void 0},autoDetectCode:{type:Boolean,default:!1},onBlur:{type:Function,default:void 0},onFocus:{type:Function,default:void 0},completions:{type:Array,default:void 0},showToolbarName:{type:Boolean,default:!1},onInput:{type:Function,default:void 0},onDrop:{type:Function,default:void 0},inputBoxWidth:{type:String,default:"50%"},oninputBoxWidthChange:{type:Function,default:void 0},transformImgUrl:{type:Function,default:e=>e},catalogLayout:{type:String,default:"fixed"},catalogMaxDepth:{type:Number,default:void 0},insertLinkDirect:{type:Boolean,default:!1}},bo=["onHtmlChanged","onGetCatalog","onChange","onRemount","update:modelValue"],Ga=[...bo,"onSave","onUploadImg","onError","onBlur","onFocus","onInput","onDrop","oninputBoxWidthChange"],Xa=(e,l,t)=>{const{editorId:o}=t,n={rerender(){S.emit(o,dt)}};l.expose(n)},Ve=B({name:"MdPreview",props:po,emits:bo,setup(e,l){const{noKatex:t,noMermaid:o,noHighlight:n}=e,a=D(),{editorId:i}=ho(e,a);return Xa(e,l,{editorId:i}),pe(()=>{S.clear(i)}),()=>m("div",{id:i,class:[r,e.class,e.theme==="dark"&&`${r}-dark`,`${r}-previewOnly`],style:e.style,ref:a},[m(go,{modelValue:e.modelValue,onChange:u=>{var c;(c=e.onChange)==null||c.call(e,u),l.emit("onChange",u),l.emit("update:modelValue",u)},onHtmlChanged:u=>{var c;(c=e.onHtmlChanged)==null||c.call(e,u),l.emit("onHtmlChanged",u)},onGetCatalog:u=>{var c;(c=e.onGetCatalog)==null||c.call(e,u),l.emit("onGetCatalog",u)},mdHeadingId:e.mdHeadingId,noMermaid:o,sanitize:e.sanitize,noKatex:t,formatCopiedText:e.formatCopiedText,noHighlight:n,noImgZoomIn:e.noImgZoomIn,previewOnly:!0,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{var u;(u=e.onRemount)==null||u.call(e),l.emit("onRemount")}},null)])}});Ve.install=e=>(e.component(Ve.name,Ve),e);const Ka=()=>m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"lucide lucide-github-icon"},[m("path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"},null),m("path",{d:"M9 18c-4.51 2-5-2-7-2"},null)]),Ya={bold:xn,underline:Sn,italic:Tn,"strike-through":$n,title:Cn,sub:wn,sup:kn,quote:yn,"unordered-list":bn,"ordered-list":pn,task:hn,"code-row":gn,code:bl,link:vn,image:fn,table:mn,revoke:un,next:dn,save:cn,prettier:bl,minimize:sn,maximize:rn,"fullscreen-exit":an,fullscreen:nn,"preview-only":on,preview:ln,"preview-html":tn,catalog:en,github:Ka,mermaid:Qo,formula:Jo,close:Zo,delete:Yo,upload:Ko},Za=B({name:`${r}-icon-set`,props:{name:{type:String,default:""}},setup(e){return()=>to(Ya[e.name],{class:`${r}-icon`})}}),N=B({name:`${r}-icon`,props:{name:{type:String,default:""}},setup(e){const l=A("customIcon");return()=>{const t=l.value[e.name];return typeof t=="object"?typeof t.component=="object"?to(t.component,t.props):m("span",{innerHTML:t.component},null):m(Za,{name:e.name},null)}}}),Ja={title:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String,default:void 0},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},Te=B({name:"MdModal",props:Ja,emits:["onClose"],setup(e,l){const t=A("theme"),o=A("rootRef"),n=D(e.visible),a=D([`${r}-modal`]),i=D(),u=D(),c=D(),f=he();let d=()=>{};const s=te({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),v=Z(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});M(()=>e.isFullscreen,w=>{w?d():ue(()=>{d=_l(u.value,(b,C)=>{s.initPos.left=b+"px",s.initPos.top=C+"px"})})}),M(()=>e.visible,w=>{w?(s.maskStyle.zIndex=G.editorConfig.zIndex+Il(),s.modalStyle.zIndex=G.editorConfig.zIndex+Il(),a.value.push("zoom-in"),n.value=w,ue(()=>{const b=i.value.offsetWidth/2,C=i.value.offsetHeight/2,g=document.documentElement.clientWidth/2,k=document.documentElement.clientHeight/2;s.initPos.left=g-b+"px",s.initPos.top=k-C+"px",e.isFullscreen||(d=_l(u.value,($,p)=>{s.initPos.left=$+"px",s.initPos.top=p+"px"}))}),setTimeout(()=>{a.value=a.value.filter(b=>b!=="zoom-in")},140)):(a.value.push("zoom-out"),d(),setTimeout(()=>{a.value=a.value.filter(b=>b!=="zoom-out"),n.value=w},130))});const h=Z(()=>({display:n.value?"block":"none"})),y=Z(()=>typeof e.style=="string"?[e.style,h.value].join("; "):e.style instanceof Object?{...h.value,...e.style}:h.value);return j(()=>{var w;const b=(w=o.value)==null?void 0:w.getRootNode();c.value=b instanceof Document?document.body:b}),()=>{const w=le({ctx:l}),b=le({props:e,ctx:l},"title");return c.value?m(Bo,{to:c.value},{default:()=>[m("div",{ref:f,class:`${r}-modal-container`,"data-theme":t.value},[m("div",{class:e.class,style:y.value},[e.showMask&&m("div",{class:`${r}-modal-mask`,style:s.maskStyle,onClick:()=>{var C;(C=e.onClose)==null||C.call(e),l.emit("onClose")}},null),m("div",{class:a.value,style:{...s.modalStyle,...s.initPos,...v.value},ref:i},[m("div",{class:`${r}-modal-header`,ref:u},[b||""]),m("div",{class:`${r}-modal-body`},[w]),m("div",{class:`${r}-modal-func`},[e.showAdjust&&m("div",{class:`${r}-modal-adjust`,onClick:C=>{C.stopPropagation(),e.isFullscreen?s.initPos=s.historyPos:(s.historyPos=s.initPos,s.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[m(N,{name:e.isFullscreen?"minimize":"maximize"},null)]),m("div",{class:`${r}-modal-close`,onClick:C=>{var g;C.stopPropagation(),(g=e.onClose)==null||g.call(e),l.emit("onClose")}},[m(N,{name:"close"},null)])])])])])]}):""}}});Te.install=e=>(e.component(Te.name,Te),e);const Qa=`.${r}-preview > [data-line]`,Ce=(e,l)=>+getComputedStyle(e).getPropertyValue(l).replace("px",""),ei=(e,l)=>{const t=Ql(()=>{e.removeEventListener("scroll",o),e.addEventListener("scroll",o),l.removeEventListener("scroll",o),l.addEventListener("scroll",o)},50),o=n=>{const a=e.clientHeight,i=l.clientHeight,u=e.scrollHeight,c=l.scrollHeight,f=(u-a)/(c-i);n.target===e?(l.removeEventListener("scroll",o),l.scrollTo({top:e.scrollTop/f}),t()):(e.removeEventListener("scroll",o),e.scrollTo({top:l.scrollTop*f}),t())};return[()=>{t().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",o),l.removeEventListener("scroll",o)}]},ti=(e,l,t)=>{const{view:o}=t,n=eo(),a=C=>o.lineBlockAt(o.state.doc.line(C+1).from).top,i=C=>o.lineBlockAt(o.state.doc.line(C+1).from).bottom;let u=[],c=[],f=[];const d=()=>{u=[],c=Array.from(l.querySelectorAll(Qa)),f=c.map(p=>Number(p.dataset.line));const C=[...f],{lines:g}=o.state.doc;let k=C.shift()||0,$=C.shift()||g;for(let p=0;p<g;p++)p===$&&(k=p,$=C.shift()||g),u.push({start:k,end:$-1})},s=(C,g)=>{let k=1;for(let $=c.length-1;$-1>=0;$--){const p=c[$],x=c[$-1];if(p.offsetTop+p.offsetHeight>g&&x.offsetTop<g){k=Number(x.dataset.line);break}}for(let $=u.length-1;$>=0;$--){const p=i(u[$].end),x=a(u[$].start);if(p>C&&x<=C){k=k<u[$].start?k:u[$].start;break}}return k};let v=0,h=0;const y=()=>{var C,g,k;if(h!==0)return!1;v++;const{scrollDOM:$,contentHeight:p}=o;let x=Ce(l,"padding-top");const F=o.lineBlockAtHeight($.scrollTop),{number:E}=o.state.doc.lineAt(F.from),_=u[E-1];if(!_)return!1;let I=1;const L=l.querySelector(`[data-line="${_.start}"]`)||((C=l.firstElementChild)==null?void 0:C.firstElementChild),H=l.querySelector(`[data-line="${_.end+1}"]`)||((g=l.lastElementChild)==null?void 0:g.lastElementChild),z=$.scrollHeight-$.clientHeight,V=l.scrollHeight-l.clientHeight;let X=a(_.start),K=i(_.end),ae=L.offsetTop,q=H.offsetTop-ae;X===0&&(ae=0,L===H?(x=0,K=p-$.offsetHeight,q=V):q=H.offsetTop),I=($.scrollTop-X)/(K-X);const Y=H==((k=l.lastElementChild)==null?void 0:k.lastElementChild)?H.offsetTop+H.clientHeight:H.offsetTop;if(K>=z||Y>V){const oe=s(z,V);X=a(oe),I=($.scrollTop-X)/(z-X);const ee=l.querySelector(`[data-line="${oe}"]`);X>0&&ee&&(ae=ee.offsetTop),q=V-ae+Ce(l,"padding-top")}const ie=ae-x+q*I;n(l,ie,()=>{v--})},w=()=>{var C,g,k,$,p,x;if(v!==0)return;h++;const{scrollDOM:F}=o,E=l.scrollTop,_=l.scrollHeight,I=F.scrollHeight-F.clientHeight,L=l.scrollHeight-l.clientHeight;let H=(C=l.firstElementChild)==null?void 0:C.firstElementChild,z=(g=l.firstElementChild)==null?void 0:g.lastElementChild;if(f.length>0){let ee=Math.ceil(f[f.length-1]*(E/_)),U=f.findLastIndex(J=>J<=ee);U=U===-1?0:U,ee=f[U];for(let J=U;J>=0&&J<f.length;)if(c[J].offsetTop>E){if(J-1>=0){J--;continue}ee=-1,U=J;break}else{if(J+1<f.length&&c[J+1].offsetTop<E){J++;continue}ee=f[J],U=J;break}switch(U){case-1:{H=(k=l.firstElementChild)==null?void 0:k.firstElementChild,z=c[U];break}case f.length-1:{H=c[U],z=($=l.firstElementChild)==null?void 0:$.lastElementChild;break}default:H=c[U],z=c[U+1===c.length?U:U+1]}}let V=H===((p=l.firstElementChild)==null?void 0:p.firstElementChild)?0:H.offsetTop-Ce(H,"margin-top"),X=z.offsetTop,K=0;const{start:ae,end:q}=u[Number(H.dataset.line||0)];let Y=a(ae);const ie=a(q+1===o.state.doc.lines?q:q+1);let oe=0;if(ie>I||z.offsetTop+z.offsetHeight>L){const ee=s(I,L),U=l.querySelector(`[data-line="${ee}"]`);V=U?U.offsetTop-Ce(U,"margin-top"):V,Y=a(ee),K=(E-V)/(L-V),oe=I-Y}else H===((x=l.firstElementChild)==null?void 0:x.firstElementChild)?(H===z&&(X=z.offsetTop+z.offsetHeight+ +getComputedStyle(z).marginBottom.replace("px","")),oe=ie,K=Math.max(E/X,0)):(K=Math.max((E-V)/(X-V),0),oe=ie-Y);n(e,Y+oe*K,()=>{h--})},b=C=>{var g;const{scrollDOM:k,contentHeight:$}=o,p=k.clientHeight;if($<=p||l.firstElementChild.clientHeight<=l.clientHeight||o.state.doc.lines<=((g=u[u.length-1])==null?void 0:g.end))return!1;C.target===e?y():w()};return[()=>{d(),e.addEventListener("scroll",b),l.addEventListener("scroll",b),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",b),l.removeEventListener("scroll",b)}]},li={tocItem:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:()=>{}},onActive:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},scrollElementOffsetTop:{type:Number,default:0}},yo=B({props:li,setup(e){const l=A("scrollElementRef"),t=A("roorNodeRef"),o=D();return M(()=>e.tocItem.active,n=>{n&&e.onActive(e.tocItem,o.value)}),j(()=>{e.tocItem.active&&e.onActive(e.tocItem,o.value)}),()=>{const{tocItem:n,mdHeadingId:a,onClick:i,scrollElementOffsetTop:u}=e;return m("div",{ref:o,class:[`${r}-catalog-link`,n.active&&`${r}-catalog-active`],onClick:c=>{if(c.stopPropagation(),i(c,n),c.defaultPrevented)return;const f=a(n.text,n.level,n.index),d=t.value.getElementById(f),s=l.value;if(d&&s){let v=d.offsetParent,h=d.offsetTop;if(s.contains(v))for(;v&&s!=v;)h+=v==null?void 0:v.offsetTop,v=v==null?void 0:v.offsetParent;const y=d.previousElementSibling;let w=0;y||(w=Ce(d,"margin-top")),s==null||s.scrollTo({top:h-u-w,behavior:"smooth"})}}},[m("span",{title:n.text},[n.text]),n.children&&n.children.length>0&&m("div",{class:`${r}-catalog-wrapper`},[n.children.map(c=>m(yo,{mdHeadingId:a,key:`${n.text}-link-${c.level}-${c.text}`,tocItem:c,onActive:e.onActive,onClick:i,scrollElementOffsetTop:u},null))])])}}}),oi={editorId:{type:String,default:void 0},class:{type:String,default:""},mdHeadingId:{type:Function,default:e=>e},scrollElement:{type:[String,Object],default:void 0},theme:{type:String,default:"light"},offsetTop:{type:Number,default:20},scrollElementOffsetTop:{type:Number,default:0},onClick:{type:Function,default:void 0},onActive:{type:Function,default:void 0},isScrollElementInShadow:{type:Boolean,default:!1},syncWith:{type:String,default:"preview"},catalogMaxDepth:{type:Number,default:void 0}},Ae=B({name:"MdCatalog",props:oi,emits:["onClick","onActive"],setup(e,l){const t=e.editorId,o=`#${t}-preview-wrapper`,n=te({list:[],show:!1,scrollElement:e.scrollElement||o}),a=he(),i=D(),u=D(),c=D(),f=D(),d=he(),s=D({});ne("scrollElementRef",u),ne("roorNodeRef",f);const v=Z(()=>{const k=[];return n.list.forEach(($,p)=>{if(e.catalogMaxDepth&&$.level>e.catalogMaxDepth)return;const{text:x,level:F,line:E}=$,_={level:F,text:x,line:E,index:p+1,active:a.value===$};if(k.length===0)k.push(_);else{let I=k[k.length-1];if(_.level>I.level)for(let L=I.level+1;L<=6;L++){const{children:H}=I;if(!H){I.children=[_];break}if(I=H[H.length-1],_.level<=I.level){H.push(_);break}}else k.push(_)}}),k}),h=()=>{var k;if(n.scrollElement instanceof HTMLElement)return n.scrollElement;let $=document;return(n.scrollElement===o||e.isScrollElementInShadow)&&($=(k=i.value)==null?void 0:k.getRootNode()),$.querySelector(n.scrollElement)},y=k=>{if(k.length===0)return a.value=void 0,n.list=[],!1;const{activeHead:$}=k.reduce((p,x,F)=>{var E;let _=0;if(e.syncWith==="preview"){const I=(E=f.value)==null?void 0:E.getElementById(e.mdHeadingId(x.text,x.level,F+1));I instanceof HTMLElement&&(_=na(I,u.value))}else{const I=d.value;if(I){const L=I.lineBlockAt(I.state.doc.line(x.line+1).from).top,H=I.scrollDOM.scrollTop;_=L-H}}return _<e.offsetTop&&_>p.minTop?{activeHead:x,minTop:_}:p},{activeHead:k[0],minTop:Number.MIN_SAFE_INTEGER});a.value=$,n.list=k},w=(k,$)=>{var p;s.value.top=$.offsetTop+Ce($,"padding-top")+"px",(p=e.onActive)==null||p.call(e,k,$),l.emit("onActive",k,$)},b=()=>{y(n.list)},C=k=>{var $,p,x;if(($=c.value)==null||$.removeEventListener("scroll",b),e.syncWith==="editor")c.value=(p=d.value)==null?void 0:p.scrollDOM;else{const F=h();u.value=F,c.value=F===document.documentElement?document:F}y(k),(x=c.value)==null||x.addEventListener("scroll",b)},g=k=>{d.value=k};return M([()=>e.syncWith,d,()=>e.catalogMaxDepth],()=>{C(n.list)}),j(()=>{f.value=i.value.getRootNode(),S.on(t,{name:_e,callback:C}),S.on(t,{name:Ue,callback:g}),S.emit(t,co),S.emit(t,fo)}),pe(()=>{var k;S.remove(t,_e,C),S.remove(t,Ue,g),(k=c.value)==null||k.removeEventListener("scroll",b)}),()=>m("div",{class:[`${r}-catalog`,e.theme==="dark"&&`${r}-catalog-dark`,e.class||""],ref:i},[v.value.length>0&&m(Le,null,[m("div",{class:`${r}-catalog-indicator`,style:s.value},null),m("div",{class:`${r}-catalog-container`},[v.value.map(k=>m(yo,{mdHeadingId:e.mdHeadingId,tocItem:k,key:`link-${k.level}-${k.text}`,onActive:w,onClick:($,p)=>{var x;(x=e.onClick)==null||x.call(e,$,p),l.emit("onClick",$,p)},scrollElementOffsetTop:e.scrollElementOffsetTop},null))])])])}});Ae.install=e=>(e.component(Ae.name,Ae),e);const ni={title:{type:String,default:""},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},je=B({name:"NormalToolbar",props:ni,emits:["onClick"],setup(e,l){return()=>{const t=le({props:e,ctx:l},"trigger"),o=le({props:e,ctx:l});return m("div",{class:[`${r}-toolbar-item`,e.disabled&&`${r}-disabled`],title:e.title,onClick:n=>{var a;e.disabled||((a=e.onClick)==null||a.call(e,n),l.emit("onClick",n))}},[o||t])}}});je.install=e=>(e.component(je.name,je),e);function ai(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Vo(e)}const ii={title:{type:String,default:""},modalTitle:{type:[String,Object],default:""},visible:{type:Boolean,default:void 0},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object],default:void 0},onClick:{type:Function,default:void 0},onClose:{type:Function,default:void 0},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:void 0},class:{type:String,default:void 0},style:{type:[Object,String],default:void 0},showMask:{type:Boolean,default:!0},insert:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},previewTheme:{type:String,default:void 0},codeTheme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0},showToolbarName:{type:Boolean,default:void 0}},We=B({name:"ModalToolbar",props:ii,emits:["onClick","onClose","onAdjust"],setup(e,l){return()=>{const t=le({props:e,ctx:l},"trigger"),o=le({props:e,ctx:l},"modalTitle"),n=le({props:e,ctx:l});return m(Le,null,[m("div",{class:[`${r}-toolbar-item`,e.disabled&&`${r}-disabled`],title:e.title,onClick:()=>{var a;e.disabled||((a=e.onClick)==null||a.call(e),l.emit("onClick"))}},[t]),m(Te,{style:e.style,class:e.class,width:e.width,height:e.height,title:o,visible:e.visible,showMask:e.showMask,onClose:()=>{var a;(a=e.onClose)==null||a.call(e),l.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:a=>{var i;(i=e.onAdjust)==null||i.call(e,a),l.emit("onAdjust",a)}},ai(n)?n:{default:()=>[n]})])}}});We.install=e=>(e.component(We.name,We),e);var ri=Object.defineProperty,si=(e,l,t)=>l in e?ri(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,fe=(e,l,t)=>si(e,typeof l!="symbol"?l+"":l,t);const ci=B({name:`${r}-divider`,setup(){return()=>m("div",{class:`${r}-divider`},null)}}),di={noPrettier:{type:Boolean},toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>{}},tableShape:{type:Array,default:()=>[6,4]},defToolbars:{type:Object},noUploadImg:{type:Boolean},showToolbarName:{type:Boolean},catalogVisible:{type:Boolean},codeTheme:{type:String},insertLinkDirect:{type:Boolean}},ui=e=>{const l=A("editorId"),{editorExtensions:t,editorExtensionsAttrs:o}=G;let n=t.screenfull.instance;const a=D(!1),i=f=>{if(!n){S.emit(l,ge,{name:"fullscreen",message:"fullscreen is undefined"});return}n.isEnabled&&(a.value=!0,(f===void 0?!n.isFullscreen:f)?n.request():n.exit())},u=()=>{n&&n.isEnabled&&n.on("change",()=>{(a.value||e.setting.fullscreen)&&(a.value=!1,e.updateSetting("fullscreen"))})},c=()=>{n=window.screenfull,u()};return j(()=>{var f;u(),n||se("script",{...(f=o.screenfull)==null?void 0:f.js,src:t.screenfull.js,id:ce.screenfull,onload:c},"screenfull")}),j(()=>{S.on(l,{name:io,callback:i})}),{fullscreenHandler:i}},mi={tableShape:{type:Array,default:()=>[6,4]},onSelected:{type:Function,default:()=>{}}},fi=B({name:"TableShape",props:mi,setup(e){const l=te({x:-1,y:-1}),t=Z(()=>JSON.stringify(e.tableShape)),o=()=>{const a=[...JSON.parse(t.value)];return(!a[2]||a[2]<a[0])&&(a[2]=a[0]),(!a[3]||a[3]<a[3])&&(a[3]=a[1]),a},n=D(o());return M([t],()=>{n.value=o()}),()=>m("div",{class:`${r}-table-shape`,onMouseleave:()=>{n.value=o(),l.x=-1,l.y=-1}},[new Array(n.value[1]).fill("").map((a,i)=>m("div",{class:`${r}-table-shape-row`,key:`table-shape-row-${i}`},[new Array(n.value[0]).fill("").map((u,c)=>m("div",{class:`${r}-table-shape-col`,key:`table-shape-col-${c}`,onMouseenter:()=>{l.x=i,l.y=c,c+1===n.value[0]&&c+1<n.value[2]?n.value[0]++:c+2<n.value[0]&&n.value[0]>e.tableShape[0]&&n.value[0]--,i+1===n.value[1]&&i+1<n.value[3]?n.value[1]++:i+2<n.value[1]&&n.value[1]>e.tableShape[1]&&n.value[1]--},onClick:()=>{e.onSelected(l)}},[m("div",{class:[`${r}-table-shape-col-default`,i<=l.x&&c<=l.y&&`${r}-table-shape-col-include`]},null)]))]))])}}),vi={type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},gi=B({name:`${r}-modal-link`,props:vi,setup(e){const l=A("usedLanguageText"),t=A("editorId"),o=Z(()=>{var a,i;switch(e.type){case"link":return(a=l.value.linkModalTips)==null?void 0:a.linkTitle;case"image":return(i=l.value.linkModalTips)==null?void 0:i.imageTitle;default:return""}}),n=te({desc:"",url:""});return M(()=>e.visible,a=>{a||setTimeout(()=>{n.desc="",n.url=""},200)}),()=>m(Te,{title:o.value,visible:e.visible,onClose:e.onCancel},{default:()=>{var a,i,u,c,f;return[m("div",{class:`${r}-form-item`},[m("label",{class:`${r}-label`,for:`link-desc-${t}`},[(a=l.value.linkModalTips)==null?void 0:a.descLabel]),m("input",{placeholder:(i=l.value.linkModalTips)==null?void 0:i.descLabelPlaceHolder,class:`${r}-input`,id:`link-desc-${t}`,type:"text",value:n.desc,onChange:d=>{n.desc=d.target.value},autocomplete:"off"},null)]),m("div",{class:`${r}-form-item`},[m("label",{class:`${r}-label`,for:`link-url-${t}`},[(u=l.value.linkModalTips)==null?void 0:u.urlLabel]),m("input",{placeholder:(c=l.value.linkModalTips)==null?void 0:c.urlLabelPlaceHolder,class:`${r}-input`,id:`link-url-${t}`,type:"text",value:n.url,onChange:d=>{n.url=d.target.value},autocomplete:"off"},null)]),m("div",{class:`${r}-form-item`},[m("button",{class:[`${r}-btn`,`${r}-btn-row`],type:"button",onClick:()=>{e.onOk(n),n.desc="",n.url=""}},[(f=l.value.linkModalTips)==null?void 0:f.buttonOK])])]}})}}),hi={visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},pi=B({name:`${r}-modal-clip`,props:hi,setup(e){const l=A("usedLanguageText"),t=A("editorId"),o=A("rootRef");let n=G.editorExtensions.cropper.instance;const a=D(),i=D(),u=D(),c=te({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let f=null;M(()=>e.visible,()=>{e.visible&&!c.cropperInited&&(n=n||window.Cropper,a.value.onchange=()=>{if(!n){S.emit(t,ge,{name:"Cropper",message:"Cropper is undefined"});return}const s=a.value.files||[];if(c.imgSelected=!0,(s==null?void 0:s.length)>0){const v=new FileReader;v.onload=h=>{c.imgSrc=h.target.result},v.readAsDataURL(s[0])}})}),M(()=>[c.imgSelected],()=>{u.value.style=""}),M([de(()=>c.isFullscreen),de(()=>c.imgSrc)],()=>{c.imgSrc&&ue(()=>{f==null||f.destroy(),u.value.style="",i.value&&(f=new n(i.value,{viewMode:2,preview:o.value.getRootNode().querySelector(`.${r}-clip-preview-target`)}))})});const d=()=>{f.clear(),f.destroy(),f=null,a.value.value="",c.imgSelected=!1};return()=>{var s;return m(Te,{class:`${r}-modal-clip`,title:(s=l.value.clipModalTips)==null?void 0:s.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:c.isFullscreen,onAdjust:v=>{c.isFullscreen=v},width:"668px",height:"421px"},{default:()=>{var v,h,y;return[m("div",{class:`${r}-form-item ${r}-clip`},[m("div",{class:`${r}-clip-main`},[c.imgSelected?m("div",{class:`${r}-clip-cropper`},[m("img",{src:c.imgSrc,ref:i,style:{display:"none"},alt:""},null),m("div",{class:`${r}-clip-delete`,onClick:d},[m(N,{name:"delete"},null)])]):m("div",{class:`${r}-clip-upload`,onClick:()=>{a.value.click()},role:"button",tabindex:"0","aria-label":(v=l.value.imgTitleItem)==null?void 0:v.upload},[m(N,{name:"upload"},null)])]),m("div",{class:`${r}-clip-preview`},[m("div",{class:`${r}-clip-preview-target`,ref:u},null)])]),m("div",{class:`${r}-form-item`},[m("button",{class:`${r}-btn`,type:"button",onClick:()=>{if(f){const w=f.getCroppedCanvas();S.emit(t,Ke,[la(w.toDataURL("image/png"))],e.onOk),d()}}},[((h=l.value.clipModalTips)==null?void 0:h.buttonUpload)||((y=l.value.linkModalTips)==null?void 0:y.buttonOK)])]),m("input",{ref:a,accept:"image/*",type:"file",multiple:!1,style:{display:"none"},"aria-hidden":"true"},null)]}})}}}),bi={type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},yi=B({name:`${r}-modals`,props:bi,setup(e){return()=>m(Le,null,[m(gi,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel},null),m(pi,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel},null)])}}),ki=B({name:"MDEditorToolbar",props:di,setup(e){const l=A("editorId"),t=A("usedLanguageText"),o=A("theme"),n=A("previewTheme"),a=A("language"),i=A("disabled"),{fullscreenHandler:u}=ui(e),c=`${l}-toolbar-wrapper`,f=D(),d=te({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),s=(g,k)=>{if(i!=null&&i.value)return!1;S.emit(l,P,g,k)},v=te({type:"link",linkVisible:!1,clipVisible:!1}),h=D();j(()=>{S.on(l,{name:rt,callback(g){v.type=g,v.linkVisible=!0}})});const y=Z(()=>{const g=e.toolbars.filter(x=>!e.toolbarsExclude.includes(x)),k=g.indexOf("="),$=k===-1?g:g.slice(0,k+1),p=k===-1?[]:g.slice(k,Number.MAX_SAFE_INTEGER);return[$,p]}),w=D(),b=()=>{S.emit(l,Ke,Array.from(w.value.files||[])),w.value.value=""};j(()=>{w.value.addEventListener("change",b)});const C=g=>{var k,$,p,x,F,E,_,I,L,H,z,V,X,K,ae,q,Y,ie,oe,ee,U,J,Ze,vt,gt,ht,pt,bt,yt,kt,wt,Ct,$t,Tt,St,xt,Et,_t,At,It,Lt,Ht,Mt,Rt,Ft,Nt,Dt,Pt,Ot,Bt,Vt,jt,Wt,zt,Ut,qt,Gt,Xt,Kt,Yt,Zt,Jt,Qt,el,tl,ll,ol,nl,al,il,rl,sl,cl,dl,ul,ml,fl,vl,gl,hl,pl;if(no.includes(g))switch(g){case"-":return m(ci,null,null);case"bold":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(k=t.value.toolbarTips)==null?void 0:k.bold,onClick:()=>{s("bold")}},[m(N,{name:"bold"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[($=t.value.toolbarTips)==null?void 0:$.bold])]);case"underline":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(p=t.value.toolbarTips)==null?void 0:p.underline,onClick:()=>{s("underline")}},[m(N,{name:"underline"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(x=t.value.toolbarTips)==null?void 0:x.underline])]);case"italic":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(F=t.value.toolbarTips)==null?void 0:F.italic,onClick:()=>{s("italic")}},[m(N,{name:"italic"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(E=t.value.toolbarTips)==null?void 0:E.italic])]);case"strikeThrough":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(_=t.value.toolbarTips)==null?void 0:_.strikeThrough,onClick:()=>{s("strikeThrough")}},[m(N,{name:"strike-through"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(I=t.value.toolbarTips)==null?void 0:I.strikeThrough])]);case"title":return m(we,{relative:`#${c}`,visible:d.title,onChange:R=>{d.title=R},disabled:i==null?void 0:i.value,overlay:m("ul",{class:`${r}-menu`,onClick:()=>{d.title=!1},role:"menu"},[m("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h1")},role:"menuitem",tabindex:"0"},[(L=t.value.titleItem)==null?void 0:L.h1]),m("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h2")},role:"menuitem",tabindex:"0"},[(H=t.value.titleItem)==null?void 0:H.h2]),m("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h3")},role:"menuitem",tabindex:"0"},[(z=t.value.titleItem)==null?void 0:z.h3]),m("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h4")},role:"menuitem",tabindex:"0"},[(V=t.value.titleItem)==null?void 0:V.h4]),m("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h5")},role:"menuitem",tabindex:"0"},[(X=t.value.titleItem)==null?void 0:X.h5]),m("li",{class:`${r}-menu-item ${r}-menu-item-title`,onClick:()=>{s("h6")},role:"menuitem",tabindex:"0"},[(K=t.value.titleItem)==null?void 0:K.h6])])},{default:()=>{var R,Q;return[m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(R=t.value.toolbarTips)==null?void 0:R.title},[m(N,{name:"title"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Q=t.value.toolbarTips)==null?void 0:Q.title])])]}});case"sub":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(ae=t.value.toolbarTips)==null?void 0:ae.sub,onClick:()=>{s("sub")}},[m(N,{name:"sub"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(q=t.value.toolbarTips)==null?void 0:q.sub])]);case"sup":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(Y=t.value.toolbarTips)==null?void 0:Y.sup,onClick:()=>{s("sup")}},[m(N,{name:"sup"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(ie=t.value.toolbarTips)==null?void 0:ie.sup])]);case"quote":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(oe=t.value.toolbarTips)==null?void 0:oe.quote,onClick:()=>{s("quote")}},[m(N,{name:"quote"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(ee=t.value.toolbarTips)==null?void 0:ee.quote])]);case"unorderedList":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(U=t.value.toolbarTips)==null?void 0:U.unorderedList,onClick:()=>{s("unorderedList")}},[m(N,{name:"unordered-list"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(J=t.value.toolbarTips)==null?void 0:J.unorderedList])]);case"orderedList":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(Ze=t.value.toolbarTips)==null?void 0:Ze.orderedList,onClick:()=>{s("orderedList")}},[m(N,{name:"ordered-list"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(vt=t.value.toolbarTips)==null?void 0:vt.orderedList])]);case"task":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(gt=t.value.toolbarTips)==null?void 0:gt.task,onClick:()=>{s("task")}},[m(N,{name:"task"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(ht=t.value.toolbarTips)==null?void 0:ht.task])]);case"codeRow":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(pt=t.value.toolbarTips)==null?void 0:pt.codeRow,onClick:()=>{s("codeRow")}},[m(N,{name:"code-row"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(bt=t.value.toolbarTips)==null?void 0:bt.codeRow])]);case"code":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(yt=t.value.toolbarTips)==null?void 0:yt.code,onClick:()=>{s("code")}},[m(N,{name:"code"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(kt=t.value.toolbarTips)==null?void 0:kt.code])]);case"link":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(wt=t.value.toolbarTips)==null?void 0:wt.link,onClick:()=>{if(i!=null&&i.value)return!1;e.insertLinkDirect?s("link"):(v.type="link",v.linkVisible=!0)}},[m(N,{name:"link"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Ct=t.value.toolbarTips)==null?void 0:Ct.link])]);case"image":return e.noUploadImg?m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:($t=t.value.toolbarTips)==null?void 0:$t.image,onClick:()=>{if(i!=null&&i.value)return!1;e.insertLinkDirect?s("image"):(v.type="image",v.linkVisible=!0)}},[m(N,{name:"image"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Tt=t.value.toolbarTips)==null?void 0:Tt.image])]):m(we,{relative:`#${c}`,visible:d.image,onChange:R=>{d.image=R},disabled:i==null?void 0:i.value,overlay:m("ul",{class:`${r}-menu`,onClick:()=>{d.image=!1},role:"menu"},[m("li",{class:`${r}-menu-item ${r}-menu-item-image`,onClick:()=>{e.insertLinkDirect?s("image"):(v.type="image",v.linkVisible=!0)},role:"menuitem",tabindex:"0"},[(St=t.value.imgTitleItem)==null?void 0:St.link]),m("li",{class:`${r}-menu-item ${r}-menu-item-image`,onClick:()=>{w.value.click()},role:"menuitem",tabindex:"0"},[(xt=t.value.imgTitleItem)==null?void 0:xt.upload]),m("li",{class:`${r}-menu-item ${r}-menu-item-image`,onClick:()=>{v.clipVisible=!0},role:"menuitem",tabindex:"0"},[(Et=t.value.imgTitleItem)==null?void 0:Et.clip2upload])])},{default:()=>{var R,Q;return[m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(R=t.value.toolbarTips)==null?void 0:R.image},[m(N,{name:"image"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Q=t.value.toolbarTips)==null?void 0:Q.image])])]}});case"table":return m(we,{relative:`#${c}`,visible:d.table,onChange:R=>{d.table=R},disabled:i==null?void 0:i.value,key:"bar-table",overlay:m(fi,{tableShape:e.tableShape,onSelected:R=>{s("table",{selectedShape:R})}},null)},{default:()=>{var R,Q;return[m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(R=t.value.toolbarTips)==null?void 0:R.table},[m(N,{name:"table"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Q=t.value.toolbarTips)==null?void 0:Q.table])])]}});case"revoke":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(_t=t.value.toolbarTips)==null?void 0:_t.revoke,onClick:()=>{if(i!=null&&i.value)return!1;S.emit(l,ro)}},[m(N,{name:"revoke"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(At=t.value.toolbarTips)==null?void 0:At.revoke])]);case"next":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(It=t.value.toolbarTips)==null?void 0:It.next,onClick:()=>{if(i!=null&&i.value)return!1;S.emit(l,so)}},[m(N,{name:"next"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Lt=t.value.toolbarTips)==null?void 0:Lt.next])]);case"save":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(Ht=t.value.toolbarTips)==null?void 0:Ht.save,onClick:()=>{if(i!=null&&i.value)return!1;S.emit(l,Xe)}},[m(N,{name:"save"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Mt=t.value.toolbarTips)==null?void 0:Mt.save])]);case"prettier":return e.noPrettier?"":m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(Rt=t.value.toolbarTips)==null?void 0:Rt.prettier,onClick:()=>{s("prettier")}},[m(N,{name:"prettier"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Ft=t.value.toolbarTips)==null?void 0:Ft.prettier])]);case"pageFullscreen":return!e.setting.fullscreen&&m("div",{class:[`${r}-toolbar-item`,e.setting.pageFullscreen&&`${r}-toolbar-active`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(Nt=t.value.toolbarTips)==null?void 0:Nt.pageFullscreen,onClick:()=>{if(i!=null&&i.value)return!1;e.updateSetting("pageFullscreen")}},[m(N,{name:e.setting.pageFullscreen?"minimize":"maximize"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Dt=t.value.toolbarTips)==null?void 0:Dt.pageFullscreen])]);case"fullscreen":return m("div",{class:[`${r}-toolbar-item`,e.setting.fullscreen&&`${r}-toolbar-active`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(Pt=t.value.toolbarTips)==null?void 0:Pt.fullscreen,onClick:()=>{if(i!=null&&i.value)return!1;u()}},[m(N,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Ot=t.value.toolbarTips)==null?void 0:Ot.fullscreen])]);case"preview":return m("div",{class:[`${r}-toolbar-item`,e.setting.preview&&`${r}-toolbar-active`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(Bt=t.value.toolbarTips)==null?void 0:Bt.preview,onClick:()=>{if(i!=null&&i.value)return!1;e.updateSetting("preview")}},[m(N,{name:"preview"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Vt=t.value.toolbarTips)==null?void 0:Vt.preview])]);case"previewOnly":return m("div",{class:[`${r}-toolbar-item`,e.setting.previewOnly&&`${r}-toolbar-active`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(jt=t.value.toolbarTips)==null?void 0:jt.previewOnly,onClick:()=>{if(i!=null&&i.value)return!1;e.updateSetting("previewOnly")}},[m(N,{name:"preview-only"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Wt=t.value.toolbarTips)==null?void 0:Wt.previewOnly])]);case"htmlPreview":return m("div",{class:[`${r}-toolbar-item`,e.setting.htmlPreview&&`${r}-toolbar-active`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(zt=t.value.toolbarTips)==null?void 0:zt.htmlPreview,onClick:()=>{if(i!=null&&i.value)return!1;e.updateSetting("htmlPreview")}},[m(N,{name:"preview-html"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Ut=t.value.toolbarTips)==null?void 0:Ut.htmlPreview])]);case"catalog":return m("div",{class:[`${r}-toolbar-item`,e.catalogVisible&&`${r}-toolbar-active`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(qt=t.value.toolbarTips)==null?void 0:qt.catalog,onClick:()=>{if(i!=null&&i.value)return!1;S.emit(l,ct)},key:"bar-catalog"},[m(N,{name:"catalog"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Gt=t.value.toolbarTips)==null?void 0:Gt.catalog])]);case"github":return m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(Xt=t.value.toolbarTips)==null?void 0:Xt.github,onClick:()=>{if(i!=null&&i.value)return!1;Do("https://github.com/imzbf/md-editor-v3")}},[m(N,{name:"github"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Kt=t.value.toolbarTips)==null?void 0:Kt.github])]);case"mermaid":return m(we,{relative:`#${c}`,visible:d.mermaid,onChange:R=>{d.mermaid=R},disabled:i==null?void 0:i.value,overlay:m("ul",{class:`${r}-menu`,onClick:()=>{d.mermaid=!1},role:"menu"},[m("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("flow")},role:"menuitem",tabindex:"0"},[(Yt=t.value.mermaid)==null?void 0:Yt.flow]),m("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("sequence")},role:"menuitem",tabindex:"0"},[(Zt=t.value.mermaid)==null?void 0:Zt.sequence]),m("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("gantt")},role:"menuitem",tabindex:"0"},[(Jt=t.value.mermaid)==null?void 0:Jt.gantt]),m("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("class")},role:"menuitem",tabindex:"0"},[(Qt=t.value.mermaid)==null?void 0:Qt.class]),m("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("state")},role:"menuitem",tabindex:"0"},[(el=t.value.mermaid)==null?void 0:el.state]),m("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("pie")},role:"menuitem",tabindex:"0"},[(tl=t.value.mermaid)==null?void 0:tl.pie]),m("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("relationship")},role:"menuitem",tabindex:"0"},[(ll=t.value.mermaid)==null?void 0:ll.relationship]),m("li",{class:`${r}-menu-item ${r}-menu-item-mermaid`,onClick:()=>{s("journey")},role:"menuitem",tabindex:"0"},[(ol=t.value.mermaid)==null?void 0:ol.journey])]),key:"bar-mermaid"},{default:()=>{var R,Q;return[m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(R=t.value.toolbarTips)==null?void 0:R.mermaid},[m(N,{name:"mermaid"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Q=t.value.toolbarTips)==null?void 0:Q.mermaid])])]}});case"katex":return m(we,{relative:`#${c}`,visible:d.katex,onChange:R=>{d.katex=R},disabled:i==null?void 0:i.value,overlay:m("ul",{class:`${r}-menu`,onClick:()=>{d.katex=!1},role:"menu"},[m("li",{class:`${r}-menu-item ${r}-menu-item-katex`,onClick:()=>{s("katexInline")},role:"menuitem",tabindex:"0"},[(nl=t.value.katex)==null?void 0:nl.inline]),m("li",{class:`${r}-menu-item ${r}-menu-item-katex`,onClick:()=>{s("katexBlock")},role:"menuitem",tabindex:"0"},[(al=t.value.katex)==null?void 0:al.block])]),key:"bar-katex"},{default:()=>{var R,Q;return[m("div",{class:[`${r}-toolbar-item`,(i==null?void 0:i.value)&&`${r}-disabled`],title:(R=t.value.toolbarTips)==null?void 0:R.katex},[m(N,{name:"formula"},null),e.showToolbarName&&m("div",{class:`${r}-toolbar-item-name`},[(Q=t.value.toolbarTips)==null?void 0:Q.katex])])]}})}else if(e.defToolbars instanceof Array){const R=e.defToolbars[g];return R?Ie(R,{theme:((il=R.props)==null?void 0:il.theme)||o.value,previewTheme:((rl=R.props)==null?void 0:rl.theme)||n.value,language:((sl=R.props)==null?void 0:sl.theme)||a.value,codeTheme:((cl=R.props)==null?void 0:cl.codeTheme)||e.codeTheme,disabled:((dl=R.props)==null?void 0:dl.disabled)||(i==null?void 0:i.value),showToolbarName:((ul=R.props)==null?void 0:ul.showToolbarName)||e.showToolbarName,insert(Je){S.emit(l,P,"universal",{generate:Je})}}):""}else if(e.defToolbars&&e.defToolbars.children instanceof Array){const R=e.defToolbars.children[g];return R?Ie(R,{theme:((ml=R.props)==null?void 0:ml.theme)||o.value,previewTheme:((fl=R.props)==null?void 0:fl.theme)||n.value,language:((vl=R.props)==null?void 0:vl.theme)||a.value,codeTheme:((gl=R.props)==null?void 0:gl.codeTheme)||e.codeTheme,disabled:((hl=R.props)==null?void 0:hl.disabled)||(i==null?void 0:i.value),showToolbarName:((pl=R.props)==null?void 0:pl.showToolbarName)||e.showToolbarName,insert(Je){S.emit(l,P,"universal",{generate:Je})}}):""}else return""};return M(()=>e.toolbars,()=>{ue(()=>{f.value&&Po(f.value)})},{immediate:!0}),()=>{var g;const k=y.value[0].map(p=>C(p)),$=y.value[1].map(p=>C(p));return m(Le,null,[e.toolbars.length>0&&m("div",{class:`${r}-toolbar-wrapper`,ref:f,id:c},[m("div",{class:[`${r}-toolbar`,e.showToolbarName&&`${r}-stn`]},[m("div",{class:`${r}-toolbar-left`,ref:h},[k]),m("div",{class:`${r}-toolbar-right`},[$])])]),m("label",{for:`${c}_label`,style:{display:"none"},"aria-label":(g=t.value.imgTitleItem)==null?void 0:g.upload},null),m("input",{id:`${c}_label`,ref:w,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),m(yi,{linkVisible:v.linkVisible,clipVisible:v.clipVisible,type:v.type,onCancel:()=>{v.linkVisible=!1,v.clipVisible=!1},onOk:p=>{p&&s(v.type,{desc:p.desc,url:p.url,transform:v.type==="image"}),v.linkVisible=!1,v.clipVisible=!1}},null)])}}}),wi=(e,l,t)=>{const o=A("editorId");let n=()=>{},a=()=>{};const i=()=>{var u;n();const c=(u=t.value)==null?void 0:u.view.contentDOM.getRootNode(),f=c.querySelector(`#${o} .cm-scroller`),d=c.querySelector(`[id="${o}-preview-wrapper"]`),s=c.querySelector(`[id="${o}-html-wrapper"]`);(d||s)&&([a,n]=(d?ti:ei)(f,d||s,t.value),e.scrollAuto&&a())};M([l,de(e.setting,"preview"),de(e.setting,"htmlPreview"),de(e.setting,"fullscreen"),de(e.setting,"pageFullscreen")],()=>{ue(i)}),M(()=>e.scrollAuto,u=>{u?a():n()}),M(()=>e.setting.previewOnly,u=>{u?n():a()}),j(i)},et=async(e,l,t)=>{if(/^h[1-6]$/.test(e))return Ci(e,l);if(e==="prettier")return await $i(l,t);switch(e){case"bold":case"underline":case"italic":case"strikeThrough":case"sub":case"sup":case"codeRow":case"katexInline":case"katexBlock":return Si(e,l);case"quote":case"orderedList":case"unorderedList":case"task":return Ei(e,l);case"code":return _i(t,l);case"table":return Li(t);case"link":{const{desc:o="",url:n=""}=t,a=`[${o}](${n})`;return{text:a,options:{select:n==="",deviationStart:a.length-n.length-1,deviationEnd:-1}}}case"image":return Ii(t);case"flow":case"sequence":case"gantt":case"class":case"state":case"pie":case"relationship":case"journey":return Ai(e);case"universal":return Hi(l.getSelectedText(),t);default:return{text:"",options:{}}}},Ci=(e,l)=>{const t=e.slice(1),o="#".repeat(Number(t)),[n,a,i]=ut(l,{wholeLine:!0});return{text:`${o} ${n}`,options:{deviationStart:o.length+1,replaceStart:a,replaceEnd:i}}},$i=async(e,l)=>{var t,o,n;const a=window.prettier||((t=G.editorExtensions.prettier)==null?void 0:t.prettierInstance),i=[((o=window.prettierPlugins)==null?void 0:o.markdown)||((n=G.editorExtensions.prettier)==null?void 0:n.parserMarkdownInstance)];return!a||!i[0]?(S.emit(l.editorId,ge,{name:"prettier",message:"prettier is undefined"}),{text:e.getValue(),options:{select:!1,replaceAll:!0}}):{text:await a.format(e.getValue(),{parser:"markdown",plugins:i}),options:{select:!1,replaceAll:!0}}},Ti={bold:["**","**",2,-2],underline:["<u>","</u>",3,-4],italic:["*","*",1,-1],strikeThrough:["~~","~~",2,-2],sub:["~","~",1,-1],sup:["^","^",1,-1],codeRow:["`","`",1,-1],katexInline:["$","$",1,-1],katexBlock:[`
$$
`,`
$$
`,4,-4]},Si=(e,l)=>{const t=l.getSelectedText(),[o,n,a,i]=Ti[e];return{text:`${o}${t}${n}`,options:{deviationStart:a,deviationEnd:i}}},xi={quote:"> ",unorderedList:"- ",orderedList:1,task:"- [ ] "},Ei=(e,l)=>{const[t,o,n]=ut(l,{wholeLine:!0}),a=t.split(`
`),i=xi[e],u=e==="orderedList"?a.map((d,s)=>`${i+s}. ${d}`):a.map(d=>`${i}${d}`),c=e==="orderedList"?"1. ":i.toString(),f=a.length===1?c.length:0;return{text:u.join(`
`),options:{deviationStart:f,replaceStart:o,replaceEnd:n}}},_i=(e,l)=>{const[t,o,n]=ut(l),a=e.mode||"language",i=`
\`\`\`${a}
${e.text||t||""}
\`\`\`
`;return{text:i,options:{deviationStart:4,deviationEnd:4+a.length-i.length,replaceStart:o,replaceEnd:n}}},Ai=e=>({text:`
\`\`\`mermaid
${{flow:`flowchart TD 
  Start --> Stop`,sequence:`sequenceDiagram
  A->>B: hello!
  B-->>A: hi!`,gantt:`gantt
title Gantt Chart
dateFormat  YYYY-MM-DD`,class:`classDiagram
  class Animal`,state:`stateDiagram-v2
  s1 --> s2`,pie:`pie
  "Dogs" : 386
  "Cats" : 85
  "Rats" : 15`,relationship:`erDiagram
  CAR ||--o{ NAMED-DRIVER : allows`,journey:`journey
  title My Journey`,...G.editorConfig.mermaidTemplate}[e]}
\`\`\`
`,options:{deviationStart:12,deviationEnd:-5}}),Ii=e=>{const{desc:l="",url:t="",urls:o}=e;let n="";return o instanceof Array?n=o.reduce((a,i)=>{const{url:u="",alt:c="",title:f=""}=typeof i=="object"?i:{url:i};return a+`![${c}](${u}${f?" '"+f+"'":""})
`},""):n=`![${l}](${t})
`,{text:n,options:{select:t==="",deviationStart:n.length-t.length-2,deviationEnd:-2}}},Li=e=>{const{selectedShape:l={x:1,y:1}}=e,{x:t,y:o}=l;let n=`
| Column`;for(let a=0;a<=o;a++)n+=" |";n+=`
|`;for(let a=0;a<=o;a++)n+=" - |";for(let a=0;a<=t;a++){n+=`
|`;for(let i=0;i<=o;i++)n+=" |"}return n+=`
`,{text:n,options:{deviationStart:3,deviationEnd:10-n.length}}},Hi=(e,l)=>{const{generate:t}=l,o=t(e);return{text:o.targetValue,options:{select:o.select??!0,deviationStart:o.deviationStart||0,deviationEnd:o.deviationEnd||0}}},ut=(e,l={wholeLine:!1})=>{const t=e.view.state,o=t.selection.main;if(o.empty){const n=t.doc.lineAt(o.from);return[t.doc.lineAt(o.from).text,n.from,n.to]}else if(l.wholeLine){const n=t.doc.lineAt(o.from),a=t.doc.lineAt(o.to);return[t.doc.sliceString(n.from,a.to),n.from,a.to]}return[t.doc.sliceString(o.from,o.to),o.from,o.to]},Mi="#e5c07b",Rl="var(--md-color)",Ri="#56b6c2",Fi="#ffffff",xe="var(--md-color)",Fl="#e5c07b",Ni="#e5c07b",Di="var(--md-color)",Nl="#d19a66",Pi="#c678dd",Oi="#21252b",Bi="#2c313a",Dl="var(--md-bk-color)",tt="var(--md-bk-color)",Vi="#ceedfa33",Pl="#528bff",ji=me.theme({"&":{color:xe,backgroundColor:Dl},".cm-content":{caretColor:Pl},".cm-cursor, .cm-dropCursor":{borderLeftColor:Pl},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Vi},".cm-panels":{backgroundColor:Oi,color:xe},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Dl,color:xe,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:Bi},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:tt},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tt,borderBottomColor:tt},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:xe}}},{dark:!0}),Wi=oo.define([{tag:T.keyword,color:Pi},{tag:[T.name,T.deleted,T.character,T.propertyName,T.macroName],color:Rl},{tag:[T.function(T.variableName),T.labelName],color:Ni},{tag:[T.color,T.constant(T.name),T.standard(T.name)],color:Nl},{tag:[T.definition(T.name),T.separator],color:xe},{tag:[T.typeName,T.className,T.number,T.changed,T.annotation,T.modifier,T.self,T.namespace],color:Mi},{tag:[T.operator,T.operatorKeyword,T.url,T.escape,T.regexp,T.link,T.special(T.string)],color:Ri},{tag:[T.meta,T.comment],color:Fl},{tag:T.strong,fontWeight:"bold"},{tag:T.emphasis,fontStyle:"italic"},{tag:T.strikethrough,textDecoration:"line-through"},{tag:T.link,color:Fl,textDecoration:"underline"},{tag:T.heading,fontWeight:"bold",color:Rl},{tag:[T.atom,T.bool,T.special(T.variableName)],color:Nl},{tag:[T.processingInstruction,T.string,T.inserted],color:Di},{tag:T.invalid,color:Fi}]),Ol=[ji,lo(Wi)],zi="#e5c07b",Bl="var(--md-color)",Ui="#56b6c2",qi="#fff",Ee="#3f4a54",Vl="#2d8cf0",Gi="#2d8cf0",Xi="#3f4a54",jl="#d19a66",Ki="#c678dd",Yi="#f6f6f6",Zi="#ceedfa33",Wl="var(--md-bk-color)",lt="var(--md-bk-color)",Ji="#bad5fa",zl="#3f4a54",Qi=me.theme({"&":{color:Ee,backgroundColor:Wl},".cm-content":{caretColor:zl},".cm-cursor, .cm-dropCursor":{borderLeftColor:zl},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Ji},".cm-panels":{backgroundColor:Yi,color:Ee},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Wl,color:Ee,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:Zi},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:lt},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:lt,borderBottomColor:lt},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:Ee}}}),er=oo.define([{tag:T.keyword,color:Ki},{tag:[T.name,T.deleted,T.character,T.propertyName,T.macroName],color:Bl},{tag:[T.function(T.variableName),T.labelName],color:Gi},{tag:[T.color,T.constant(T.name),T.standard(T.name)],color:jl},{tag:[T.definition(T.name),T.separator],color:Ee},{tag:[T.typeName,T.className,T.number,T.changed,T.annotation,T.modifier,T.self,T.namespace],color:zi},{tag:[T.operator,T.operatorKeyword,T.url,T.escape,T.regexp,T.link,T.special(T.string)],color:Ui},{tag:[T.meta,T.comment],color:Vl},{tag:T.strong,fontWeight:"bold"},{tag:T.emphasis,fontStyle:"italic"},{tag:T.strikethrough,textDecoration:"line-through"},{tag:T.link,color:Vl,textDecoration:"underline"},{tag:T.heading,fontWeight:"bold",color:Bl},{tag:[T.atom,T.bool,T.special(T.variableName)],color:jl},{tag:[T.processingInstruction,T.string,T.inserted],color:Xi},{tag:T.invalid,color:qi}]),Ul=[Qi,lo(er)],Me=(e,l,t,o,n)=>(a,i,u,c)=>{const f=`${e}${l}`.slice(c-u);a.dispatch(a.state.replaceSelection(`${f}${t}${o}`));const d=u+i.label.length+(n==="title"?t.length:0);a.dispatch({selection:$e.create([$e.range(u+i.label.length+(n==="title"?1:-l.length),d),$e.cursor(d)],1)}),a.focus()},ql=e=>(l,t,o,n)=>{const a=e.slice(n-o);l.dispatch(l.state.replaceSelection(`${a} `))},Gl=e=>{const l=t=>{const o=t.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return o===null||o.from==o.to&&t.explicit?null:{from:o.from,options:[...["h2","h3","h4","h5","h6"].map((n,a)=>{const i=new Array(a+2).fill("#").join("");return{label:i,type:"text",apply:ql(i)}}),...["unchecked","checked"].map(n=>{const a=n==="checked"?"- [x]":"- [ ]";return{label:a,type:"text",apply:ql(a)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(n=>({label:`${n[0]}${n[1]}`,type:"text",apply:Me(n[0],n[1],"",n[0]==="`"?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:`| col | col | col |
| - | - | - |
| content | content | content |
| content | content | content |`},{label:"$",type:"text",apply:Me("$","","","$","type")},{label:"$$",type:"text",apply:Me("$$","",`
`,`
$$`,"title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(n=>({label:`!!! ${n}`,type:"text",apply:Me("!!!",` ${n}`," Title",`

!!!`,"title")}))]}};return Bn({override:e?[l,...e]:[l]})},ye=e=>{const l=new ke;return o=>(l.get(e.state)?e.dispatch({effects:l.reconfigure(o)}):e.dispatch({effects:Hn.appendConfig.of(l.of(o))}),!0)};class tr{constructor(l){fe(this,"view"),fe(this,"maxLength",Number.MAX_SAFE_INTEGER),fe(this,"toggleTabSize"),fe(this,"togglePlaceholder"),fe(this,"setExtensions"),fe(this,"toggleDisabled"),fe(this,"toggleReadOnly"),fe(this,"toggleMaxlength"),this.view=l,this.toggleTabSize=ye(this.view),this.togglePlaceholder=ye(this.view),this.setExtensions=ye(this.view),this.toggleDisabled=ye(this.view),this.toggleReadOnly=ye(this.view),this.toggleMaxlength=ye(this.view)}getValue(){return this.view.state.doc.toString()}setValue(l,t=0,o=this.view.state.doc.length){this.view.dispatch({changes:{from:t,to:o,insert:l}})}getSelectedText(){const{from:l,to:t}=this.view.state.selection.main;return this.view.state.sliceDoc(l,t)}replaceSelectedText(l,t,o){const n={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1,replaceStart:-1,replaceEnd:-1,...t};try{if(n.replaceAll){if(this.setValue(l),l.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+l.length>this.maxLength)throw new Error("The input text is too long");const{from:a}=this.view.state.selection.main;n.replaceStart!==-1?this.view.dispatch({changes:{from:n.replaceStart,to:n.replaceEnd,insert:l}}):this.view.dispatch(this.view.state.replaceSelection(l)),n.select&&this.view.dispatch({selection:{anchor:n.replaceStart===-1?a+n.deviationStart:n.replaceStart+n.deviationStart,head:n.replaceStart===-1?a+l.length+n.deviationEnd:n.replaceStart+l.length+n.deviationEnd}}),this.view.focus()}catch(a){if(a.message==="The input text is too long")S.emit(o,ge,{name:"overlength",message:a.message,data:l});else throw a}}setTabSize(l){this.toggleTabSize([Qe.tabSize.of(l),On.of(" ".repeat(l))])}setPlaceholder(l){this.togglePlaceholder(An(l))}focus(l){if(this.view.focus(),!l)return;let t=0,o=0,n=0;switch(l){case"start":break;case"end":{t=o=n=this.getValue().length;break}default:t=l.rangeAnchor||l.cursorPos,o=l.rangeHead||l.cursorPos,n=l.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:$e.create([$e.range(t,o),$e.cursor(n)],1)})}setDisabled(l){this.toggleDisabled([me.editable.of(!l)])}setReadOnly(l){this.toggleReadOnly([Qe.readOnly.of(l)])}setMaxLength(l){this.maxLength=l,this.toggleMaxlength([Qe.changeFilter.of(t=>t.newDoc.length<=l)])}}const lr=(e,l)=>{const t=A("editorId"),o=a=>{a instanceof Promise?a.then(i=>{S.emit(t,P,"universal",{generate(){return{targetValue:i}}})}).catch(i=>{}):S.emit(t,P,"universal",{generate(){return{targetValue:a}}})};return a=>{var i,u,c;if(!a.clipboardData)return;if(a.clipboardData.files.length>0){const{files:w}=a.clipboardData;S.emit(t,Ke,Array.from(w).filter(b=>/image\/.*/.test(b.type))),a.preventDefault();return}const f=a.clipboardData.getData("text/plain"),d=((i=l.value)==null?void 0:i.view.state.selection.main.to)||0,s=((u=l.value)==null?void 0:u.view.state.doc.lineAt(d).from)||0,v=((c=l.value)==null?void 0:c.view.state.doc.sliceString(s,d))||"",h=/!\[.*\]\(\s*$/.test(v),y=/!\[.*\]\((.*)\s?.*\)/.test(f);if(h){const w=e.transformImgUrl(f);o(w),a.preventDefault();return}else if(y){const w=f.match(new RegExp(`(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?["']?.*["']?\\))`,"g"));w?Promise.all(w.map(b=>e.transformImgUrl(b))).then(b=>{o(b.reduce((C,g,k)=>C.replace(w[k],g),f))}):o(f),a.preventDefault();return}if(e.autoDetectCode&&a.clipboardData.types.includes("vscode-editor-data")){const w=JSON.parse(a.clipboardData.getData("vscode-editor-data"));S.emit(t,P,"code",{mode:w.mode,text:a.clipboardData.getData("text/plain")}),a.preventDefault();return}e.maxlength&&f.length+e.modelValue.length>e.maxlength&&S.emit(t,ge,{name:"overlength",message:"The input text is too long",data:f})}},or=(e,l)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(S.emit(e,P,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:Pn,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:$=>(S.emit(e,Xe,$.state.doc.toString()),!0),shift:()=>(S.emit(e,P,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>(S.emit(e,P,"underline"),!0),shift:()=>(S.emit(e,P,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>(S.emit(e,P,"italic"),!0),shift:()=>(S.emit(e,rt,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(S.emit(e,P,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(S.emit(e,P,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(S.emit(e,P,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(S.emit(e,P,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(S.emit(e,P,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(S.emit(e,P,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(S.emit(e,P,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(S.emit(e,P,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(S.emit(e,P,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(S.emit(e,P,"code"),!0),any($,p){return(p.ctrlKey||p.metaKey)&&p.altKey&&p.code==="KeyC"?(S.emit(e,P,"codeRow"),!0):!1}},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(S.emit(e,rt,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>l.noPrettier?!1:(S.emit(e,P,"prettier"),!0)},{any:($,p)=>(p.ctrlKey||p.metaKey)&&p.altKey&&p.shiftKey&&p.code==="KeyT"?(S.emit(e,P,"table"),!0):!1},...Vn];me.EDIT_CONTEXT=!1;const nr=e=>{const l=A("tabWidth"),t=A("editorId"),o=A("theme"),n=D(),a=he(),i=D(!1),u=new ke,c=new ke,f=new ke,d=new ke,s=new ke,v=or(t,e),h=()=>[...v,...Mn,...Rn,Fn],w={paste:lr(e,a),blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,compositionstart:()=>{i.value=!0},compositionend:(g,k)=>{i.value=!1,e.updateModelValue(k.state.doc.toString())},input:g=>{e.onInput&&e.onInput(g);const{data:k}=g;e.maxlength&&e.modelValue.length+k.length>e.maxlength&&S.emit(t,ge,{name:"overlength",message:"The input text is too long",data:k})}},b=[En.of(h()),d.of(yl()),u.of(Ln({codeLanguages:In})),me.lineWrapping,me.updateListener.of(g=>{g.docChanged&&(e.onChange(g.state.doc.toString()),i.value||e.updateModelValue(g.state.doc.toString()))}),s.of(me.domEventHandlers(w)),_n()],C=()=>{const g=[...b,c.of(o.value==="light"?Ul:Ol),f.of(Gl(e.completions))];return G.codeMirrorExtensions(o.value,g,h(),{editorId:t})};return j(()=>{const g=new me({doc:e.modelValue,parent:n.value,extensions:[C()]}),k=new tr(g);a.value=k,setTimeout(()=>{k.setTabSize(l),k.setDisabled(e.disabled),k.setReadOnly(e.readonly),e.placeholder&&k.setPlaceholder(e.placeholder),typeof e.maxlength=="number"&&k.setMaxLength(e.maxlength),e.autofocus&&g.focus()},0),S.on(t,{name:ro,callback(){Nn(g)}}),S.on(t,{name:so,callback(){Dn(g)}}),S.on(t,{name:P,async callback($,p={}){var x,F;if($==="image"&&p.transform){const E=e.transformImgUrl(p.url);if(E instanceof Promise)E.then(async _=>{var I;const{text:L,options:H}=await et($,a.value,{...p,url:_});(I=a.value)==null||I.replaceSelectedText(L,H,t)}).catch(_=>{});else{const{text:_,options:I}=await et($,a.value,{...p,url:E});(x=a.value)==null||x.replaceSelectedText(_,I,t)}}else{const{text:E,options:_}=await et($,a.value,p);(F=a.value)==null||F.replaceSelectedText(E,_,t)}}}),S.on(t,{name:uo,callback:No($=>{var p;const x={...w},F=Object.keys(w);for(const E in $){const _=E;F.includes(_)?x[_]=(I,L)=>{$[_](I,L),I.defaultPrevented||w[_](I,L)}:x[_]=$[_]}(p=a.value)==null||p.view.dispatch({effects:s.reconfigure(me.domEventHandlers(x))})})}),S.on(t,{name:mo,callback:($,p)=>{const x=g.state.doc.line($);g.dispatch(g.state.update({changes:{from:x.from,to:x.to,insert:p}}))}}),S.on(t,{name:fo,callback(){S.emit(t,Ue,g)}}),S.emit(t,Ue,g)}),M(o,()=>{var g;(g=a.value)==null||g.view.dispatch({effects:c.reconfigure(o.value==="light"?Ul:Ol)})},{deep:!0}),M(()=>e.completions,()=>{var g;(g=a.value)==null||g.view.dispatch({effects:f.reconfigure(Gl(e.completions))})},{deep:!0}),M(()=>e.modelValue,()=>{var g,k;((g=a.value)==null?void 0:g.getValue())!==e.modelValue&&((k=a.value)==null||k.setValue(e.modelValue))}),M(()=>e.placeholder,()=>{var g;(g=a.value)==null||g.setPlaceholder(e.placeholder)}),M(()=>e.disabled,()=>{var g;(g=a.value)==null||g.setDisabled(e.disabled)}),M(()=>e.readonly,()=>{var g;(g=a.value)==null||g.setDisabled(e.readonly)}),M(()=>e.maxlength,()=>{var g;e.maxlength&&((g=a.value)==null||g.setMaxLength(e.maxlength))}),{inputWrapperRef:n,codeMirrorUt:a,resetHistory(){var g,k;(g=a.value)==null||g.view.dispatch({effects:d.reconfigure([])}),(k=a.value)==null||k.view.dispatch({effects:d.reconfigure(yl())})}}},ar=(e,l,t)=>{const o=Z(()=>/px$/.test(`${e.inputBoxWidth}`)?"50%":e.inputBoxWidth),n=te({resizedWidth:o.value}),a=te({width:o.value}),i=te({left:o.value,display:"initial"}),u=d=>{var s,v,h;const y=((s=l.value)==null?void 0:s.offsetWidth)||0,w=((v=l.value)==null?void 0:v.getBoundingClientRect().x)||0;let b=d.x-w;b/y<He?b=y*He:b>y-y*He&&(b=y-y*He);const C=`${b/y*100}%`;a.width=C,i.left=C,n.resizedWidth=C,(h=e.oninputBoxWidthChange)==null||h.call(e,C)},c=d=>{d.target===t.value&&document.addEventListener("mousemove",u)},f=()=>{document.removeEventListener("mousemove",u)};return M([t],()=>{document.removeEventListener("mousedown",c),document.removeEventListener("mouseup",f),document.addEventListener("mousedown",c),document.addEventListener("mouseup",f)}),j(()=>{document.addEventListener("mousedown",c),document.addEventListener("mouseup",f)}),pe(()=>{document.removeEventListener("mousedown",c),document.removeEventListener("mouseup",f)}),M([o],([d])=>{n.resizedWidth=d,a.width=d,i.left=d}),M([de(e.setting,"htmlPreview"),de(e.setting,"preview"),de(e.setting,"previewOnly")],()=>{e.setting.previewOnly?(a.width="0%",i.display="none"):!e.setting.htmlPreview&&!e.setting.preview?(a.width="100%",i.display="none"):(a.width=n.resizedWidth,i.display="initial")},{immediate:!0}),{inputWrapperStyle:a,resizeOperateStyle:i}},ir=eo(),rr=B({name:"MDEditorContent",props:Ma,setup(e,l){const t=A("editorId"),o=D(""),n=D(),a=D(),{inputWrapperRef:i,codeMirrorUt:u,resetHistory:c}=nr(e),{inputWrapperStyle:f,resizeOperateStyle:d}=ar(e,n,a);return wi(e,o,u),l.expose({getSelectedText(){var s;return(s=u.value)==null?void 0:s.getSelectedText()},focus(s){var v;(v=u.value)==null||v.focus(s)},resetHistory:c,getEditorView(){var s;return(s=u.value)==null?void 0:s.view}}),()=>m("div",{class:`${r}-content`},[m("div",{class:`${r}-content-wrapper`,ref:n},[m("div",{class:`${r}-input-wrapper`,style:f,ref:i},null),(e.setting.htmlPreview||e.setting.preview)&&m("div",{class:`${r}-resize-operate`,style:d,ref:a},null),m(go,{modelValue:e.modelValue,onChange:e.onChange,setting:e.setting,onHtmlChanged:s=>{o.value=s,e.onHtmlChanged(s)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:e.onRemount},null)]),e.catalogVisible&&m(Ae,{theme:e.theme,class:`${r}-catalog-editor ${r}-catalog-${e.catalogLayout}`,editorId:t,mdHeadingId:e.mdHeadingId,key:"internal-catalog",scrollElementOffsetTop:2,syncWith:e.setting.preview?"preview":"editor",onClick:(s,v)=>{var h,y;if(!e.setting.preview&&v.line!==void 0){s.preventDefault();const w=(h=u.value)==null?void 0:h.view;if(w){const b=w.state.doc.line(v.line+1),C=(y=w.lineBlockAt(b.from))==null?void 0:y.top,g=w.scrollDOM;ir(g,C)}}},catalogMaxDepth:e.catalogMaxDepth},null)])}}),sr=B({props:{modelValue:{type:String,default:""}},setup(e){const l=A("usedLanguageText");return()=>{var t,o;return m("div",{class:`${r}-footer-item`},[m("label",{class:`${r}-footer-label`},[`${(t=l.value.footer)==null?void 0:t.markdownTotal}:`]),m("span",null,[((o=e.modelValue)==null?void 0:o.length)||0])])}}}),cr={checked:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},disabled:{type:Boolean,default:void 0}},dr=B({name:`${r}-checkbox`,props:cr,setup(e){return()=>m("div",{class:[`${r}-checkbox`,e.checked&&`${r}-checkbox-checked`,e.disabled&&`${r}-disabled`],onClick:()=>{e.disabled||e.onChange(!e.checked)}},null)}}),ur={scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}}},mr=B({props:ur,setup(e){const l=A("usedLanguageText"),t=A("disabled");return()=>{var o;return m("div",{class:[`${r}-footer-item`,(t==null?void 0:t.value)&&`${r}-disabled`]},[m("label",{class:`${r}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)}},[(o=l==null?void 0:l.value.footer)==null?void 0:o.scrollAuto]),m(dr,{checked:e.scrollAuto,onChange:e.onScrollAutoChange,disabled:t==null?void 0:t.value},null)])}}}),fr={modelValue:{type:String,default:""},footers:{type:Array,default:[]},scrollAuto:{type:Boolean},noScrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}},defFooters:{type:Object}},vr=B({name:"MDEditorFooter",props:fr,setup(e){const l=A("theme"),t=A("language"),o=A("disabled"),n=Z(()=>{const i=e.footers.indexOf("="),u=i===-1?e.footers:e.footers.slice(0,i),c=i===-1?[]:e.footers.slice(i,Number.MAX_SAFE_INTEGER);return[u,c]}),a=i=>{var u,c,f,d,s,v;if(ao.includes(i))switch(i){case"markdownTotal":return m(sr,{modelValue:e.modelValue},null);case"scrollSwitch":return!e.noScrollAuto&&m(mr,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},null)}else if(e.defFooters instanceof Array){const h=e.defFooters[i];return h?Ie(h,{theme:((u=h.props)==null?void 0:u.theme)||l.value,language:((c=h.props)==null?void 0:c.language)||t.value,disabled:((f=h.props)==null?void 0:f.disabled)||(o==null?void 0:o.value)}):""}else if(e.defFooters&&e.defFooters.children instanceof Array){const h=e.defFooters.children[i];return h?Ie(h,{theme:((d=h.props)==null?void 0:d.theme)||l.value,language:((s=h.props)==null?void 0:s.language)||t.value,disabled:((v=h.props)==null?void 0:v.disabled)||(o==null?void 0:o.value)}):""}else return""};return()=>{const i=n.value[0].map(c=>a(c)),u=n.value[1].map(c=>a(c));return m("div",{class:`${r}-footer`},[m("div",{class:`${r}-footer-left`},[i]),m("div",{class:`${r}-footer-right`},[u])])}}}),ot=B({name:"MdEditorV3",props:qa,emits:Ga,setup(e,l){const{noKatex:t,noMermaid:o,noPrettier:n,noUploadImg:a,noHighlight:i}=e,u=te({scrollAuto:e.scrollAuto}),c=D(),f=D(),{editorId:d}=Pa(e,c),[s,v]=Va(e,l,{editorId:d}),h=ja(e,{editorId:d});return Da(e,l,{editorId:d}),Oa(e),Ba(e,l,{editorId:d}),Wa(e,l,{editorId:d,catalogVisible:h,setting:s,updateSetting:v,codeRef:f}),pe(()=>{S.clear(d)}),()=>{const y=le({props:e,ctx:l},"defToolbars"),w=le({props:e,ctx:l},"defFooters");return m("div",{id:d,class:[r,e.class,e.theme==="dark"&&`${r}-dark`,s.fullscreen||s.pageFullscreen?`${r}-fullscreen`:""],style:e.style,ref:c},[e.toolbars.length>0&&m(ki,{noPrettier:n,toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude,setting:s,updateSetting:v,tableShape:e.tableShape,defToolbars:y,noUploadImg:a,showToolbarName:e.showToolbarName,catalogVisible:h.value,codeTheme:e.codeTheme,insertLinkDirect:e.insertLinkDirect},null),m(rr,{ref:f,modelValue:e.modelValue,setting:s,mdHeadingId:e.mdHeadingId,noMermaid:o,noPrettier:n,sanitize:e.sanitize,placeholder:e.placeholder,noKatex:t,scrollAuto:u.scrollAuto,formatCopiedText:e.formatCopiedText,autofocus:e.autoFocus,disabled:e.disabled,readonly:e.readOnly,maxlength:e.maxLength,autoDetectCode:e.autoDetectCode,noHighlight:i,updateModelValue:b=>{l.emit("update:modelValue",b)},onChange:b=>{var C;(C=e.onChange)==null||C.call(e,b),l.emit("onChange",b)},onHtmlChanged:b=>{var C;(C=e.onHtmlChanged)==null||C.call(e,b),l.emit("onHtmlChanged",b)},onGetCatalog:b=>{var C;(C=e.onGetCatalog)==null||C.call(e,b),l.emit("onGetCatalog",b)},onBlur:b=>{var C;(C=e.onBlur)==null||C.call(e,b),l.emit("onBlur",b)},onFocus:b=>{var C;(C=e.onFocus)==null||C.call(e,b),l.emit("onFocus",b)},onInput:b=>{var C;(C=e.onInput)==null||C.call(e,b),l.emit("onInput",b)},completions:e.completions,catalogVisible:h.value,theme:e.theme,noImgZoomIn:e.noImgZoomIn,onDrop:b=>{var C;(C=e.onDrop)==null||C.call(e,b),l.emit("onDrop",b)},inputBoxWidth:e.inputBoxWidth,oninputBoxWidthChange:b=>{var C;(C=e.oninputBoxWidthChange)==null||C.call(e,b),l.emit("oninputBoxWidthChange",b)},sanitizeMermaid:e.sanitizeMermaid,transformImgUrl:e.transformImgUrl,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,onRemount:()=>{var b;(b=e.onRemount)==null||b.call(e),l.emit("onRemount")},catalogLayout:e.catalogLayout,catalogMaxDepth:e.catalogMaxDepth},null),e.footers.length>0&&m(vr,{modelValue:e.modelValue,footers:e.footers,defFooters:w,noScrollAuto:!s.preview&&!s.htmlPreview||s.previewOnly,scrollAuto:u.scrollAuto,onScrollAutoChange:b=>u.scrollAuto=b},null)])}}});ot.install=e=>(e.component(ot.name,ot),e.use(je).use(De).use(We).use(Ae).use(Ve),e);const gr={onClick:{type:Function,default:void 0},language:{type:String,default:void 0},theme:{type:String,default:void 0},disabled:{type:Boolean,default:void 0}},nt=B({name:"NormalFooterToolbar",props:gr,emits:["onClick"],setup(e,l){return()=>{const t=le({props:e,ctx:l});return m("div",{class:[`${r}-footer-item`,e.disabled&&`${r}-disabled`],onClick:o=>{var n;e.disabled||((n=e.onClick)==null||n.call(e,o),l.emit("onClick",o))}},[t])}}});nt.install=e=>(e.component(nt.name,nt),e);var Xl={exports:{}},W={},st={exports:{}},be={};function ko(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function hr(e,l,t){}function pr(e,l,t){}var br=/javascript\s*\:/img;function yr(e,l){return br.test(l)?"":l}be.whiteList=ko();be.getDefaultWhiteList=ko;be.onAttr=hr;be.onIgnoreAttr=pr;be.safeAttrValue=yr;var kr={indexOf:function(e,l){var t,o;if(Array.prototype.indexOf)return e.indexOf(l);for(t=0,o=e.length;t<o;t++)if(e[t]===l)return t;return-1},forEach:function(e,l,t){var o,n;if(Array.prototype.forEach)return e.forEach(l,t);for(o=0,n=e.length;o<n;o++)l.call(t,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},Se=kr;function wr(e,l){e=Se.trimRight(e),e[e.length-1]!==";"&&(e+=";");var t=e.length,o=!1,n=0,a=0,i="";function u(){if(!o){var d=Se.trim(e.slice(n,a)),s=d.indexOf(":");if(s!==-1){var v=Se.trim(d.slice(0,s)),h=Se.trim(d.slice(s+1));if(v){var y=l(n,i.length,v,h,d);y&&(i+=y+"; ")}}}n=a+1}for(;a<t;a++){var c=e[a];if(c==="/"&&e[a+1]==="*"){var f=e.indexOf("*/",a+2);if(f===-1)break;a=f+1,n=a+1,o=!1}else c==="("?o=!0:c===")"?o=!1:c===";"?o||u():c===`
`&&u()}return Se.trim(i)}var Cr=wr,Re=be,$r=Cr;function Kl(e){return e==null}function Tr(e){var l={};for(var t in e)l[t]=e[t];return l}function wo(e){e=Tr(e||{}),e.whiteList=e.whiteList||Re.whiteList,e.onAttr=e.onAttr||Re.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Re.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Re.safeAttrValue,this.options=e}wo.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var l=this,t=l.options,o=t.whiteList,n=t.onAttr,a=t.onIgnoreAttr,i=t.safeAttrValue,u=$r(e,function(c,f,d,s,v){var h=o[d],y=!1;if(h===!0?y=h:typeof h=="function"?y=h(s):h instanceof RegExp&&(y=h.test(s)),y!==!0&&(y=!1),s=i(d,s),!!s){var w={position:f,sourcePosition:c,source:v,isWhite:y};if(y){var b=n(d,s,w);return Kl(b)?d+":"+s:b}else{var b=a(d,s,w);if(!Kl(b))return b}}});return u};var Sr=wo;(function(e,l){var t=be,o=Sr;function n(i,u){var c=new o(u);return c.process(i)}l=e.exports=n,l.FilterCSS=o;for(var a in t)l[a]=t[a];typeof window<"u"&&(window.filterCSS=e.exports)})(st,st.exports);var mt=st.exports,ft={indexOf:function(e,l){var t,o;if(Array.prototype.indexOf)return e.indexOf(l);for(t=0,o=e.length;t<o;t++)if(e[t]===l)return t;return-1},forEach:function(e,l,t){var o,n;if(Array.prototype.forEach)return e.forEach(l,t);for(o=0,n=e.length;o<n;o++)l.call(t,e[o],o,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var l=/\s|\n|\t/,t=l.exec(e);return t?t.index:-1}},xr=mt.FilterCSS,Er=mt.getDefaultWhiteList,Ge=ft;function Co(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var $o=new xr;function _r(e,l,t){}function Ar(e,l,t){}function Ir(e,l,t){}function Lr(e,l,t){}function To(e){return e.replace(Mr,"&lt;").replace(Rr,"&gt;")}function Hr(e,l,t,o){if(t=Io(t),l==="href"||l==="src"){if(t=Ge.trim(t),t==="#")return"#";if(!(t.substr(0,7)==="http://"||t.substr(0,8)==="https://"||t.substr(0,7)==="mailto:"||t.substr(0,4)==="tel:"||t.substr(0,11)==="data:image/"||t.substr(0,6)==="ftp://"||t.substr(0,2)==="./"||t.substr(0,3)==="../"||t[0]==="#"||t[0]==="/"))return""}else if(l==="background"){if(Fe.lastIndex=0,Fe.test(t))return""}else if(l==="style"){if(Yl.lastIndex=0,Yl.test(t)||(Zl.lastIndex=0,Zl.test(t)&&(Fe.lastIndex=0,Fe.test(t))))return"";o!==!1&&(o=o||$o,t=o.process(t))}return t=Lo(t),t}var Mr=/</g,Rr=/>/g,Fr=/"/g,Nr=/&quot;/g,Dr=/&#([a-zA-Z0-9]*);?/gim,Pr=/&colon;?/gim,Or=/&newline;?/gim,Fe=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,Yl=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,Zl=/u\s*r\s*l\s*\(.*/gi;function So(e){return e.replace(Fr,"&quot;")}function xo(e){return e.replace(Nr,'"')}function Eo(e){return e.replace(Dr,function(t,o){return o[0]==="x"||o[0]==="X"?String.fromCharCode(parseInt(o.substr(1),16)):String.fromCharCode(parseInt(o,10))})}function _o(e){return e.replace(Pr,":").replace(Or," ")}function Ao(e){for(var l="",t=0,o=e.length;t<o;t++)l+=e.charCodeAt(t)<32?" ":e.charAt(t);return Ge.trim(l)}function Io(e){return e=xo(e),e=Eo(e),e=_o(e),e=Ao(e),e}function Lo(e){return e=So(e),e=To(e),e}function Br(){return""}function Vr(e,l){typeof l!="function"&&(l=function(){});var t=!Array.isArray(e);function o(i){return t?!0:Ge.indexOf(e,i)!==-1}var n=[],a=!1;return{onIgnoreTag:function(i,u,c){if(o(i))if(c.isClosing){var f="[/removed]",d=c.position+f.length;return n.push([a!==!1?a:c.position,d]),a=!1,f}else return a||(a=c.position),"[removed]";else return l(i,u,c)},remove:function(i){var u="",c=0;return Ge.forEach(n,function(f){u+=i.slice(c,f[0]),c=f[1]}),u+=i.slice(c),u}}}function jr(e){for(var l="",t=0;t<e.length;){var o=e.indexOf("<!--",t);if(o===-1){l+=e.slice(t);break}l+=e.slice(t,o);var n=e.indexOf("-->",o);if(n===-1)break;t=n+3}return l}function Wr(e){var l=e.split("");return l=l.filter(function(t){var o=t.charCodeAt(0);return o===127?!1:o<=31?o===10||o===13:!0}),l.join("")}W.whiteList=Co();W.getDefaultWhiteList=Co;W.onTag=_r;W.onIgnoreTag=Ar;W.onTagAttr=Ir;W.onIgnoreTagAttr=Lr;W.safeAttrValue=Hr;W.escapeHtml=To;W.escapeQuote=So;W.unescapeQuote=xo;W.escapeHtmlEntities=Eo;W.escapeDangerHtml5Entities=_o;W.clearNonPrintableCharacter=Ao;W.friendlyAttrValue=Io;W.escapeAttrValue=Lo;W.onIgnoreTagStripAll=Br;W.StripTagBody=Vr;W.stripCommentTag=jr;W.stripBlankChar=Wr;W.attributeWrapSign='"';W.cssFilter=$o;W.getDefaultCSSWhiteList=Er;var Ye={},ve=ft;function zr(e){var l=ve.spaceIndex(e),t;return l===-1?t=e.slice(1,-1):t=e.slice(1,l+1),t=ve.trim(t).toLowerCase(),t.slice(0,1)==="/"&&(t=t.slice(1)),t.slice(-1)==="/"&&(t=t.slice(0,-1)),t}function Ur(e){return e.slice(0,2)==="</"}function qr(e,l,t){var o="",n=0,a=!1,i=!1,u=0,c=e.length,f="",d="";e:for(u=0;u<c;u++){var s=e.charAt(u);if(a===!1){if(s==="<"){a=u;continue}}else if(i===!1){if(s==="<"){o+=t(e.slice(n,u)),a=u,n=u;continue}if(s===">"||u===c-1){o+=t(e.slice(n,a)),d=e.slice(a,u+1),f=zr(d),o+=l(a,o.length,f,d,Ur(d)),n=u+1,a=!1;continue}if(s==='"'||s==="'")for(var v=1,h=e.charAt(u-v);h.trim()===""||h==="=";){if(h==="="){i=s;continue e}h=e.charAt(u-++v)}}else if(s===i){i=!1;continue}}return n<c&&(o+=t(e.substr(n))),o}var Gr=/[^a-zA-Z0-9\\_:.-]/gim;function Xr(e,l){var t=0,o=0,n=[],a=!1,i=e.length;function u(v,h){if(v=ve.trim(v),v=v.replace(Gr,"").toLowerCase(),!(v.length<1)){var y=l(v,h||"");y&&n.push(y)}}for(var c=0;c<i;c++){var f=e.charAt(c),d,s;if(a===!1&&f==="="){a=e.slice(t,c),t=c+1,o=e.charAt(t)==='"'||e.charAt(t)==="'"?t:Yr(e,c+1);continue}if(a!==!1&&c===o){if(s=e.indexOf(f,c+1),s===-1)break;d=ve.trim(e.slice(o+1,s)),u(a,d),a=!1,c=s,t=c+1;continue}if(/\s|\n|\t/.test(f))if(e=e.replace(/\s|\n|\t/g," "),a===!1)if(s=Kr(e,c),s===-1){d=ve.trim(e.slice(t,c)),u(d),a=!1,t=c+1;continue}else{c=s-1;continue}else if(s=Zr(e,c-1),s===-1){d=ve.trim(e.slice(t,c)),d=Jl(d),u(a,d),a=!1,t=c+1;continue}else continue}return t<e.length&&(a===!1?u(e.slice(t)):u(a,Jl(ve.trim(e.slice(t))))),ve.trim(n.join(" "))}function Kr(e,l){for(;l<e.length;l++){var t=e[l];if(t!==" ")return t==="="?l:-1}}function Yr(e,l){for(;l<e.length;l++){var t=e[l];if(t!==" ")return t==="'"||t==='"'?l:-1}}function Zr(e,l){for(;l>0;l--){var t=e[l];if(t!==" ")return t==="="?l:-1}}function Jr(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Jl(e){return Jr(e)?e.substr(1,e.length-2):e}Ye.parseTag=qr;Ye.parseAttr=Xr;var Qr=mt.FilterCSS,re=W,Ho=Ye,es=Ho.parseTag,ts=Ho.parseAttr,ze=ft;function Ne(e){return e==null}function ls(e){var l=ze.spaceIndex(e);if(l===-1)return{html:"",closing:e[e.length-2]==="/"};e=ze.trim(e.slice(l+1,-1));var t=e[e.length-1]==="/";return t&&(e=ze.trim(e.slice(0,-1))),{html:e,closing:t}}function os(e){var l={};for(var t in e)l[t]=e[t];return l}function ns(e){var l={};for(var t in e)Array.isArray(e[t])?l[t.toLowerCase()]=e[t].map(function(o){return o.toLowerCase()}):l[t.toLowerCase()]=e[t];return l}function Mo(e){e=os(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag,e.onIgnoreTag=re.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=ns(e.whiteList||e.allowList):e.whiteList=re.whiteList,this.attributeWrapSign=e.singleQuotedAttributeValue===!0?"'":re.attributeWrapSign,e.onTag=e.onTag||re.onTag,e.onTagAttr=e.onTagAttr||re.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||re.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||re.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||re.safeAttrValue,e.escapeHtml=e.escapeHtml||re.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Qr(e.css))}Mo.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var l=this,t=l.options,o=t.whiteList,n=t.onTag,a=t.onIgnoreTag,i=t.onTagAttr,u=t.onIgnoreTagAttr,c=t.safeAttrValue,f=t.escapeHtml,d=l.attributeWrapSign,s=l.cssFilter;t.stripBlankChar&&(e=re.stripBlankChar(e)),t.allowCommentTag||(e=re.stripCommentTag(e));var v=!1;t.stripIgnoreTagBody&&(v=re.StripTagBody(t.stripIgnoreTagBody,a),a=v.onIgnoreTag);var h=es(e,function(y,w,b,C,g){var k={sourcePosition:y,position:w,isClosing:g,isWhite:Object.prototype.hasOwnProperty.call(o,b)},$=n(b,C,k);if(!Ne($))return $;if(k.isWhite){if(k.isClosing)return"</"+b+">";var p=ls(C),x=o[b],F=ts(p.html,function(E,_){var I=ze.indexOf(x,E)!==-1,L=i(b,E,_,I);return Ne(L)?I?(_=c(b,E,_,s),_?E+"="+d+_+d:E):(L=u(b,E,_,I),Ne(L)?void 0:L):L});return C="<"+b,F&&(C+=" "+F),p.closing&&(C+=" /"),C+=">",C}else return $=a(b,C,k),Ne($)?f(C):$},f);return v&&(h=v.remove(h)),h};var as=Mo;(function(e,l){var t=W,o=Ye,n=as;function a(u,c){var f=new n(c);return f.process(u)}l=e.exports=a,l.filterXSS=a,l.FilterXSS=n,function(){for(var u in t)l[u]=t[u];for(var c in o)l[c]=o[c]}(),typeof window<"u"&&(window.filterXSS=e.exports);function i(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}i()&&(self.filterXSS=e.exports)})(Xl,Xl.exports);export{ot as E,Ve as M};
