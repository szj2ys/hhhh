import"./store@2.0.12-i6xqVJod.js";import{a as fe,n as ve,u as ee,k as ye}from"./index-BDeQYItE.js";import{d as ke}from"./pinia@2.3.1_typescript@5.5.4_vue@3.5.16_typescript@5.5.4_-BZ2tmr1d.js";import{g as he,f as xe}from"./index-BFkfIWv_.js";import{u as ge}from"./index-C83YxYUF.js";import{e as ae,B as Q,A as X,F as be,d as we}from"./lodash-es@4.17.21-BYk7DlcU.js";import{u as L,v as j,y as v}from"./@vue_reactivity@3.5.16-Dqy0TPbS.js";import{Z as Ve}from"./@element-plus_icons-vue@2.3.1_vue@3.5.16_typescript@5.5.4_-CeLFb4Nw.js";import{d as E,P as i,c as f,o,a as l,i as t,H as s,W as Ce,y as S,z as V,F as D,L as R,J as O,v as H,e as se,a2 as $e}from"./@vue_runtime-core@3.5.16-Cn8z-kNe.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{p as K,O as U}from"./@vue_shared@3.5.16-UwmvJIHj.js";import{u as Se}from"./group-C7Cb0IKq.js";import{a as Y,b as ze}from"./element-plus@2.9.11_vue@3.5.16_typescript@5.5.4_-BTKo5Rtv.js";import"./chardet@2.1.0-CTPPlwpv.js";import"./@vue_runtime-dom@3.5.16-DriBzn4z.js";import"./@vueuse_core@12.8.2_typescript@5.5.4-7kYVjNRB.js";import"./@vueuse_shared@12.8.2_typescript@5.5.4-CuUdMqkw.js";import"./mitt@3.0.1-C1z4c41a.js";import"./@codemirror_language-data@6.5.1-Blx1hvTn.js";import"./@codemirror_language@6.11.1-BYrSuhr8.js";import"./@lezer_common@1.2.3-CP7NCNqd.js";import"./@codemirror_state@6.5.2-DQ6R6BiX.js";import"./@marijn_find-cluster-break@1.0.2-DXwl3gUT.js";import"./@codemirror_view@6.37.1-Bd3_Yh4F.js";import"./style-mod@4.1.2-Bc2inJdb.js";import"./w3c-keyname@2.2.8-Vcq4gwWv.js";import"./@lezer_highlight@1.2.1-DwVMghhY.js";import"./vue-router@4.5.1_vue@3.5.16_typescript@5.5.4_-ODt3CAxp.js";import"./comm-Ba3vmJ1R.js";import"./vue-i18n@11.1.5_vue@3.5.16_typescript@5.5.4_-Bqjl69Su.js";import"./@intlify_core-base@11.1.5-rFPZQXdu.js";import"./@intlify_shared@11.1.5-CY44FrR8.js";import"./@intlify_message-compiler@11.1.5-CZ-uatfp.js";import"./vue-echarts@7.0.3_@vue_runtime-core@3.5.16_echarts@5.6.0_vue@3.5.16_typescript@5.5.4_-Dhz4IGE5.js";import"./echarts@5.6.0-DvAKqd2B.js";import"./tslib@2.3.0-BDyQ-Jie.js";import"./zrender@5.6.1-DcQm8NwP.js";import"./axios@1.9.0-D--XfsWq.js";import"./nprogress@0.2.0-dOd6e7EG.js";import"./@vueuse_shared@9.13.0_vue@3.5.16_typescript@5.5.4_-4q0MSQPl.js";import"./@vueuse_core@9.13.0_vue@3.5.16_typescript@5.5.4_-DmiypGF2.js";import"./@sxzz_popperjs-es@2.11.7-D_chPuIy.js";import"./@ctrl_tinycolor@3.6.1-r5W6hzzQ.js";import"./dayjs@1.11.13-DUxgsv0d.js";import"./async-validator@4.2.5-CDKkdPIV.js";import"./memoize-one@6.0.0-BdPwpGay.js";import"./normalize-wheel-es@1.2.0-BQoi3Ox2.js";import"./@floating-ui_dom@1.7.1-Ba-2EiSn.js";import"./@floating-ui_core@1.7.1-C83JrwzW.js";import"./@floating-ui_utils@0.2.9-CBkBHzV8.js";function re(){const{user:q}=fe();let k=null;async function T({url:g,method:y="POST",data:d,cb:C}){k=new AbortController;let r="";return fetch(ve.baseUrl+g,{method:y,headers:{Authorization:q.token,"Content-Type":"application/json"},body:JSON.stringify(d),signal:k==null?void 0:k.signal}).then(m=>{if(m.body){const w=m.body.getReader(),h=new TextDecoder("utf-8"),a=new ReadableStream({start(e){function x(){w.read().then(({done:b,value:P})=>{if(b){e.close();return}let $=h.decode(P,{stream:!0});if(C){r&&($=r+$),$.indexOf("data:")==0&&($=`

`+$);try{$.split(/\n\ndata:/g).filter(Boolean).map(c=>JSON.parse(c)).forEach(C),r=""}catch{r=$}}e.enqueue($),x()})}x()}});return new Response(a)}return m}).catch(m=>{throw m})}function p(){k&&(k.abort(),k=null)}return{invoke:T,cancel:p}}const Z=ke("know-data-add",()=>{const{route:q}=ee(),k=re(),{toUpload:T}=ge(),p={from:0,typeId:0,type:"quality",chunkSize:500,chunkOverlap:50,separator:"\\n\\n",prompt:""},g=L(ae(p)),y=j([]);async function d(r){const m=q.query.typeId;g.from==1&&await Promise.all(r.map(async w=>{w.file&&!w.content&&await T(w.file).then(h=>{w.content=h.url})})),await ye.know.data.source.add(r.map(w=>({title:w.name,content:w.content||w.url,from:g.from,typeId:m}))).then(w=>{y.value=r.map((h,a)=>{const e=w.id[a],x=L({...h,id:e,list:[],data(){return new Promise((b,P)=>{k.invoke({url:"/admin/know/splitter/comm",data:{config:{typeId:m,type:g.type,sourceId:e,quick:{chunkSize:g.chunkSize,chunkOverlap:g.chunkOverlap,separator:g.separator.replace(/\\n/g,`
`)},quality:{prompt:g.prompt}}},cb:({isEnd:$,chunk:B})=>{$?b(!0):x.list.push({content:B})}}).catch($=>{P($)})})}});return x})})}function C(){Q(g,p),y.value=[]}return{form:g,list:y,create:d,clear:C}}),Ue={class:"segment-set"},qe=E({name:"undefined"}),Te=E({...qe,name:"know-segment-set",setup(q){const{form:k}=Z();return(T,p)=>{const g=i("el-input"),y=i("el-form-item"),d=i("el-col"),C=i("el-input-number"),r=i("el-row");return o(),f("div",Ue,[p[5]||(p[5]=l("p",{class:"title"},"分段策略",-1)),p[6]||(p[6]=l("p",{class:"desc"},"自定义分段规则、分段长度及预处理规则",-1)),t(r,{gutter:12},{default:s(()=>[t(d,{xs:24,sm:8},{default:s(()=>[t(y,{label:"分段标识符"},{default:s(()=>[t(g,{class:"w-full",modelValue:v(k).separator,"onUpdate:modelValue":p[0]||(p[0]=m=>v(k).separator=m)},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:8},{default:s(()=>[t(y,{label:"分段最大长度"},{default:s(()=>[t(C,{class:"w-full",modelValue:v(k).chunkSize,"onUpdate:modelValue":p[1]||(p[1]=m=>v(k).chunkSize=m),"controls-position":"right"},{suffix:s(()=>p[3]||(p[3]=[l("span",null,"tokens",-1)])),_:1},8,["modelValue"])]),_:1})]),_:1}),t(d,{span:8},{default:s(()=>[t(y,{label:"分段重叠长度"},{default:s(()=>[t(C,{class:"w-full",modelValue:v(k).chunkOverlap,"onUpdate:modelValue":p[2]||(p[2]=m=>v(k).chunkOverlap=m),"controls-position":"right"},{suffix:s(()=>p[4]||(p[4]=[l("span",null,"tokens",-1)])),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])}}}),Oe=W(Te,[["__scopeId","data-v-cd5545ff"]]),Fe={class:"segment-strategy"},Pe={class:"know-select-btn mb-[2px]"},Be=["onClick"],De={class:"flex-1"},Ee={class:"flex align-center"},Ie=E({name:"undefined"}),Me=E({...Ie,name:"know-index-type",props:{modelValue:String},emits:["update:modelValue"],setup(q,{emit:k}){const T=q,p=k,{form:g}=Z(),y=Ce(T,"modelValue"),d=j([{label:"高质量",value:"quality",desc:"尽可能保留原文内容，减少信息丢失",icon:"know-diamond",hot:!0},{label:"快速",value:"quick",desc:"尽可能减少分段，提高处理速度",icon:"know-pig"},{label:"不限制",value:"not",desc:"不限制分段策略，根据实际情况选择",icon:"know-ban"}]);function C(r){p("update:modelValue",r)}return(r,m)=>{const w=i("cl-svg"),h=i("el-tag"),a=i("el-col"),e=i("el-row"),x=i("el-input");return o(),f("div",Fe,[l("div",Pe,[t(e,{gutter:12},{default:s(()=>[(o(!0),f(D,null,R(d.value,b=>(o(),S(a,{xs:24,sm:8,key:b.value},{default:s(()=>[l("div",{class:K(["item",{active:v(y)==b.value}]),onClick:P=>C(b.value)},[t(w,{class:"icon",name:b.icon},null,8,["name"]),l("div",De,[l("p",Ee,[O(U(b.label)+" ",1),b.hot?(o(),S(h,{key:0,size:"small",effect:"plain",class:"ml-2"},{default:s(()=>m[1]||(m[1]=[O(" 推荐 ")])),_:1,__:[1]})):V("",!0)]),l("p",null,U(b.desc),1)])],10,Be)]),_:2},1024))),128))]),_:1})]),v(y)=="quality"?(o(),S(x,{key:0,class:"[&>textarea]:rounded-[10px]",type:"textarea",rows:5,modelValue:v(g).prompt,"onUpdate:modelValue":m[0]||(m[0]=b=>v(g).prompt=b),placeholder:"请输入提示词，如：每个分块不得超过100个字，分块不要输出标签"},null,8,["modelValue"])):V("",!0),v(y)=="quick"?(o(),S(Oe,{key:1})):V("",!0)])}}}),Ne=W(Me,[["__scopeId","data-v-6b8c91a6"]]),Le={class:"segment-preview"},Re={class:"px-[10px]"},Xe={class:"mr-auto text-ellipsis overflow-hidden text-sm"},Ae={class:"cl-comm__icon border-0 overflow-hidden !bg-transparent"},Ge={class:"preview flex h-full"},Je={key:0,class:"h-full overflow-hidden border-r border-[var(--el-border-color-lighter)] flex-1"},je={class:"p-[10px]"},He={class:"h-full overflow-hidden flex-1"},Ke={class:"p-[10px] list"},We={key:0,class:"absolute top-[10px] right-[10px] flex gap-2"},Ze=["onClick"],Qe=["onClick"],Ye=E({name:"undefined"}),et=E({...Ye,props:{editable:Boolean},setup(q){const k=q,{refs:T,setRefs:p}=ee(),g=Z(),y=H(()=>k.editable?ae(g.list):g.list),{ViewGroup:d}=Se({title:"预览",label:"文档列表",service:{async page(){return{list:y.value,pagination:{total:y.value.length,page:1}}},async delete({ids:a}){a.forEach(e=>{const x=y.value.findIndex(b=>b.id==e);x!=-1&&y.value.splice(x,1)})}},enableAdd:!1,enableKeySearch:!1,enableRefresh:!1,enableContextMenu:k.editable,onContextMenu(a){return{list:[{label:"编辑",callback(e){w(a),e()}},{label:"删除",callback(e){r(a),e()}}]}}}),C=H(()=>{var a;return(a=d.value)==null?void 0:a.selected});function r(a){var e;(e=d.value)==null||e.remove(a)}async function m(a){if(!k.editable)return Promise.all(y.value.filter(e=>a?e.id==a.id:!0).map(async e=>{e.isLoading=!!e.data,e.data&&(await e.data().catch(()=>{e.isError=!0}),e.isLoading=!1)})).then(()=>{}).catch(e=>{Y.error(e.message)})}function w(a){T.nameForm.open({title:"编辑名称",width:"500px",form:{name:a.name},items:[{label:"名称",prop:"name",component:{name:"el-input",props:{type:"textarea",rows:5,maxlength:100,"show-word-limit":!0}},required:!0}],on:{submit(e,{close:x}){Q(a,e),x()}}})}function h(a){T.contentForm.open({title:"编辑内容",form:{content:a.content},items:[{label:"内容",prop:"content",component:{name:"cl-editor-md"},required:!0}],on:{submit(e,{close:x}){Q(a,e),x()}}})}return se(()=>{m()}),(a,e)=>{const x=i("cl-svg"),b=i("el-tooltip"),P=i("cl-preview-md"),$=i("el-scrollbar"),B=i("el-empty"),c=i("cl-view-group"),n=i("cl-form");return o(),f("div",Le,[t(c,{ref_key:"ViewGroup",ref:d},{item:s(({item:_,selected:z})=>[l("div",Re,[l("div",{class:K(["flex items-center gap-2 px-[10px] pr-[6px] h-[36px] border border-[var(--el-border-color)] rounded-[6px] mb-[10px] last-child:mb-0 cursor-pointer hover:bg-[var(--el-fill-color-lighter)] text-[var(--el-text-color-regular)]",{"bg-[var(--el-fill-color-light)] !text-[var(--el-text-color-primary)]":(z==null?void 0:z.id)==_.id&&_.id,"!text-[var(--el-text-color-secondary)]":_.isLoading}])},[l("span",Xe,U(_.name),1),l("div",Ae,[_.isError?(o(),S(b,{key:0,content:"重新加载"},{default:s(()=>[t(x,{name:"refresh",onClick:M=>m(_)},null,8,["onClick"])]),_:2},1024)):_.isLoading?(o(),S(x,{key:1,name:"refresh",class:"animate-spin"})):_.isUpdating?(o(),S(x,{key:2,name:"know-upload",class:"animate-upload"})):q.editable?(o(),S(x,{key:3,name:"delete",onClick:M=>r(_)},null,8,["onClick"])):V("",!0)])],2)])]),right:s(()=>[l("div",Ge,[v(g).form.from==0?(o(),f("div",Je,[t($,null,{default:s(()=>{var _;return[l("div",je,[t(P,{content:(_=C.value)==null?void 0:_.content},null,8,["content"])])]}),_:1})])):V("",!0),l("div",He,[t($,null,{default:s(()=>{var _,z;return[l("div",Ke,[(o(!0),f(D,null,R((_=C.value)==null?void 0:_.list,(M,A)=>(o(),f("div",{class:"item relative",key:A},[t(P,{content:M.content},null,8,["content"]),q.editable?(o(),f("div",We,[l("div",{class:"cl-comm__icon",onClick:()=>{var I,N;(N=(I=C.value)==null?void 0:I.list)==null||N.splice(A,1)}},[t(x,{name:"delete"})],8,Ze),l("div",{class:"cl-comm__icon",onClick:I=>h(M)},[t(x,{name:"edit"})],8,Qe)])):V("",!0)]))),128))]),v(X)((z=C.value)==null?void 0:z.list)?(o(),S(B,{key:0,"image-size":80,description:"暂无内容"})):V("",!0)]}),_:1})])])]),_:1},512),t(n,{ref:v(p)("contentForm")},null,512),t(n,{ref:v(p)("nameForm")},null,512)])}}}),ne=W(et,[["__scopeId","data-v-5bd4f2df"]]),tt={class:"page h-full"},ot={class:"p-[10px] pb-0"},lt={class:"h-[calc(100%-50px)]"},nt={class:"p-[20px] pb-[50px]"},at={class:"step"},st={class:"index"},rt={key:1},it={class:"label"},ct={class:"warp"},ut={class:"know-select-btn mb-[20px]"},dt=["onClick"],pt={class:"flex-1"},mt={key:0,class:"form-input"},_t={key:1,class:"form-file"},ft={class:"dragger"},vt={key:0,class:"list"},yt={class:"name"},kt={class:"size"},ht=["onClick"],xt=["onClick"],gt={key:2,class:"form-url"},bt={class:"flex gap-2"},wt={key:0,class:"mt-[20px] border border-[var(--el-border-color)] rounded-[12px]"},Vt={class:"p-3 flex flex-col gap-2"},Ct=["onClick"],$t={class:"flex items-center justify-end mt-[30px] sticky bottom-[10px]"},St={key:0,class:"text-[14px] text-[var(--el-text-color-secondary)] mr-[10px]"},zt=E({name:"undefined"}),Ut=E({...zt,name:"know-data-add",setup(q){const{refs:k,setRefs:T,router:p,service:g}=ee(),y=Z(),{form:d}=y,C=re(),r=j(0),m=L({from:[{label:"自定义文本",desc:"手动输入一段文本作为数据集",value:0,type:"info",icon:"know-edit"},{label:"本地文件",desc:"上传 PDF、TXT、DOCX、MD 等格式的文件",value:1,type:"success",icon:"know-file"},{label:"网页链接",desc:"读取静态网页内容作为数据集",value:2,icon:"know-url"}],step:[{label:"选择类型",value:0},{label:"创建设置",value:1},{label:"分段预览",value:2}]}),w=H(()=>be(m.step).value),h=L({title:"",content:"",async next(){r.value==1&&await y.create([{name:h.title,content:h.content}])},clear(){h.title="",h.content=""}}),a=L({list:[],add(c){const{type:n,color:_}=he(c.type);return a.list.push({name:c.name,size:xe(c.size),type:n,color:_,file:c}),!1},edit(c){k.editFile.open({title:"编辑",width:"500px",form:{name:c.name},op:{saveButtonText:"确认"},items:[{label:"文件名称",prop:"name",required:!0,component:{name:"el-input",props:{type:"textarea",rows:5,maxlength:100,"show-word-limit":!0}}}],on:{submit(n,{close:_}){c.name=n.name,_()}}})},remove(c){a.list.splice(c,1)},clear(){a.list=[]},async next(){r.value==1&&await y.create(a.list)}}),e=L({type:1,value:"",loading:!1,list:[],onTypeChange(){e.value="",e.list=[]},remove(c){e.list.splice(c,1)},search:we(()=>{if(e.loading){e.stop();return}if(!/^(http|https):\/\//.test(e.value)){Y.error("请输入正确的链接");return}e.list=[],e.loading=!0,C.invoke({url:"/admin/know/loader/parseUrl",data:{link:e.value},cb:c=>{if(c.isEnd){e.loading=!1;return}e.list.push({name:c.title,url:c.url})}})},300),stop(){e.loading=!1,C.cancel()},clear(){e.list=[],e.value="",e.type=1,e.loading=!1},async next(){r.value==0&&e.type==1&&(e.list=[{name:"",url:e.value}]),r.value==1&&(await Promise.all(e.list.map(async c=>{var n,_;if(!c.name){const z=await g.know.loader.link({link:c.url});c.name=(_=(n=z[0])==null?void 0:n.metadata)==null?void 0:_.title}})),await y.create(e.list))}}),x=H(()=>{if(r.value==0)switch(d.from){case 0:return h.title&&h.content;case 1:return!X(a.list);case 2:return e.type==1?e.value:!X(e.list);default:return!1}else if(r.value==1&&d.type=="quick"&&(!d.chunkSize||!d.chunkOverlap||!d.separator))return!1;return!0}),b=j(!1);async function P(){var c,n;r.value==w.value?(p.back(),setTimeout(()=>{B(!1)},300)):(b.value=!0,await((n=(c=[h,a,e][d.from])==null?void 0:c.next())==null?void 0:n.then(()=>{r.value<w.value&&r.value++}).catch(_=>{Y.error(_.message)})),b.value=!1)}function $(){r.value--}function B(c=!0){const n=()=>{r.value=0,y.clear(),h.clear(),a.clear(),e.clear()};c?ze.confirm("确定要重置吗？","提示",{type:"warning"}).then(()=>{n()}).catch(()=>{}):n()}return se(()=>{B(!1)}),(c,n)=>{const _=i("cl-view-head"),z=i("cl-svg"),M=i("el-col"),A=i("el-row"),I=i("el-text"),N=i("el-input"),te=i("el-form-item"),ie=i("cl-editor-md"),ce=i("el-icon"),ue=i("cl-upload"),oe=i("el-radio-button"),de=i("el-radio-group"),G=i("el-button"),pe=i("el-empty"),le=i("el-scrollbar"),me=i("el-form"),_e=i("cl-form");return o(),f("div",tt,[l("div",ot,[t(_)]),l("div",lt,[t(le,null,{default:s(()=>[l("div",nt,[l("div",at,[(o(!0),f(D,null,R(m.step,(u,F)=>(o(),f("div",{class:K(["step-item",{active:r.value>=F}]),key:F},[l("div",st,[r.value>=F?(o(),S(z,{key:0,name:"know-success"})):(o(),f("span",rt,U(F+1),1))]),l("div",it,U(u.label),1)],2))),128))]),l("div",ct,[t(me,{class:"mt-[30px]","label-position":"top","require-asterisk-position":"right"},{default:s(()=>[r.value==0?(o(),f(D,{key:0},[l("div",ut,[t(A,{gutter:12},{default:s(()=>[(o(!0),f(D,null,R(m.from,u=>(o(),S(M,{xs:24,sm:8,key:u.value},{default:s(()=>[l("div",{class:K(["item",{active:v(d).from==u.value}]),onClick:()=>{v(d).from=u.value}},[t(z,{class:"icon",name:u.icon},null,8,["name"]),l("div",pt,[l("p",null,U(u.label),1),l("p",null,U(u.desc),1)])],10,dt)]),_:2},1024))),128))]),_:1})]),v(d).from==0?(o(),f("div",mt,[t(te,{label:"文档名称",required:""},{default:s(()=>[t(N,{modelValue:h.title,"onUpdate:modelValue":n[0]||(n[0]=u=>h.title=u),placeholder:"请输入文档名称",class:"mb-[10px]",maxlength:"100"},{suffix:s(()=>[t(I,null,{default:s(()=>[O(U(h.title.length)+" / 100",1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(te,{label:"文档内容",required:""},{default:s(()=>[t(ie,{modelValue:h.content,"onUpdate:modelValue":n[1]||(n[1]=u=>h.content=u),"enable-preview":!1},null,8,["modelValue"])]),_:1})])):V("",!0),v(d).from==1?(o(),f("div",_t,[t(ue,{drag:"",size:[200,"100%"],multiple:"","auto-upload":!1,beforeUpload:a.add,accept:".txt, .pdf, .md, .csv,.docx,.xlsx,.pptx","limit-size":15},{default:s(()=>[l("div",ft,[t(ce,{size:40},{default:s(()=>[t(v(Ve))]),_:1}),t(I,null,{default:s(()=>n[6]||(n[6]=[O("点击上传或将文件拖动到此处")])),_:1,__:[6]}),t(I,{size:"small",type:"info"},{default:s(()=>n[7]||(n[7]=[O(" 支持 TXT、PDF、MD、CSV、DOCX、XLSX、PPTX 等格式，每个文件不超过15M ")])),_:1,__:[7]})])]),_:1},8,["beforeUpload"]),v(X)(a.list)?V("",!0):(o(),f("div",vt,[(o(!0),f(D,null,R(a.list,(u,F)=>(o(),f("div",{class:"item",key:F},[t(z,{name:"upload-"+u.type,color:u.color,class:"text-[26px] mr-[10px] ml-[5px]"},null,8,["name","color"]),l("div",null,[l("p",yt,U(u.name),1),l("p",kt,U(u.size),1)]),l("div",{class:"cl-comm__icon ml-auto mr-[10px]",onClick:J=>a.edit(u)},[t(z,{name:"edit"})],8,ht),l("div",{class:"cl-comm__icon",onClick:J=>a.remove(F)},[t(z,{name:"delete"})],8,xt)]))),128))]))])):V("",!0),v(d).from==2?(o(),f("div",gt,[l("div",bt,[t(de,{modelValue:e.type,"onUpdate:modelValue":n[2]||(n[2]=u=>e.type=u),onChange:e.onTypeChange},{default:s(()=>[t(oe,{value:1},{default:s(()=>n[8]||(n[8]=[O("单个添加")])),_:1,__:[8]}),t(oe,{value:2},{default:s(()=>n[9]||(n[9]=[O("批量添加")])),_:1,__:[9]})]),_:1},8,["modelValue","onChange"]),t(N,{modelValue:e.value,"onUpdate:modelValue":n[3]||(n[3]=u=>e.value=u),placeholder:"请输入链接：",class:"flex-1"},null,8,["modelValue"]),e.type==2?(o(),S(G,{key:0,type:e.loading?"danger":"primary",onClick:e.search},$e({default:s(()=>[O(" "+U(e.loading?"停止":"导入"),1)]),_:2},[e.loading?{name:"icon",fn:s(()=>[t(z,{name:"refresh",class:"animate-spin"})]),key:"0"}:void 0]),1032,["type","onClick"])):V("",!0)]),e.type==2?(o(),f("div",wt,[t(le,{"max-height":"40vh"},{default:s(()=>[v(X)(e.list)?(o(),S(pe,{key:0,description:"暂无数据","image-size":80})):V("",!0),l("div",Vt,[(o(!0),f(D,null,R(e.list,(u,F)=>(o(),f("div",{class:"flex items-center gap-3",key:F},[t(N,{readonly:"",modelValue:u.name,"onUpdate:modelValue":J=>u.name=J},null,8,["modelValue","onUpdate:modelValue"]),l("div",{class:"cl-comm__icon",onClick:J=>e.remove(F)},[t(z,{name:"delete"})],8,Ct)]))),128))])]),_:1})])):V("",!0)])):V("",!0)],64)):V("",!0),r.value==1?(o(),S(Ne,{key:1,modelValue:v(d).type,"onUpdate:modelValue":n[4]||(n[4]=u=>v(d).type=u)},null,8,["modelValue"])):V("",!0),r.value==2?(o(),S(ne,{key:2,class:"h-[60vh]"})):V("",!0),r.value==3?(o(),S(ne,{key:3,class:"h-[60vh]",editable:""})):V("",!0),l("div",$t,[r.value==w.value?(o(),f("span",St," 点击确认、关闭页面不影响数据处理 ")):(o(),f(D,{key:1},[b.value?V("",!0):(o(),f(D,{key:0},[t(G,{type:"info",onClick:n[5]||(n[5]=u=>B())},{default:s(()=>n[10]||(n[10]=[O("重置")])),_:1,__:[10]}),r.value>0?(o(),S(G,{key:0,onClick:$},{default:s(()=>n[11]||(n[11]=[O(" 上一步 ")])),_:1,__:[11]})):V("",!0)],64))],64)),t(G,{type:"primary",disabled:!x.value,loading:b.value,onClick:P},{default:s(()=>[O(U(r.value==w.value?"确定":"下一步"),1)]),_:1},8,["disabled","loading"])])]),_:1})])])]),_:1})]),t(_e,{ref:v(T)("editFile")},null,512)])}}}),So=W(Ut,[["__scopeId","data-v-e095b8ec"]]);export{So as default};
