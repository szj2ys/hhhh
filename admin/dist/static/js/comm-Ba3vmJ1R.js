import{r as yr,v as ee}from"./@vue_runtime-dom@3.5.16-DriBzn4z.js";import{a as _r,t as wr,b as Tr,m as Wt,f as Kt,c as Xe,d as xr,e as Sr,s as Ye,g as Cr,r as $r}from"./@element-plus_icons-vue@2.3.1_vue@3.5.16_typescript@5.5.4_-CeLFb4Nw.js";import{E as qt,a as $e,b as Or}from"./element-plus@2.9.11_vue@3.5.16_typescript@5.5.4_-BTKo5Rtv.js";import{w as re,n as ie,g as je,l as D,d as R,e as Ue,i as g,P as C,E as se,C as ce,f as Pn,U as X,v as Ot,V as En,W as Ar,X as Fe,Y as Pr,G as Er,O as ve}from"./@vue_runtime-core@3.5.16-Cn8z-kNe.js";import{v as A,u as te,l as Je,F as jr,a as Fr,D as Mr}from"./@vue_reactivity@3.5.16-Dqy0TPbS.js";var Ir=Object.defineProperty,Lr=(e,t,n)=>t in e?Ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jn=(e,t,n)=>Lr(e,typeof t!="symbol"?t+"":t,n),Fn=typeof global=="object"&&global&&global.Object===Object&&global,zr=typeof self=="object"&&self&&self.Object===Object&&self,ae=Fn||zr||Function("return this")(),ne=ae.Symbol,Mn=Object.prototype,Dr=Mn.hasOwnProperty,Br=Mn.toString,Ie=ne?ne.toStringTag:void 0;function Rr(e){var t=Dr.call(e,Ie),n=e[Ie];try{e[Ie]=void 0;var r=!0}catch{}var o=Br.call(e);return r&&(t?e[Ie]=n:delete e[Ie]),o}var Nr=Object.prototype,Hr=Nr.toString;function Ur(e){return Hr.call(e)}var Gr="[object Null]",Vr="[object Undefined]",Xt=ne?ne.toStringTag:void 0;function ue(e){return e==null?e===void 0?Vr:Gr:Xt&&Xt in Object(e)?Rr(e):Ur(e)}function J(e){return e!=null&&typeof e=="object"}var kr="[object Symbol]";function Oe(e){return typeof e=="symbol"||J(e)&&ue(e)==kr}function ze(e,t){for(var n=-1,r=e==null?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}var E=Array.isArray,Yt=ne?ne.prototype:void 0,Jt=Yt?Yt.toString:void 0;function In(e){if(typeof e=="string")return e;if(E(e))return ze(e,In)+"";if(Oe(e))return Jt?Jt.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var Wr=/\s/;function Kr(e){for(var t=e.length;t--&&Wr.test(e.charAt(t)););return t}var qr=/^\s+/;function Xr(e){return e&&e.slice(0,Kr(e)+1).replace(qr,"")}function Y(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Zt=NaN,Yr=/^[-+]0x[0-9a-f]+$/i,Jr=/^0b[01]+$/i,Zr=/^0o[0-7]+$/i,Qr=parseInt;function Qt(e){if(typeof e=="number")return e;if(Oe(e))return Zt;if(Y(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Y(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Xr(e);var n=Jr.test(e);return n||Zr.test(e)?Qr(e.slice(2),n?2:8):Yr.test(e)?Zt:+e}function nt(e){return e}var eo="[object AsyncFunction]",to="[object Function]",no="[object GeneratorFunction]",ro="[object Proxy]";function Z(e){if(!Y(e))return!1;var t=ue(e);return t==to||t==no||t==eo||t==ro}var ct=ae["__core-js_shared__"],en=function(){var e=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function oo(e){return!!en&&en in e}var io=Function.prototype,ao=io.toString;function Se(e){if(e!=null){try{return ao.call(e)}catch{}try{return e+""}catch{}}return""}var lo=/[\\^$.*+?()[\]{}|]/g,so=/^\[object .+?Constructor\]$/,co=Function.prototype,uo=Object.prototype,fo=co.toString,po=uo.hasOwnProperty,ho=RegExp("^"+fo.call(po).replace(lo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function go(e){if(!Y(e)||oo(e))return!1;var t=Z(e)?ho:so;return t.test(Se(e))}function mo(e,t){return e==null?void 0:e[t]}function Ce(e,t){var n=mo(e,t);return go(n)?n:void 0}var vt=Ce(ae,"WeakMap"),tn=Object.create,vo=function(){function e(){}return function(t){if(!Y(t))return{};if(tn)return tn(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function bo(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function yo(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var _o=800,wo=16,To=Date.now;function xo(e){var t=0,n=0;return function(){var r=To(),o=wo-(r-n);if(n=r,o>0){if(++t>=_o)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function So(e){return function(){return e}}var Ze=function(){try{var e=Ce(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Co=Ze?function(e,t){return Ze(e,"toString",{configurable:!0,enumerable:!1,value:So(t),writable:!0})}:nt,$o=xo(Co);function Oo(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Ao=9007199254740991,Po=/^(?:0|[1-9]\d*)$/;function At(e,t){var n=typeof e;return t=t??Ao,!!t&&(n=="number"||n!="symbol"&&Po.test(e))&&e>-1&&e%1==0&&e<t}function Pt(e,t,n){t=="__proto__"&&Ze?Ze(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ge(e,t){return e===t||e!==e&&t!==t}var Eo=Object.prototype,jo=Eo.hasOwnProperty;function Et(e,t,n){var r=e[t];(!(jo.call(e,t)&&Ge(r,n))||n===void 0&&!(t in e))&&Pt(e,t,n)}function Ln(e,t,n,r){var o=!n;n||(n={});for(var i=-1,a=t.length;++i<a;){var s=t[i],c=void 0;c===void 0&&(c=e[s]),o?Pt(n,s,c):Et(n,s,c)}return n}var nn=Math.max;function Fo(e,t,n){return t=nn(t===void 0?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=nn(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),bo(e,this,s)}}function Mo(e,t){return $o(Fo(e,t,nt),e+"")}var Io=9007199254740991;function jt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Io}function ye(e){return e!=null&&jt(e.length)&&!Z(e)}function Lo(e,t,n){if(!Y(n))return!1;var r=typeof t;return(r=="number"?ye(n)&&At(t,n.length):r=="string"&&t in n)?Ge(n[t],e):!1}function zn(e){return Mo(function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(o--,i):void 0,a&&Lo(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t})}var zo=Object.prototype;function Ve(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||zo;return e===n}function Do(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Bo="[object Arguments]";function rn(e){return J(e)&&ue(e)==Bo}var Dn=Object.prototype,Ro=Dn.hasOwnProperty,No=Dn.propertyIsEnumerable,Ae=rn(function(){return arguments}())?rn:function(e){return J(e)&&Ro.call(e,"callee")&&!No.call(e,"callee")};function Ho(){return!1}var Bn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,on=Bn&&typeof module=="object"&&module&&!module.nodeType&&module,Uo=on&&on.exports===Bn,an=Uo?ae.Buffer:void 0,Go=an?an.isBuffer:void 0,Pe=Go||Ho,Vo="[object Arguments]",ko="[object Array]",Wo="[object Boolean]",Ko="[object Date]",qo="[object Error]",Xo="[object Function]",Yo="[object Map]",Jo="[object Number]",Zo="[object Object]",Qo="[object RegExp]",ei="[object Set]",ti="[object String]",ni="[object WeakMap]",ri="[object ArrayBuffer]",oi="[object DataView]",ii="[object Float32Array]",ai="[object Float64Array]",li="[object Int8Array]",si="[object Int16Array]",ci="[object Int32Array]",ui="[object Uint8Array]",fi="[object Uint8ClampedArray]",di="[object Uint16Array]",pi="[object Uint32Array]",I={};I[ii]=I[ai]=I[li]=I[si]=I[ci]=I[ui]=I[fi]=I[di]=I[pi]=!0;I[Vo]=I[ko]=I[ri]=I[Wo]=I[oi]=I[Ko]=I[qo]=I[Xo]=I[Yo]=I[Jo]=I[Zo]=I[Qo]=I[ei]=I[ti]=I[ni]=!1;function hi(e){return J(e)&&jt(e.length)&&!!I[ue(e)]}function rt(e){return function(t){return e(t)}}var Rn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,De=Rn&&typeof module=="object"&&module&&!module.nodeType&&module,gi=De&&De.exports===Rn,ut=gi&&Fn.process,Ee=function(){try{var e=De&&De.require&&De.require("util").types;return e||ut&&ut.binding&&ut.binding("util")}catch{}}(),ln=Ee&&Ee.isTypedArray,ot=ln?rt(ln):hi,mi=Object.prototype,vi=mi.hasOwnProperty;function Nn(e,t){var n=E(e),r=!n&&Ae(e),o=!n&&!r&&Pe(e),i=!n&&!r&&!o&&ot(e),a=n||r||o||i,s=a?Do(e.length,String):[],c=s.length;for(var l in e)(t||vi.call(e,l))&&!(a&&(l=="length"||o&&(l=="offset"||l=="parent")||i&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||At(l,c)))&&s.push(l);return s}function Hn(e,t){return function(n){return e(t(n))}}var bi=Hn(Object.keys,Object),yi=Object.prototype,_i=yi.hasOwnProperty;function Un(e){if(!Ve(e))return bi(e);var t=[];for(var n in Object(e))_i.call(e,n)&&n!="constructor"&&t.push(n);return t}function ke(e){return ye(e)?Nn(e):Un(e)}var wi=Object.prototype,Ti=wi.hasOwnProperty,be=zn(function(e,t){if(Ve(t)||ye(t)){Ln(t,ke(t),e);return}for(var n in t)Ti.call(t,n)&&Et(e,n,t[n])});function xi(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Si=Object.prototype,Ci=Si.hasOwnProperty;function $i(e){if(!Y(e))return xi(e);var t=Ve(e),n=[];for(var r in e)r=="constructor"&&(t||!Ci.call(e,r))||n.push(r);return n}function Gn(e){return ye(e)?Nn(e,!0):$i(e)}var Oi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ai=/^\w*$/;function Ft(e,t){if(E(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Oe(e)?!0:Ai.test(e)||!Oi.test(e)||t!=null&&e in Object(t)}var Be=Ce(Object,"create");function Pi(){this.__data__=Be?Be(null):{},this.size=0}function Ei(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ji="__lodash_hash_undefined__",Fi=Object.prototype,Mi=Fi.hasOwnProperty;function Ii(e){var t=this.__data__;if(Be){var n=t[e];return n===ji?void 0:n}return Mi.call(t,e)?t[e]:void 0}var Li=Object.prototype,zi=Li.hasOwnProperty;function Di(e){var t=this.__data__;return Be?t[e]!==void 0:zi.call(t,e)}var Bi="__lodash_hash_undefined__";function Ri(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Be&&t===void 0?Bi:t,this}function Te(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Te.prototype.clear=Pi;Te.prototype.delete=Ei;Te.prototype.get=Ii;Te.prototype.has=Di;Te.prototype.set=Ri;function Ni(){this.__data__=[],this.size=0}function it(e,t){for(var n=e.length;n--;)if(Ge(e[n][0],t))return n;return-1}var Hi=Array.prototype,Ui=Hi.splice;function Gi(e){var t=this.__data__,n=it(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Ui.call(t,n,1),--this.size,!0}function Vi(e){var t=this.__data__,n=it(t,e);return n<0?void 0:t[n][1]}function ki(e){return it(this.__data__,e)>-1}function Wi(e,t){var n=this.__data__,r=it(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function de(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}de.prototype.clear=Ni;de.prototype.delete=Gi;de.prototype.get=Vi;de.prototype.has=ki;de.prototype.set=Wi;var Re=Ce(ae,"Map");function Ki(){this.size=0,this.__data__={hash:new Te,map:new(Re||de),string:new Te}}function qi(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function at(e,t){var n=e.__data__;return qi(t)?n[typeof t=="string"?"string":"hash"]:n.map}function Xi(e){var t=at(this,e).delete(e);return this.size-=t?1:0,t}function Yi(e){return at(this,e).get(e)}function Ji(e){return at(this,e).has(e)}function Zi(e,t){var n=at(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function pe(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pe.prototype.clear=Ki;pe.prototype.delete=Xi;pe.prototype.get=Yi;pe.prototype.has=Ji;pe.prototype.set=Zi;var Qi="Expected a function";function Mt(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Qi);var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(Mt.Cache||pe),n}Mt.Cache=pe;var ea=500;function ta(e){var t=Mt(e,function(r){return n.size===ea&&n.clear(),r}),n=t.cache;return t}var na=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ra=/\\(\\)?/g,oa=ta(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(na,function(n,r,o,i){t.push(o?i.replace(ra,"$1"):r||n)}),t});function ia(e){return e==null?"":In(e)}function Vn(e,t){return E(e)?e:Ft(e,t)?[e]:oa(ia(e))}function lt(e){if(typeof e=="string"||Oe(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function It(e,t){t=Vn(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[lt(t[n++])];return n&&n==r?e:void 0}function aa(e,t,n){var r=e==null?void 0:It(e,t);return r===void 0?n:r}function kn(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}var sn=ne?ne.isConcatSpreadable:void 0;function la(e){return E(e)||Ae(e)||!!(sn&&e&&e[sn])}function sa(e,t,n,r,o){var i=-1,a=e.length;for(n||(n=la),o||(o=[]);++i<a;){var s=e[i];n(s)?kn(o,s):o[o.length]=s}return o}var Wn=Hn(Object.getPrototypeOf,Object),ca="[object Object]",ua=Function.prototype,fa=Object.prototype,Kn=ua.toString,da=fa.hasOwnProperty,pa=Kn.call(Object);function ha(e){if(!J(e)||ue(e)!=ca)return!1;var t=Wn(e);if(t===null)return!0;var n=da.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Kn.call(n)==pa}function ga(){this.__data__=new de,this.size=0}function ma(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function va(e){return this.__data__.get(e)}function ba(e){return this.__data__.has(e)}var ya=200;function _a(e,t){var n=this.__data__;if(n instanceof de){var r=n.__data__;if(!Re||r.length<ya-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new pe(r)}return n.set(e,t),this.size=n.size,this}function oe(e){var t=this.__data__=new de(e);this.size=t.size}oe.prototype.clear=ga;oe.prototype.delete=ma;oe.prototype.get=va;oe.prototype.has=ba;oe.prototype.set=_a;var qn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cn=qn&&typeof module=="object"&&module&&!module.nodeType&&module,wa=cn&&cn.exports===qn,un=wa?ae.Buffer:void 0,fn=un?un.allocUnsafe:void 0;function Xn(e,t){if(t)return e.slice();var n=e.length,r=fn?fn(n):new e.constructor(n);return e.copy(r),r}function Ta(e,t){for(var n=-1,r=e==null?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i}function xa(){return[]}var Sa=Object.prototype,Ca=Sa.propertyIsEnumerable,dn=Object.getOwnPropertySymbols,$a=dn?function(e){return e==null?[]:(e=Object(e),Ta(dn(e),function(t){return Ca.call(e,t)}))}:xa;function Oa(e,t,n){var r=t(e);return E(e)?r:kn(r,n(e))}function bt(e){return Oa(e,ke,$a)}var yt=Ce(ae,"DataView"),_t=Ce(ae,"Promise"),wt=Ce(ae,"Set"),pn="[object Map]",Aa="[object Object]",hn="[object Promise]",gn="[object Set]",mn="[object WeakMap]",vn="[object DataView]",Pa=Se(yt),Ea=Se(Re),ja=Se(_t),Fa=Se(wt),Ma=Se(vt),Q=ue;(yt&&Q(new yt(new ArrayBuffer(1)))!=vn||Re&&Q(new Re)!=pn||_t&&Q(_t.resolve())!=hn||wt&&Q(new wt)!=gn||vt&&Q(new vt)!=mn)&&(Q=function(e){var t=ue(e),n=t==Aa?e.constructor:void 0,r=n?Se(n):"";if(r)switch(r){case Pa:return vn;case Ea:return pn;case ja:return hn;case Fa:return gn;case Ma:return mn}return t});var Ia=Object.prototype,La=Ia.hasOwnProperty;function za(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&La.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Qe=ae.Uint8Array;function Lt(e){var t=new e.constructor(e.byteLength);return new Qe(t).set(new Qe(e)),t}function Da(e,t){var n=Lt(e.buffer);return new e.constructor(n,e.byteOffset,e.byteLength)}var Ba=/\w*$/;function Ra(e){var t=new e.constructor(e.source,Ba.exec(e));return t.lastIndex=e.lastIndex,t}var bn=ne?ne.prototype:void 0,yn=bn?bn.valueOf:void 0;function Na(e){return yn?Object(yn.call(e)):{}}function Yn(e,t){var n=t?Lt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Ha="[object Boolean]",Ua="[object Date]",Ga="[object Map]",Va="[object Number]",ka="[object RegExp]",Wa="[object Set]",Ka="[object String]",qa="[object Symbol]",Xa="[object ArrayBuffer]",Ya="[object DataView]",Ja="[object Float32Array]",Za="[object Float64Array]",Qa="[object Int8Array]",el="[object Int16Array]",tl="[object Int32Array]",nl="[object Uint8Array]",rl="[object Uint8ClampedArray]",ol="[object Uint16Array]",il="[object Uint32Array]";function al(e,t,n){var r=e.constructor;switch(t){case Xa:return Lt(e);case Ha:case Ua:return new r(+e);case Ya:return Da(e);case Ja:case Za:case Qa:case el:case tl:case nl:case rl:case ol:case il:return Yn(e,n);case Ga:return new r;case Va:case Ka:return new r(e);case ka:return Ra(e);case Wa:return new r;case qa:return Na(e)}}function Jn(e){return typeof e.constructor=="function"&&!Ve(e)?vo(Wn(e)):{}}var ll="[object Map]";function sl(e){return J(e)&&Q(e)==ll}var _n=Ee&&Ee.isMap,cl=_n?rt(_n):sl,ul="[object Set]";function fl(e){return J(e)&&Q(e)==ul}var wn=Ee&&Ee.isSet,dl=wn?rt(wn):fl,pl=1,Zn="[object Arguments]",hl="[object Array]",gl="[object Boolean]",ml="[object Date]",vl="[object Error]",Qn="[object Function]",bl="[object GeneratorFunction]",yl="[object Map]",_l="[object Number]",er="[object Object]",wl="[object RegExp]",Tl="[object Set]",xl="[object String]",Sl="[object Symbol]",Cl="[object WeakMap]",$l="[object ArrayBuffer]",Ol="[object DataView]",Al="[object Float32Array]",Pl="[object Float64Array]",El="[object Int8Array]",jl="[object Int16Array]",Fl="[object Int32Array]",Ml="[object Uint8Array]",Il="[object Uint8ClampedArray]",Ll="[object Uint16Array]",zl="[object Uint32Array]",M={};M[Zn]=M[hl]=M[$l]=M[Ol]=M[gl]=M[ml]=M[Al]=M[Pl]=M[El]=M[jl]=M[Fl]=M[yl]=M[_l]=M[er]=M[wl]=M[Tl]=M[xl]=M[Sl]=M[Ml]=M[Il]=M[Ll]=M[zl]=!0;M[vl]=M[Qn]=M[Cl]=!1;function qe(e,t,n,r,o,i){var a,s=t&pl;if(a!==void 0)return a;if(!Y(e))return e;var c=E(e);if(c)a=za(e);else{var l=Q(e),u=l==Qn||l==bl;if(Pe(e))return Xn(e,s);if(l==er||l==Zn||u&&!o)a=u?{}:Jn(e);else{if(!M[l])return o?e:{};a=al(e,l,s)}}i||(i=new oe);var d=i.get(e);if(d)return d;i.set(e,a),dl(e)?e.forEach(function(x){a.add(qe(x,t,n,x,e,i))}):cl(e)&&e.forEach(function(x,f){a.set(f,qe(x,t,n,f,e,i))});var h=bt,p=c?void 0:h(e);return Oo(p||e,function(x,f){p&&(f=x,x=e[f]),Et(a,f,qe(x,t,n,f,e,i))}),a}var Dl=1,Bl=4;function he(e){return qe(e,Dl|Bl)}var Rl="__lodash_hash_undefined__";function Nl(e){return this.__data__.set(e,Rl),this}function Hl(e){return this.__data__.has(e)}function et(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new pe;++t<n;)this.add(e[t])}et.prototype.add=et.prototype.push=Nl;et.prototype.has=Hl;function Ul(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Gl(e,t){return e.has(t)}var Vl=1,kl=2;function tr(e,t,n,r,o,i){var a=n&Vl,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var l=i.get(e),u=i.get(t);if(l&&u)return l==t&&u==e;var d=-1,h=!0,p=n&kl?new et:void 0;for(i.set(e,t),i.set(t,e);++d<s;){var x=e[d],f=t[d];if(r)var m=a?r(f,x,d,t,e,i):r(x,f,d,e,t,i);if(m!==void 0){if(m)continue;h=!1;break}if(p){if(!Ul(t,function(w,T){if(!Gl(p,T)&&(x===w||o(x,w,n,r,i)))return p.push(T)})){h=!1;break}}else if(!(x===f||o(x,f,n,r,i))){h=!1;break}}return i.delete(e),i.delete(t),h}function Wl(e){var t=-1,n=Array(e.size);return e.forEach(function(r,o){n[++t]=[o,r]}),n}function Kl(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var ql=1,Xl=2,Yl="[object Boolean]",Jl="[object Date]",Zl="[object Error]",Ql="[object Map]",es="[object Number]",ts="[object RegExp]",ns="[object Set]",rs="[object String]",os="[object Symbol]",is="[object ArrayBuffer]",as="[object DataView]",Tn=ne?ne.prototype:void 0,ft=Tn?Tn.valueOf:void 0;function ls(e,t,n,r,o,i,a){switch(n){case as:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case is:return!(e.byteLength!=t.byteLength||!i(new Qe(e),new Qe(t)));case Yl:case Jl:case es:return Ge(+e,+t);case Zl:return e.name==t.name&&e.message==t.message;case ts:case rs:return e==t+"";case Ql:var s=Wl;case ns:var c=r&ql;if(s||(s=Kl),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;r|=Xl,a.set(e,t);var u=tr(s(e),s(t),r,o,i,a);return a.delete(e),u;case os:if(ft)return ft.call(e)==ft.call(t)}return!1}var ss=1,cs=Object.prototype,us=cs.hasOwnProperty;function fs(e,t,n,r,o,i){var a=n&ss,s=bt(e),c=s.length,l=bt(t),u=l.length;if(c!=u&&!a)return!1;for(var d=c;d--;){var h=s[d];if(!(a?h in t:us.call(t,h)))return!1}var p=i.get(e),x=i.get(t);if(p&&x)return p==t&&x==e;var f=!0;i.set(e,t),i.set(t,e);for(var m=a;++d<c;){h=s[d];var w=e[h],T=t[h];if(r)var y=a?r(T,w,h,t,e,i):r(w,T,h,e,t,i);if(!(y===void 0?w===T||o(w,T,n,r,i):y)){f=!1;break}m||(m=h=="constructor")}if(f&&!m){var v=e.constructor,S=t.constructor;v!=S&&"constructor"in e&&"constructor"in t&&!(typeof v=="function"&&v instanceof v&&typeof S=="function"&&S instanceof S)&&(f=!1)}return i.delete(e),i.delete(t),f}var ds=1,xn="[object Arguments]",Sn="[object Array]",Ke="[object Object]",ps=Object.prototype,Cn=ps.hasOwnProperty;function hs(e,t,n,r,o,i){var a=E(e),s=E(t),c=a?Sn:Q(e),l=s?Sn:Q(t);c=c==xn?Ke:c,l=l==xn?Ke:l;var u=c==Ke,d=l==Ke,h=c==l;if(h&&Pe(e)){if(!Pe(t))return!1;a=!0,u=!1}if(h&&!u)return i||(i=new oe),a||ot(e)?tr(e,t,n,r,o,i):ls(e,t,c,n,r,o,i);if(!(n&ds)){var p=u&&Cn.call(e,"__wrapped__"),x=d&&Cn.call(t,"__wrapped__");if(p||x){var f=p?e.value():e,m=x?t.value():t;return i||(i=new oe),o(f,m,n,r,i)}}return h?(i||(i=new oe),fs(e,t,n,r,o,i)):!1}function zt(e,t,n,r,o){return e===t?!0:e==null||t==null||!J(e)&&!J(t)?e!==e&&t!==t:hs(e,t,n,r,zt,o)}var gs=1,ms=2;function vs(e,t,n,r){var o=n.length,i=o;if(e==null)return!i;for(e=Object(e);o--;){var a=n[o];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){a=n[o];var s=a[0],c=e[s],l=a[1];if(a[2]){if(c===void 0&&!(s in e))return!1}else{var u=new oe,d;if(!(d===void 0?zt(l,c,gs|ms,r,u):d))return!1}}return!0}function nr(e){return e===e&&!Y(e)}function bs(e){for(var t=ke(e),n=t.length;n--;){var r=t[n],o=e[r];t[n]=[r,o,nr(o)]}return t}function rr(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function ys(e){var t=bs(e);return t.length==1&&t[0][2]?rr(t[0][0],t[0][1]):function(n){return n===e||vs(n,e,t)}}function _s(e,t){return e!=null&&t in Object(e)}function ws(e,t,n){t=Vn(t,e);for(var r=-1,o=t.length,i=!1;++r<o;){var a=lt(t[r]);if(!(i=e!=null&&n(e,a)))break;e=e[a]}return i||++r!=o?i:(o=e==null?0:e.length,!!o&&jt(o)&&At(a,o)&&(E(e)||Ae(e)))}function Ts(e,t){return e!=null&&ws(e,t,_s)}var xs=1,Ss=2;function Cs(e,t){return Ft(e)&&nr(t)?rr(lt(e),t):function(n){var r=aa(n,e);return r===void 0&&r===t?Ts(n,e):zt(t,r,xs|Ss)}}function $s(e){return function(t){return t==null?void 0:t[e]}}function Os(e){return function(t){return It(t,e)}}function As(e){return Ft(e)?$s(lt(e)):Os(e)}function or(e){return typeof e=="function"?e:e==null?nt:typeof e=="object"?E(e)?Cs(e[0],e[1]):ys(e):As(e)}function Ps(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[++o];if(n(i[c],c,i)===!1)break}return t}}var ir=Ps();function Es(e,t){return e&&ir(e,t,ke)}function js(e,t){return function(n,r){if(n==null)return n;if(!ye(n))return e(n,r);for(var o=n.length,i=-1,a=Object(n);++i<o&&r(a[i],i,a)!==!1;);return n}}var Fs=js(Es),dt=function(){return ae.Date.now()},Ms="Expected a function",Is=Math.max,Ls=Math.min;function ar(e,t,n){var r,o,i,a,s,c,l=0,u=!1,d=!1,h=!0;if(typeof e!="function")throw new TypeError(Ms);t=Qt(t)||0,Y(n)&&(u=!!n.leading,d="maxWait"in n,i=d?Is(Qt(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h);function p(_){var $=r,O=o;return r=o=void 0,l=_,a=e.apply(O,$),a}function x(_){return l=_,s=setTimeout(w,t),u?p(_):a}function f(_){var $=_-c,O=_-l,F=t-$;return d?Ls(F,i-O):F}function m(_){var $=_-c,O=_-l;return c===void 0||$>=t||$<0||d&&O>=i}function w(){var _=dt();if(m(_))return T(_);s=setTimeout(w,f(_))}function T(_){return s=void 0,h&&r?p(_):(r=o=void 0,a)}function y(){s!==void 0&&clearTimeout(s),l=0,r=c=o=s=void 0}function v(){return s===void 0?a:T(dt())}function S(){var _=dt(),$=m(_);if(r=arguments,o=this,c=_,$){if(s===void 0)return x(c);if(d)return clearTimeout(s),s=setTimeout(w,t),p(c)}return s===void 0&&(s=setTimeout(w,t)),a}return S.cancel=y,S.flush=v,S}function Tt(e,t,n){(n!==void 0&&!Ge(e[t],n)||n===void 0&&!(t in e))&&Pt(e,t,n)}function zs(e){return J(e)&&ye(e)}function xt(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Ds(e){return Ln(e,Gn(e))}function Bs(e,t,n,r,o,i,a){var s=xt(e,n),c=xt(t,n),l=a.get(c);if(l){Tt(e,n,l);return}var u=i?i(s,c,n+"",e,t,a):void 0,d=u===void 0;if(d){var h=E(c),p=!h&&Pe(c),x=!h&&!p&&ot(c);u=c,h||p||x?E(s)?u=s:zs(s)?u=yo(s):p?(d=!1,u=Xn(c,!0)):x?(d=!1,u=Yn(c,!0)):u=[]:ha(c)||Ae(c)?(u=s,Ae(s)?u=Ds(s):(!Y(s)||Z(s))&&(u=Jn(c))):d=!1}d&&(a.set(c,u),o(u,c,r,i,a),a.delete(c)),Tt(e,n,u)}function lr(e,t,n,r,o){e!==t&&ir(t,function(i,a){if(o||(o=new oe),Y(i))Bs(e,t,a,n,lr,r,o);else{var s=r?r(xt(e,a),i,a+"",e,t,o):void 0;s===void 0&&(s=i),Tt(e,a,s)}},Gn)}var Rs=zn(function(e,t,n,r){lr(e,t,n,r)});function Ns(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}function sr(e,t){var n=-1,r=ye(e)?Array(e.length):[];return Fs(e,function(o,i,a){r[++n]=t(o,i,a)}),r}function Hs(e,t){var n=E(e)?ze:sr;return n(e,or(t))}function Us(e,t){return sa(Hs(e,t))}var Gs="[object String]";function fe(e){return typeof e=="string"||!E(e)&&J(e)&&ue(e)==Gs}var Vs="[object Boolean]";function tt(e){return e===!0||e===!1||J(e)&&ue(e)==Vs}var ks="[object Map]",Ws="[object Set]",Ks=Object.prototype,qs=Ks.hasOwnProperty;function xe(e){if(e==null)return!0;if(ye(e)&&(E(e)||typeof e=="string"||typeof e.splice=="function"||Pe(e)||ot(e)||Ae(e)))return!e.length;var t=Q(e);if(t==ks||t==Ws)return!e.size;if(Ve(e))return!Un(e).length;for(var n in e)if(qs.call(e,n))return!1;return!0}var Xs="[object Number]";function Ys(e){return typeof e=="number"||J(e)&&ue(e)==Xs}function Js(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Zs(e,t){if(e!==t){var n=e!==void 0,r=e===null,o=e===e,i=Oe(e),a=t!==void 0,s=t===null,c=t===t,l=Oe(t);if(!s&&!l&&!i&&e>t||i&&a&&c&&!s&&!l||r&&a&&c||!n&&c||!o)return 1;if(!r&&!i&&!l&&e<t||l&&n&&o&&!r&&!i||s&&n&&o||!a&&o||!c)return-1}return 0}function Qs(e,t,n){for(var r=-1,o=e.criteria,i=t.criteria,a=o.length,s=n.length;++r<a;){var c=Zs(o[r],i[r]);if(c){if(r>=s)return c;var l=n[r];return c*(l=="desc"?-1:1)}}return e.index-t.index}function ec(e,t,n){t.length?t=ze(t,function(i){return E(i)?function(a){return It(a,i.length===1?i[0]:i)}:i}):t=[nt];var r=-1;t=ze(t,rt(or));var o=sr(e,function(i,a,s){var c=ze(t,function(l){return l(i)});return{criteria:c,index:++r,value:i}});return Js(o,function(i,a){return Qs(i,a,n)})}function cr(e,t,n,r){return e==null?[]:(E(t)||(t=t==null?[]:[t]),n=n,E(n)||(n=n==null?[]:[n]),ec(e,t,n))}function Dt(e){return e!==null&&typeof e=="object"}function tc(e){return Ys(e)?`${e}px`:e}function nc(e,t,n){const r=n===void 0;let o=e;const i=Us(t.split(".").map(a=>a.includes("[")?a.split("[").map(s=>s.replace(/"/g,"")):a));try{for(let a=0;a<i.length;a++){const s=i[a];let c=null;if(s.includes("]")){const[l,u]=s.replace("]","").split(":");u?c=o.findIndex(d=>d[l]==u):c=Number(l)}else c=s;if(a!=i.length-1)o=o[c];else{if(r)return o[c];Dt(n)?be(o[c],n):o[c]=n}}return e}catch{return{}}}function rc(e,t){return e!==t&&e&&e.contains(t)}function Bt(e,t){return t?se(e,t):e}function ge(e,t){return Rs(e,t,(n,r)=>{if(E(r))return r})}function St(e,t){e!=null&&e.classList&&e.classList.add(t)}function ur(e,t){e!=null&&e.classList&&e.classList.remove(t)}function Ne(e,t){return Fr(e)?Mr(e):Z(e)?e(t):e}function oc(e,t,n){const{allLevels:r=!0}=n||{};function o(i,a){for(const s of i){if(s.value===e)return r?{...s,label:[...a,s.label].join(" / ")}:s;if(s.children){const c=o(s.children,[...a,s.label]);if(c!==void 0)return c}}}return o(t,[])}function ic(e="-"){const t=[],n="0123456789abcdef";for(let r=0;r<36;r++)t[r]=n.substr(Math.floor(Math.random()*16),1);return t[14]="4",t[19]=n.substr(t[19]&3|8,1),t[8]=t[13]=t[18]=t[23]=e,t.join("")}function Rt(e){const t=new Map;return e.forEach(n=>{t.set(n.name,n)}),Array.from(t.values())}function ac({config:e,crud:t,mitt:n}){const r=A(0);function o(T){return!!t.permission[T]}function i(T){const{pagination:y,search:v,sort:S}=t.dict,_={...T},$={...y,...v,...S};for(const O in $)_[O]&&O!=$[O]&&(_[`_${$[O]}`]=_[O],delete _[O]);for(const O in _)O[0]==="_"&&(_[O.substr(1)]=_[O],delete _[O]);return _}function a(T){const{service:y,dict:v}=t;return new Promise((S,_)=>{const $=i(be(t.params,T));t.loading=!0;const O=r.value=Math.random();function F(){t.loading=!1}function B(H,k){const _e=E(H)?{list:H,pagination:k}:H;F(),S(_e),n.emit("crud.refresh",_e)}function V(H){return new Promise(async(k,_e)=>{await y[v.api.page](H).then(K=>{if(O!=r.value)return!1;E(K)&&(K={list:K,pagination:{total:K.length}}),B(K),k(K)}).catch(K=>{$e.error(K.message),_(K),_e(K)}),F()})}e.onRefresh?e.onRefresh($,{next:V,done:F,render:B}):V($)})}function s(T){n.emit("crud.proxy",{name:"info",data:[T]})}function c(){n.emit("crud.proxy",{name:"add"})}function l(T){n.emit("crud.proxy",{name:"edit",data:[T]})}function u(T){n.emit("crud.proxy",{name:"append",data:[T]})}function d(){n.emit("crud.proxy",{name:"close"})}function h(...T){const{service:y,dict:v}=t,S={ids:T.map($=>$[v.primaryId])};async function _($){return new Promise((O,F)=>{Or({type:"warning",title:v.label.tips,message:v.label.deleteConfirm,confirmButtonText:v.label.confirm,cancelButtonText:v.label.close,showCancelButton:!0,async beforeClose(B,V,H){B==="confirm"&&(V.confirmButtonLoading=!0,await y[v.api.delete]({...S,...$}).then(k=>{$e.success(v.label.deleteSuccess),a(),O(k)}).catch(k=>{$e.error(k.message),F(k)}),V.confirmButtonLoading=!1),H()}}).catch(()=>null)})}e.onDelete?e.onDelete(T,{next:_}):_(S)}function p(T,y){n.emit("crud.proxy",{name:T,data:y})}function x(){return t.params}function f(T){ge(t.params,T)}function m(T,y){if(!y)return!1;switch(T){case"service":if(Object.assign(t.service,y),t.service.__proto__=y.__proto__,y._permission)for(const v in y._permission)t.permission[v]=y._permission[v];break;case"permission":Z(y)?ge(t.permission,y(t)):ge(t.permission,y);break;default:ge(t[T],y);break}}function w(T,y){n.on(`${T}-${t.id}`,y)}return m("dict",e.dict),m("service",e.service),m("permission",e.permission),{proxy:p,set:m,on:w,rowInfo:s,rowAdd:c,rowEdit:l,rowAppend:u,rowDelete:h,rowClose:d,refresh:a,getPermission:o,paramsReplace:i,getParams:x,setParams:f}}function lc(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(o){o(n)}),(r=e.get("*"))&&r.slice().map(function(o){o(t,n)})}}}const He=lc();class sc{constructor(t){jn(this,"id"),this.id=t||0}send(t,n,...r){He[t](`${this.id}__${n}`,...r)}emit(t,...n){this.send("emit",t,...n)}off(t,n){this.send("off",t,n)}on(t,n){this.send("on",t,n)}}const Ct=[],cc={list:[],init(e){for(const t in e)this.on(t,e[t])},emit(e,t){this.list.forEach(n=>{const[r]=n.name.split("-");e==r&&n.callback(t,{crudList:Ct,refresh(o){Ct.forEach(i=>i.refresh(o))}})})},on(e,t){this.list.push({name:e,callback:t})}},we=[{id:1,name:"楚行云",createTime:"1996-09-14",wages:73026,status:1,account:"chuxingyun",occupation:4,phone:13797353874},{id:2,name:"秦尘",createTime:"1977-11-09",wages:74520,status:0,account:"qincheng",occupation:3,phone:18593911044},{id:3,name:"叶凡",createTime:"1982-11-28",wages:81420,status:0,account:"yefan",occupation:1,phone:16234136338},{id:4,name:"白小纯",createTime:"2012-12-17",wages:65197,status:1,account:"baixiaochun",occupation:2,phone:16325661110},{id:5,name:"韩立",createTime:"1982-07-10",wages:99107,status:1,account:"hanli",occupation:2,phone:18486594866},{id:6,name:"唐三",createTime:"2019-07-31",wages:80658,status:1,account:"tangsan",occupation:5,phone:15565014642},{id:7,name:"王林",createTime:"2009-07-26",wages:57408,status:1,account:"wanglin",occupation:1,phone:13852767084},{id:8,name:"李强",createTime:"2016-04-26",wages:71782,status:1,account:"liqiang",occupation:3,phone:18365332834},{id:9,name:"秦羽",createTime:"1984-01-18",wages:87860,status:1,account:"qinyu",occupation:0,phone:18149247129}];class uc{constructor(){jn(this,"search",{fieldEq:[{propertyName:"occupation",comment:"工作",source:"a.occupation"}],fieldLike:[{propertyName:"status",comment:"状态",dict:["关闭","开启"],source:"a.status"}],keyWordLikeFields:[{propertyName:"name",comment:"姓名",source:"a.name"},{propertyName:"phone",comment:"手机号",source:"a.phone"}]})}async page(t){const{keyWord:n,page:r,size:o,sort:i,order:a}=t||{},s=["phone","name"],c=["createTime","occupation","status"],l=["phone","name"],u=cr(we,a,i).filter(d=>{let h=!0;return n!==void 0&&(h=!!s.find(p=>String(d[p]).includes(String(t.keyWord)))),c.forEach(p=>{h&&t[p]!==void 0&&(h=d[p]==t[p])}),l.forEach(p=>{h&&t[p]!==void 0&&(h=String(d[p]).includes(String(t[p])))}),h});return new Promise(d=>{setTimeout(()=>{d({list:u.slice((r-1)*o,r*o),pagination:{total:u.length,page:r,size:o},subData:{wages:u.reduce((h,p)=>h+p.wages,0)}})},500)})}async update(t){const n=we.find(r=>r.id==t.id);n&&be(n,t)}async add(t){const n=ic();return we.push({id:n,...t}),n}async info(t){const{id:n}=t||{};return we.find(r=>r.id==n)}async delete(t){const{ids:n=[]}=t||{};n.forEach(r=>{const o=we.findIndex(i=>i.id==r);we.splice(o,1)})}async list(){return we}}function Me(e,t){var n,r,o;const i=je();if(i){let a=(n=i.proxy)==null?void 0:n.$.parent;if(a){for(;a&&((r=a.type)==null?void 0:r.name)!=e&&((o=a.type)==null?void 0:o.name)!="cl-crud";)a=a==null?void 0:a.parent;a&&a.type.name==e&&(t.value=a.exposed)}}}function fc(e,{r:t,options:n,clear:r,isChild:o}){t.__ev||(t.__ev={});const i={},a=t.__ev;return e.forEach(s=>{a[s]||(a[s]=[]),n[s]&&a[s].push({fn:n[s],isChild:o}),i[s]=(...c)=>{if(a[s].forEach(l=>{l.fn&&l.fn(...c)}),r==s)for(const l in a)a[l]=a[l].filter(u=>!u.isChild)}}),i}function dc(e,t){const n=A();return Me("cl-crud",n),e&&(e.service=="test"&&(e.service=new uc),ve("useCrud__options",e)),re(n,r=>{r&&t&&t(r)}),n}function gu(e){const t=A();Me("cl-upsert",t);const n=!!t.value;return e&&ve("useUpsert__options",e),re(t,r=>{if(r&&e){const o=fc(["onOpen","onOpened","onClosed"],{r,options:e,clear:"onClosed",isChild:n});be(r.config,o)}},{immediate:!0}),t}function mu(e,t){const n=A();return Me("cl-table",n),e&&ve("useTable__options",e),re(n,r=>{}),n}function pc(e){const t=A();return Me("cl-form",t),ie(()=>{}),t}function vu(e){const t=A();return Me("cl-adv-search",t),e&&ve("useAdvSearch__options",e),t}function bu(e){const t=A();return Me("cl-search",t),ve("useSearch__options",e),t}function hc(e){const t=ce("dialog");return re(()=>t==null?void 0:t.fullscreen.value,n=>{e==null||e.onFullscreen(n)}),t}function G(){const e=ce("crud"),t=ce("mitt");return{crud:e,mitt:t}}function U(){return ce("__config__")}function We(){return ce("__browser__")}function st(){const e=te({});function t(n){return r=>{e[n]=r}}return{refs:e,setRefs:t}}function Nt(e){const{type:t}=je(),{mitt:n,crud:r}=G();return r[t.name]=e,n.on("crud.proxy",({name:o,data:i=[],callback:a})=>{if(e[o]){let s=null;Z(e[o])?s=e[o](...i):s=e[o],a&&a(s)}}),e}function Ht(e,t){const n={};return e.forEach(r=>{n[r]=(...o)=>t.value[r](...o)}),n}const gc=R({name:"cl-crud",props:{name:String,border:Boolean,padding:{type:String,default:"10px"}},setup(e,{slots:t,expose:n}){const r=je(),o=te(Bt(ce("useCrud__options")||{})),i=new sc(r==null?void 0:r.uid),{dict:a,permission:s}=U(),c=te(ge({id:e.name||(r==null?void 0:r.uid),routePath:location.pathname||"/",loading:!1,selection:[],params:{page:1,size:20},service:{},dict:{},permission:{},mitt:i,config:o},he({dict:a,permission:s})));return ge(c,ac({config:o,crud:c,mitt:i})),Ct.push(c),ve("crud",c),ve("mitt",i),n(c),()=>{var l;return g("div",{class:["cl-crud",{"is-border":e.border}],style:{padding:e.padding}},[(l=t.default)==null?void 0:l.call(t)])}}}),mc=R({name:"cl-add-btn",setup(e,{slots:t}){const{crud:n}=G(),{style:r}=U();return()=>n.getPermission("add")&&g(C("el-button"),{type:"primary",size:r.size,onClick:n.rowAdd},{default:()=>{var o;return[((o=t.default)==null?void 0:o.call(t))||n.dict.label.add]}})}}),vc=R({name:"cl-adv-btn",components:{Search:Ye},setup(e,{slots:t}){const{crud:n,mitt:r}=G(),{style:o}=U();function i(){r.emit("crud.openAdvSearch")}return()=>g(C("el-button"),{size:o.size,onClick:i,class:"cl-adv-btn"},{default:()=>{var a;return[g(C("el-icon"),null,{default:()=>[g(Ye,null,null)]}),((a=t.default)==null?void 0:a.call(t))||n.dict.label.advSearch]}})}});function $n(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Fe(e)}function bc(e){if(["el-select","el-radio-group","el-checkbox-group"].includes(e.name)){const t=Ne(e.options||[]);return{children:g("div",null,[t.map((r,o)=>{let i,a;if(fe(r))i=a=r;else if(Dt(r))i=r.label,a=r.value;else return g(C("cl-error-message"),{title:"Component options error"},null);switch(e.name){case"el-select":return g(C("el-option"),se({key:o,label:i,value:a},r.props),null);case"el-radio-group":return g(C("el-radio"),se({key:o,value:a},r.props),$n(i)?i:{default:()=>[i]});case"el-checkbox-group":return g(C("el-checkbox"),se({key:o,value:a},r.props),$n(i)?i:{default:()=>[i]});default:return null}})])}}else return{}}const fr={get vue(){return window.__CrudApp__},get(e){return window[e]},set(e,t){window[e]=t}},pt=new Map;function ht(e,t){var n;const{scope:r,prop:o,slots:i,children:a,_data:s}=t||{};let c=null;if((n=e.name)!=null&&n.includes("slot-")){const u=i[e.name];return u?u({scope:r,prop:o,...s}):g(C("cl-error-message"),{title:`${e.name} is not found`},null)}e.vm&&!pt.get(e.name)&&(fr.vue.component(e.name,{...e.vm}),pt.set(e.name,{...e.vm})),Z(e.props)&&(e.props=e.props({scope:r,prop:o,...s}));const l={...e.props,...s,prop:o,scope:r};if(l.disabled=(s==null?void 0:s.isDisabled)||l.disabled,l&&r&&o&&(l.modelValue=r[o],l["onUpdate:modelValue"]=function(u){r[o]=u}),e.vm)c=D(pt.get(e.name),l);else{const u={...e.slots};a&&(u.default=()=>a),c=D(Je(C(e.name)),l,u)}return Z(e.ref)&&setTimeout(()=>{var u;e.ref((u=c==null?void 0:c.component)==null?void 0:u.exposed)},0),c}function me(e,t){var n,r,o;const i=U(),{item:a,scope:s,children:c,_data:l,render:u}=t||{};if(!e)return null;if(e.__v_isVNode)return e;if(a&&a.component){a.component.props||(a.component.props={});let d="";switch((n=a.component)==null?void 0:n.name){case"el-input":d=i.dict.label.placeholder;break}d&&(a.component.props.placeholder||(a.component.props.placeholder=d))}if(e.vm)return e.name||(e.name=((r=e.vm)==null?void 0:r.name)||((o=e.vm)==null?void 0:o.__hmrId)),ht(e,t);if(fe(e))return u=="slot"&&!e.includes("slot-")?e:ht({name:e},t);if(Z(e))return e({scope:s,h:D,...l});if(Dt(e))return e.name?ht(e,{...t,children:c,...bc(e)}):t.custom?t.custom(e):g(C("cl-error-message"),{title:"Error，component name is required"},null)}function yc({config:e,form:t,Form:n}){function r({prop:f,key:m,path:w},T){const y=w||"";if(w)nc(e,y,T);else{let v;if(f){let S=function(_){_.forEach($=>{$.prop==f?v=$:$.children&&S($.children)})};S(e.items)}if(v)switch(m){case"options":v.component.options=T;break;case"props":be(v.component.props,T);break;case"hidden":v.hidden=T;break;case"hidden-toggle":v.hidden=T===void 0?!v.hidden:!T;break;default:be(v,T);break}}}function o(f){return f?t[f]:t}function i(f,m){t[f]=m}function a(f,m){r({path:f},m)}function s(f,m){r({prop:f},m)}function c(f,m){r({prop:f,key:"options"},m)}function l(f,m){r({prop:f,key:"props"},m)}function u(f,m){r({prop:f,key:"hidden-toggle"},m)}function d(...f){f.forEach(m=>{r({prop:m,key:"hidden"},!0)})}function h(...f){f.forEach(m=>{r({prop:m,key:"hidden"},!1)})}function p(f){e.title=f}function x(f){var m;(m=n.value)==null||m.clearValidate(f.prop),f.collapse=!f.collapse}return{getForm:o,setForm:i,setData:s,setConfig:a,setOptions:c,setProps:l,toggleItem:u,hideItem:d,showItem:h,setTitle:p,collapseItem:x}}function Ut({Form:e}){return Ht(["open","close","clear","reset","submit","bindForm","changeTab","setTitle","showLoading","hideLoading","collapseItem","getForm","setForm","invokeData","setData","setConfig","setOptions","setProps","toggleItem","hideItem","showItem","validate","validateField","resetFields","scrollToField","clearValidate","fields"],e)}function _c(e,{visible:t}){const n=je(),{style:r}=U(),o={onOpen:[],onClose:[],onSubmit:[]};let i=null;function a(c=[]){if(!e)return!1;for(const l in o)o[l]=[];i&&i(),Rt([...r.form.plugins||[],...c]).forEach(l=>{const u={exposed:n.exposed};for(const d in o)u[d]=h=>{o[d].push(h)};l(u)}),i=re(t,l=>{l?setTimeout(()=>{o.onOpen.forEach(u=>u())},10):o.onClose.forEach(u=>u())},{immediate:!0})}async function s(c){let l=c;for(let u=0;u<o.onSubmit.length;u++){const d=await o.onSubmit[u](l);d&&(l=d)}return l}return{create:a,submit:s}}function wc({config:e,Form:t}){const n=A(),r=Ot(()=>{var p,x;return((x=(p=c())==null?void 0:p.props)==null?void 0:x.labels)||[]});function o(p){return r.value.find(x=>x.value==p)}function i(p){const x=o(p);return x!=null&&x.lazy?x.loaded:!0}function a(p){const x=o(p);x.loaded=!0}function s(p){if(n.value){let x;const f=p.refs.form.querySelector(`[data-prop="${p.prop}"]`);if(f)x=f==null?void 0:f.getAttribute("data-group");else{let m=function(w){w.prop==p.prop?x=w.group:w.children&&w.children.forEach(m)};e.items.forEach(m)}x&&l(x)}}function c(){return e.items.find(p=>p.type==="tabs")}function l(p){n.value=p}function u(){n.value=void 0,r.value.forEach(p=>{p.lazy&&p.loaded&&(p.loaded=void 0)})}function d(p,x=!0){return new Promise((f,m)=>{function w(){n.value=p,f()}if(x){let T=!1;const y=e.items.filter(v=>v.group==n.value&&!v._hidden&&v.prop).map(v=>new Promise(S=>{t.value.validateField(v.prop,_=>{_&&(T=!0),S(_)})}));Promise.all(y).then(v=>{T?m(v.filter(Boolean)):w()})}else w()})}function h(p){const x=c();if(x&&x.props){const{mergeProp:f,labels:m=[]}=x.props;if(f){const w=m.find(T=>T.value==p.group);w&&w.name&&(p.prop=`${w.name}-${p.prop}`)}}}return{active:n,list:r,isLoaded:i,onLoad:a,get:c,set:l,change:d,clear:u,mergeProp:h,toGroup:s}}function Tc(){const{dict:e}=U(),t=te({title:"-",height:void 0,width:"50%",props:{labelWidth:100},on:{},op:{hidden:!1,saveButtonText:e.label.save,closeButtonText:e.label.close,buttons:["close","save"]},dialog:{closeOnClickModal:!1,appendToBody:!0},items:[],form:{},_data:{}}),n=A(),r=te({}),o=A({}),i=A(!1),a=A(!1),s=A(!1),c=A(!1);return re(()=>r,l=>{var u,d;if((u=t.on)!=null&&u.change)for(const h in l)r[h]!==o.value[h]&&((d=t.on)==null||d.change(l,h));o.value=he(l)},{deep:!0}),{Form:n,config:t,form:r,visible:i,saving:a,loading:s,disabled:c}}const xc=R({name:"cl-adv-search",components:{Close:Xe},props:{items:{type:Array,default:()=>[]},title:String,size:{type:[Number,String],default:"30%"},op:{type:Array,default:()=>["clear","reset","close","search"]},onSearch:Function},emits:["reset","clear"],setup(e,{emit:t,slots:n,expose:r}){const{crud:o,mitt:i}=G(),{style:a}=U(),s=We(),c=te(se(e,ce("useAdvSearch__options")||{})),l=A(),u=A(),d=A(!1);function h(){d.value=!0,ie(()=>{var y;(y=l.value)==null||y.open({items:c.items||[],op:{hidden:!0},isReset:!1})})}function p(){u.value.handleClose()}function x(){var y,v;const S={};(y=c.items)==null||y.map(_=>{var $;if(typeof _.hook!="string"&&(($=_.hook)!=null&&$.reset)){const O=_.hook.reset(_.prop);E(O)&&O.forEach(F=>{S[F]=void 0})}S[_.prop]=void 0}),(v=l.value)==null||v.reset(),m(),t("reset",S)}function f(){var y;(y=l.value)==null||y.clear(),t("clear")}function m(y){var v;const S=(v=l.value)==null?void 0:v.getForm();function _($){var O;return(O=l.value)==null||O.done(),p(),o.refresh({...$,...y,page:1})}c.onSearch?c.onSearch(S,{next:_,close:p}):_(S)}i.on("crud.openAdvSearch",h);function w(){return D(g(C("cl-form"),{ref:l,inner:!0,"enable-plugin":!1},null),{},n)}function T(){var y;const v={search:m,reset:x,clear:f,close:p};return(y=c.op)==null?void 0:y.map(S=>{var _;switch(S){case"search":case"reset":case"clear":case"close":return D(g(C("el-button"),null,null),{type:S=="search"?"primary":null,size:a.size,onClick:()=>{v[S]()}},{default:()=>o.dict.label[S]});default:return me(S,{scope:(_=l.value)==null?void 0:_.getForm(),slots:n})}})}return r({open:h,close:p,clear:f,...Ut({Form:l}),reset:x,Form:l}),()=>g(C("el-drawer"),{ref:u,"modal-class":"cl-adv-search",modelValue:d.value,"onUpdate:modelValue":y=>d.value=y,direction:"rtl","with-header":!1,size:s.isMini?"100%":c.size},{default:()=>[g("div",{class:"cl-adv-search__header"},[g("span",{class:"text"},[c.title||o.dict.label.advSearch]),g(C("el-icon"),{size:20,onClick:p},{default:()=>[g(Xe,null,null)]})]),g("div",{class:"cl-adv-search__container"},[w()]),g("div",{class:"cl-adv-search__footer"},[T()])]})}}),Sc=R({name:"cl-flex1",setup(){return()=>g("div",{class:"cl-flex1"},null)}}),$t={number(e){return e&&(E(e)?e.map(Number):Number(e))},string(e){return e&&(E(e)?e.map(String):String(e))},split(e){return fe(e)?e.split(",").filter(Boolean):E(e)?e:[]},join(e){return E(e)?e.join(","):e},boolean(e){return!!e},booleanNumber(e){return e?1:0},datetimeRange(e,{form:t,method:n,prop:r}){const o=r.charAt(0).toUpperCase()+r.slice(1),i=`start${o}`,a=`end${o}`;if(n=="bind")return[t[i],t[a]];{const[s,c]=e||[];t[i]=s,t[a]=c;return}},splitJoin(e,{method:t}){return t=="bind"?fe(e)?e.split(",").filter(Boolean):e:E(e)?e.join(","):e},json(e,{method:t}){if(t=="bind")try{return JSON.parse(e)}catch{return{}}else return JSON.stringify(e)},empty(e){return fe(e)?e===""?void 0:e:E(e)&&xe(e)?void 0:e}};function Cc({value:e,form:t,prop:n}){if(n){const[r,o]=n.split("-");o?t[n]=t[r]?t[r][o]:t[r]:t[n]=e}}function On(e,{value:t,hook:n,form:r,prop:o}){if(Cc({value:t,form:r,prop:o}),!n)return!1;let i=[];fe(n)?$t[n]&&(i=[n]):E(n)?i=n:Y(n)?i=E(n[e])?n[e]:[n[e]]:Z(n)&&(i=[n]);let a=t;i.forEach(s=>{let c=null;fe(s)?c=$t[s]:Z(s)&&(c=s),c&&(a=c(a,{method:e,form:r,prop:o}))}),o&&(r[o]=a)}const gt={bind(e){On("bind",e)},submit(e){On("submit",e)}};function yu(e,t){$t[e]=t}function Le(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Fe(e)}const $c=R({name:"cl-form",props:{name:String,inner:Boolean,inline:Boolean,enablePlugin:{type:Boolean,default:!0}},setup(e,{expose:t,slots:n}){const{refs:r,setRefs:o}=st(),{style:i,dict:a}=U(),s=We(),{Form:c,config:l,form:u,visible:d,saving:h,loading:p,disabled:x}=Tc();let f="close",m;const w=wc({config:l,Form:c}),T=yc({config:l,form:u,Form:c}),y=Ht(["validate","validateField","resetFields","scrollToField","clearValidate","fields"],c),v=_c(e.enablePlugin,{visible:d});function S(){p.value=!0}function _(){p.value=!1}function $(b=!0){x.value=b}function O(){h.value=!1}function F(b){b&&(f=b),B(()=>{d.value=!1,O()})}function B(b){var L;(L=l.on)!=null&&L.close?l.on.close(f,b):b()}function V(){var b;w.clear(),(b=c.value)==null||b.clearValidate()}function H(){for(const b in u)delete u[b];setTimeout(()=>{var b;(b=c.value)==null||b.clearValidate()},0)}function k(){if(m)for(const b in m)u[b]=he(m[b])}function _e(b){for(const L in b)if(L.includes("-")){const[P,...z]=L.split("-"),j=z.pop()||"";b[P]||(b[P]={});let W=b[P];z.forEach(N=>{W[N]||(W[N]={}),W=W[N]}),W[j]=b[L],delete b[L]}}function K(b){c.value.validate(async(L,P)=>{var z;if(L){h.value=!0;const j=he(u);l.items.forEach(N=>{function le(q){q.prop&&(q._hidden&&q.prop&&delete j[q.prop],q.hook&&gt.submit({...q,value:q.prop?j[q.prop]:void 0,form:j})),q.children&&q.children.forEach(le)}le(N)}),_e(j);const W=b||((z=l.on)==null?void 0:z.submit);W?W(await v.submit(j),{close(){F("save")},done:O}):O()}else w.toGroup({refs:r,config:l,prop:ke(P)[0]})})}function pr(b,L){if(b){b.isReset!==!1&&H(),d.value=!0,f="close";for(const P in l)switch(P){case"items":let z=function(j){return j.map(W=>{const N=Ne(W);return{...N,children:N!=null&&N.children?z(N.children):void 0}})};l.items=z(b.items||[]);break;case"on":case"op":case"props":case"dialog":case"_data":ge(l[P],b[P]||{});break;default:l[P]=b[P];break}if(b!=null&&b.form)for(const P in b.form)u[P]=b.form[P];l.items.forEach(P=>{function z(j){j.prop&&(j.prop.includes(".")&&(j.prop=j.prop.replace(/\./g,"-")),w.mergeProp(j),gt.bind({...j,value:u[j.prop]!==void 0?u[j.prop]:he(j.value),form:u}),j.required&&(j.rules={required:!0,message:a.label.nonEmpty.replace("{label}",j.label||"")})),j.type=="tabs"&&w.set(j.value),j.children&&j.children.forEach(z)}z(P)}),m||(m=he(u)),v.create(L),ie(()=>{setTimeout(()=>{var P;(P=l.on)!=null&&P.open&&l.on.open(u)},10)})}}function hr(b){l.items.forEach(L=>{function P(z){gt.bind({...z,value:z.prop?b[z.prop]:void 0,form:b}),z.children&&z.children.forEach(P)}P(L)}),be(u,b)}function Gt(b){const{isDisabled:L}=l._data;if(b.type=="tabs")return g(C("cl-form-tabs"),se({modelValue:w.active.value,"onUpdate:modelValue":le=>w.active.value=le},b.props,{onChange:w.onLoad}),null);b._hidden=gr(b.hidden,{scope:u});const P=b.group?b.group===w.active.value:!0,z=b.component&&w.isLoaded(b.group),j=D(X(g(C("el-form-item"),{class:{"no-label":!(b.renderLabel||b.label),"has-children":!!b.children},key:b.prop,"data-group":b.group||"-","data-prop":b.prop||"-","label-width":e.inline?"auto":"",label:b.label,prop:b.prop,rules:L?null:b.rules,required:b._hidden?!1:b.required},null),[[ee,P&&!b._hidden]]),b.props,{label(){return b.renderLabel?me(b.renderLabel,{scope:u,render:"slot",slots:n}):b.label},default(){return g("div",null,[g("div",{class:"cl-form-item"},[["prepend","component","append"].filter(le=>b[le]).map(le=>{let q;const vr=b.children&&g("div",{class:"cl-form-item__children"},[g(C("el-row"),{gutter:10},Le(q=b.children.map(Gt))?q:{default:()=>[q]})]),br=me(b[le],{item:b,prop:b.prop,scope:u,slots:n,children:vr,_data:{isDisabled:L}});return X(g("div",{class:[`cl-form-item__${le}`,{flex1:b.flex!==!1}],style:b[le].style},[br]),[[ee,!b.collapse]])})]),tt(b.collapse)&&g("div",{class:"cl-form-item__collapse",onClick:()=>{T.collapseItem(b)}},[g(C("el-divider"),{"content-position":"center"},{default:()=>[b.collapse?a.label.seeMore:a.label.hideContent]})])])}});let W=b.span||i.form.span;s.isMini&&(W=24);const N=e.inline?j:X(g(C("el-col"),se({span:W},b.col),Le(j)?j:{default:()=>[j]}),[[ee,P&&!b._hidden]]);return z?N:null}function Vt(){const b=l.items.map(Gt),L=s.isMini&&!e.inline?"top":l.props.labelPosition||i.form.labelPosition;return g("div",{class:"cl-form__container",ref:o("form")},[D(g(C("el-form"),{ref:c,size:i.size,"label-width":i.form.labelWidth,inline:e.inline,"require-asterisk-position":"right",disabled:h.value,"scroll-to-error":!0,model:u,onSubmit:P=>{K(),P.preventDefault()}},null),{...l.props,labelPosition:L},{default:()=>{const P=[n.prepend&&n.prepend({scope:u}),b,n.append&&n.append({scope:u})];return X(g("div",{class:"cl-form__items"},[e.inline?P:g(C("el-row"),{gutter:10},Le(P)?P:{default:()=>[P]})]),[[En("loading"),p.value]])}})])}function kt(){const{hidden:b,buttons:L,saveButtonText:P,closeButtonText:z,justify:j}=l.op;if(b)return null;const W=L==null?void 0:L.map(N=>{switch(N){case"save":return g(C("el-button"),{type:"success",size:i.size,disabled:p.value,loading:h.value,onClick:()=>{K()}},Le(P)?P:{default:()=>[P]});case"close":return g(C("el-button"),{size:i.size,onClick:()=>{F("close")}},Le(z)?z:{default:()=>[z]});default:return me(N,{scope:u,slots:n,custom(){return g(C("el-button"),se({type:N.type},N.props,{onClick:()=>{N.onClick({scope:u})}}),{default:()=>[N.label]})}})}});return g("div",{class:"cl-form__footer",style:{justifyContent:j||"flex-end"}},[W])}function gr(b,{scope:L}){return tt(b)?b:Z(b)?b({scope:L}):!1}const mr={name:e.name,refs:r,Form:c,visible:d,saving:h,form:u,config:l,loading:p,disabled:x,open:pr,close:F,done:O,clear:H,reset:k,submit:K,invokeData:_e,bindForm:hr,showLoading:S,hideLoading:_,setDisabled:$,Tabs:w,...T,...y};return t(mr),()=>e.inner?d.value&&g("div",{class:"cl-form"},[Vt(),kt()]):D(g(C("cl-dialog"),{modelValue:d.value,"onUpdate:modelValue":b=>d.value=b,class:"cl-form"},null),{title:l.title,height:l.height,width:l.width,...l.dialog,beforeClose:B,onClosed:V,keepAlive:!1},{default(){return Vt()},footer(){return kt()}})}});function Oc(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Fe(e)}const Ac=R({name:"cl-form-tabs",props:{modelValue:[String,Number],labels:{type:Array,default:()=>[]},justify:{type:String,default:"center"},type:{type:String,default:"default"}},emits:["update:modelValue","change"],setup(e,{emit:t,expose:n}){const{refs:r,setRefs:o}=st(),i=A(""),a=A([]),s=te({width:"",offsetLeft:"",transform:"",backgroundColor:""});function c(l){if(!l)return!1;ie(()=>{const u=a.value.findIndex(h=>h.value===l),d=r[`tab-${u}`];if(d){s.width=d.offsetWidth+"px",s.transform=`translateX(${d.offsetLeft}px)`;let h=d.offsetLeft+d.clientWidth/2-414/2+15;h<0&&(h=0),r.tabs.scrollLeft=h}}),i.value=l,t("update:modelValue",l)}return re(()=>e.modelValue,c),re(()=>i.value,l=>{t("change",l)}),hc({onFullscreen(){c(i.value)}}),Ue(function(){xe(e.labels)||(a.value=e.labels,c(xe(e.modelValue)?a.value[0].value:e.modelValue))}),n({active:i,list:a,line:s,update:c}),()=>g("div",{class:["cl-form-tabs",`cl-form-tabs--${e.type}`]},[g("div",{class:"cl-form-tabs__wrap",style:{textAlign:e.justify},ref:o("tabs")},[g("ul",null,[a.value.map((l,u)=>{let d;return g("li",{ref:o(`tab-${u}`),class:{"is-active":l.value===i.value},onClick:()=>{c(l.value)}},[l.icon&&g(C("el-icon"),null,Oc(d=D(Je(l.icon)))?d:{default:()=>[d]}),g("span",null,[l.label])])}),s.width&&g("div",{class:"cl-form-tabs__line",style:s},null)])])])}}),Pc=R({name:"cl-form-card",components:{ArrowDown:Sr,ArrowUp:xr},props:{label:String,expand:{type:Boolean,default:!0},isExpand:{type:Boolean,default:!0}},setup(e,{slots:t}){const n=A(e.expand);function r(){e.isExpand&&(n.value=!n.value)}return()=>{var o;return g("div",{class:["cl-form-card",{"is-expand":n.value}]},[X(g("div",{class:"cl-form-card__header",onClick:r},[g("span",null,[e.label]),X(g(C("el-icon"),null,{default:()=>[X(g(C("arrow-down"),null,null),[[ee,!n.value]]),X(g(C("arrow-up"),null,null),[[ee,n.value]])]}),[[ee,e.isExpand]])]),[[ee,e.label]]),g("div",{class:"cl-form-card__container"},[(o=t.default)==null?void 0:o.call(t)])])}}}),Ec=R({name:"cl-multi-delete-btn",setup(e,{slots:t}){const{crud:n}=G(),{style:r}=U();return()=>n.getPermission("delete")&&g(C("el-button"),{type:"danger",size:r.size,disabled:n.selection.length===0,onClick:()=>{n.rowDelete(...n.selection)}},{default:()=>{var o;return[((o=t.default)==null?void 0:o.call(t))||n.dict.label.multiDelete]}})}}),jc=R({name:"cl-pagination",setup(e,{expose:t}){const{crud:n,mitt:r}=G(),{style:o}=U(),i=We(),a=A(0),s=A(1),c=A(20);function l(p){n.refresh({page:p})}function u(p){n.refresh({page:1,size:p})}function d(p){p&&(s.value=p.currentPage||p.page||1,c.value=p.pageSize||p.size||20,a.value=p.total||0,n.params.size=c.value)}function h(p){d(p.pagination)}return Ue(()=>{r.on("crud.refresh",h)}),Pn(()=>{r.off("crud.refresh",h)}),t({total:a,currentPage:s,pageSize:c,setPagination:d}),()=>D(g(C("el-pagination"),{class:"cl-pagination",size:i.isMini?"small":o.size,background:!0,"page-sizes":[10,20,30,40,50,100],"pager-count":i.isMini?5:7,layout:i.isMini?"total, pager":"total, sizes, prev, pager, next, jumper"},null),{onSizeChange:u,onCurrentChange:l,total:a.value,currentPage:s.value,pageSize:c.value})}}),Fc=R({name:"cl-refresh-btn",setup(e,{slots:t}){const{crud:n}=G(),{style:r}=U();return()=>g(C("el-button"),{size:r.size,onClick:()=>{n.refresh()}},{default:()=>{var o;return[((o=t.default)==null?void 0:o.call(t))||n.dict.label.refresh]}})}});function Mc(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Fe(e)}const Ic=R({name:"cl-search-key",props:{modelValue:String,field:{type:String,default:"keyWord"},fieldList:{type:Array,default:()=>[]},onSearch:Function,placeholder:String,width:{type:[String,Number],default:280},refreshOnInput:Boolean},emits:["update:modelValue","change","field-change"],setup(e,{emit:t,expose:n}){const{crud:r}=G(),{style:o}=U(),i=A(e.field),a=A(!1),s=Ot(()=>{if(e.placeholder)return e.placeholder;{const f=e.fieldList.find(m=>m.value==i.value);return f?r.dict.label.placeholder+f.label:r.dict.label.searchKey}}),c=Ar(e,"modelValue");let l=!1;function u(){if(!l){const f={};e.fieldList.forEach(w=>{f[w.value]=void 0});async function m(w){a.value=!0,await r.refresh({page:1,...f,[i.value]:c.value||void 0,...w}).catch(T=>{}),a.value=!1}e.onSearch?e.onSearch(f,{next:m}):m()}}function d({key:f}){f==="Enter"&&u()}function h(f){e.refreshOnInput||(u(),l=!0,setTimeout(()=>{l=!1},300),t("change",f))}const p=ar(f=>{t("change",f),e.refreshOnInput&&u()},300);function x(){t("field-change",i.value),c.value=void 0}return n({search:u}),()=>{let f;return g("div",{class:"cl-search-key"},[X(g(C("el-select"),{class:"cl-search-key__select",size:o.size,modelValue:i.value,"onUpdate:modelValue":m=>i.value=m,onChange:x},Mc(f=e.fieldList.map((m,w)=>g(C("el-option"),{key:w,label:m.label,value:m.value},null)))?f:{default:()=>[f]}),[[ee,e.fieldList.length>0]]),g("div",{class:"cl-search-key__wrap",style:{width:tc(e.width)}},[g(C("el-input"),{modelValue:c.value,"onUpdate:modelValue":m=>c.value=m,size:o.size,placeholder:s.value,onKeydown:d,onChange:h,onInput:p,clearable:!0},null),g(C("el-button"),{size:o.size,type:"primary",loading:a.value,onClick:u},{default:()=>[r.dict.label.search]})])])}}});function Lc({config:e,Table:t}){const{mitt:n,crud:r}=G(),o=A([]);function i(a){o.value=a}return n.on("crud.refresh",({list:a})=>{o.value=a,ie(()=>{r.selection.forEach(s=>{const c=a.find(l=>l[e.rowKey]==s[e.rowKey]);c&&t.value.toggleRowSelection(c,!0)})})}),{data:o,setData:i}}function zc({config:e,Table:t}){const n=A(0),r=ar(async()=>{var o,i;await ie();let a=t.value;if(a){for(;!((i=(o=a.$parent)==null?void 0:o.$el.className)!=null&&i.includes("cl-crud"));)a=a.$parent;if(a){const s=a.$parent.$el;await ie();let c=0;a.$el.className.includes("cl-row")&&(c+=10),c+=a.$el.offsetTop;let l=a.$el.nextSibling;const u=[a.$el];for(;l;)l.offsetHeight>0&&(c+=l.offsetHeight||0,u.push(l),l.className.includes("cl-row--last")&&(c+=10)),l=l.nextSibling;u.forEach(h=>{ur(h,"cl-row--last")});const d=Ns(u);d!=null&&d.className.includes("cl-row")&&(St(d,"cl-row--last"),c-=10),c+=parseInt(window.getComputedStyle(s).paddingTop,10),e.autoHeight&&(n.value=s.clientHeight-c)}}},100);return He.on("resize",()=>{r()}),Ue(function(){r()}),Pr(function(){r()}),{maxHeight:n,calcMaxHeight:r}}function Dc({config:e}){const{mitt:t}=G(),n=A(!0);async function r(s){n.value=!1,await ie(),s&&s(),n.value=!0,await ie(),t.emit("resize")}function o(s,c){const l=E(s)?s:[s];function u(d){d.forEach(h=>{h.prop&&l.includes(h.prop)&&(h.hidden=tt(c)?!c:!1),h.children&&u(h.children)})}u(e.columns)}function i(s){o(s,!1)}function a(s){s&&r(()=>{e.columns.splice(0,e.columns.length,...s)})}return{visible:n,reBuild:r,showColumn:o,hideColumn:i,setColumns:a}}function Bc(e,{scope:t,slots:n}){const r=dc(),o=n[`header-${e.prop}`];if(o)return o({scope:t});if(!e.search||!e.search.component)return e.label;function i(u){e.search.isInput=!0,u.stopPropagation()}function a(){e.search.value!==void 0&&(e.search.value=void 0,s()),e.search.isInput=!1}function s(u){var d;const{value:h}=e.search;(d=r.value)==null||d.refresh({page:1,[e.prop]:h===""?void 0:h,...u})}const c=g("div",{class:"cl-table-header__search-label",onClick:i},[g(C("el-icon"),{size:14},{default:()=>{var u,d;return[((d=(u=e.search).icon)==null?void 0:d.call(u))??g(Ye,null,null)]}}),e.renderLabel?e.renderLabel(t):e.label]),l=D(me(e.search.component,{prop:e.prop}),{clearable:!0,modelValue:e.search.value,onVnodeMounted(u){var d,h,p;(p=(h=(d=u.component)==null?void 0:d.exposed)==null?void 0:h.focus)==null||p.call(h)},onInput(u){e.search.value=u},onChange(u){e.search.value=u,e.search.refreshOnChange&&s()}});return g("div",{class:["cl-table-header__search",{"is-input":e.search.isInput}]},[g("div",{class:"cl-table-header__search-inner"},[e.search.isInput?l:c]),e.search.isInput&&g("div",{class:"cl-table-header__search-close",onClick:a},[g(C("el-icon"),null,{default:()=>[g(Cr,null,null)]})])])}function Rc(){const e=We(),t=Er(),{crud:n}=G(),{style:r}=U();function o(l){const u=l.map(d=>{const h=Ne(d);return h.orderNum||(h.orderNum=0),h});return cr(u,"orderNum","asc").map((d,h)=>{if(d.hidden)return null;const p=g(C("el-table-column"),{key:`cl-table-column__${h}`,align:r.table.column.align,"header-align":r.table.column.headerAlign,minWidth:r.table.column.minWidth},null);if(d.type==="op"){const x=be({label:n.dict.label.op,width:r.table.column.opWidth,fixed:e.isMini?null:"right"},d);return D(p,x,{default:f=>g("div",{class:"cl-table__op"},[i(d.buttons,{scope:f})])})}else{if(["selection","index"].includes(d.type))return D(p,d);{let x=function(f){if(f.hidden)return null;const m=he(f);return delete m.children,D(p,m,{header(w){return Bc(f,{scope:w,slots:t})},default(w){if(f.children)return f.children.map(x);const T=t[`column-${f.prop}`];if(T)return T({scope:w,item:f});{let y=w.row[f.prop];return f.formatter&&(y=f.formatter(w.row,w.column,y,w.$index),Y(y))?y:f.render?f.render(w.row,w.column,y,w.$index):f.component?me(f.component,{prop:f.prop,scope:w.row,_data:{column:w.column,index:w.$index,row:w.row}}):f.dict?a(y,f):xe(y)?w.emptyText:y}}})};return x(d)}}}).filter(Boolean)}function i(l,{scope:u}){return Ne(l||["edit","delete"],{scope:u}).map(h=>h==="info"?X(g(C("el-button"),{plain:!0,size:r.size,onClick:p=>{n.rowInfo(u.row),p.stopPropagation()}},{default:()=>{var p;return[(p=n.dict.label)==null?void 0:p.info]}}),[[ee,n.getPermission("info")]]):h==="edit"?X(g(C("el-button"),{text:!0,type:"primary",size:r.size,onClick:p=>{n.rowEdit(u.row),p.stopPropagation()}},{default:()=>{var p;return[(p=n.dict.label)==null?void 0:p.update]}}),[[ee,n.getPermission("update")]]):h==="delete"?X(g(C("el-button"),{text:!0,type:"danger",size:r.size,onClick:p=>{n.rowDelete(u.row),p.stopPropagation()}},{default:()=>{var p;return[(p=n.dict.label)==null?void 0:p.delete]}}),[[ee,n.getPermission("delete")]]):typeof h=="object"&&h.hidden?null:me(h,{scope:u,slots:t,custom(p){return g(C("el-button"),se({text:!0,type:p.type},p==null?void 0:p.props,{onClick:x=>{p.onClick({scope:u}),x.stopPropagation()}}),{default:()=>[p.label]})}}))}function a(l,u){const d=he(u.dict||[]),h=u.dictSeparator===void 0?",":u.dictSeparator;u.dictColor&&d.forEach((f,m)=>{f.color||(f.color=r.colors[m])});let p=[];E(l)?p=l:fe(l)?h?p=l.split(h):p=[l]:p=[l];const x=p.filter(f=>f!=null&&f!=="").map(f=>({...oc(f,d,{allLevels:u.dictAllLevels})||{label:f,value:f},children:[]}));return u.dictFormatter?u.dictFormatter(x):x.map(f=>D(g(C("el-tag"),{"disable-transitions":!0,style:"margin: 2px; border: 0"},null),{type:f.type,closable:f.closable,hit:f.hit,color:f.color,size:f.size,effect:f.effect||"dark",round:f.round},{default:()=>g("span",null,[f.label])}))}function s(l){return g("div",{class:"cl-table__empty"},[t.empty?t.empty():g(C("el-empty"),{"image-size":100,description:l},null)])}function c(){return g("div",{class:"cl-table__append"},[t.append&&t.append()])}return{renderColumn:o,renderEmpty:s,renderAppend:c}}function An(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Fe(e)}const dr=R({name:"cl-context-menu",props:{show:Boolean,options:{type:Object,default:()=>({})},event:{type:Object,default:()=>({})}},setup(e,{expose:t,slots:n}){const{refs:r,setRefs:o}=st(),i=A(e.show||!1),a=A([]),s=te({left:"0px",top:"0px"}),c=A("");function l(f){f.preventDefault&&f.preventDefault(),f.stopPropagation&&f.stopPropagation()}function u(f){function m(w){w.forEach(T=>{T.showChildren=!1,T.children&&m(T.children)})}return m(f),f}let d;function h(){i.value=!1,c.value="",d&&ur(d,"cl-context-menu__target")}function p(f,m={}){l(f),i.value=!0;const w=r["context-menu"].querySelector(".cl-context-menu__box");if(m!=null&&m.hover){const T=m.hover===!0?{}:m.hover;if(d=f.target,d&&fe(d.className)){if(T.target)for(;!d.className.includes(T.target);)d=d.parentNode;St(d,T.className||"cl-context-menu__target")}}return m!=null&&m.class&&St(w,m.class),m!=null&&m.list&&(a.value=u(m.list)),ie(()=>{var T;let y=f.pageX,v=f.pageY;e.show||(y=f.offsetX,v=f.offsetY);const{clientHeight:S,clientWidth:_}=(T=f.target)==null?void 0:T.ownerDocument.body,{clientHeight:$,clientWidth:O}=w;v+$>S&&(v=S-$-5),y+O>_&&(y=_-O-5),s.left=y+"px",s.top=v+"px"}),{close:h}}function x(f,m){if(c.value=m,f.disabled)return!1;if(f.callback)return f.callback(h);f.children?f.showChildren=!f.showChildren:h()}return t({open:p,close:h}),Ue(function(){if(i.value){const{body:f,documentElement:m}=e.event.target.ownerDocument;f.appendChild(r["context-menu"]),(m||f).addEventListener("mousedown",w=>{const T=r["context-menu"];!rc(T,w.target)&&T!=w.target&&h()}),p(e.event,e==null?void 0:e.options)}}),()=>{function f(m,w,T){return g("div",{class:["cl-context-menu__box",T>1&&"is-append"]},[m.filter(y=>!y.hidden).map((y,v)=>{let S,_;const $=`${w}-${v}`;return y.suffixIcon||y.children&&(y.suffixIcon=_r),g("div",{class:{"is-active":c.value.includes($),"is-ellipsis":y.ellipsis??!0,"is-disabled":y.disabled},onClick:O=>{x(y,$),O.stopPropagation()}},[y.prefixIcon&&g(qt,null,An(S=D(Je(y.prefixIcon)))?S:{default:()=>[S]}),g("span",null,[y.label]),y.suffixIcon&&g(qt,null,An(_=D(Je(y.suffixIcon)))?_:{default:()=>[_]}),y.children&&y.showChildren&&f(y.children,$,T+1)])})])}return i.value&&g("div",{class:"cl-context-menu",ref:o("context-menu"),style:s,onContextmenu:l},[n.default?n.default():f(a.value,"0",1)])}}}),Nc={open(e,t){var n;const r=D(dr,{show:!0,event:e,options:t});return yr(r,e.target.ownerDocument.createElement("div")),(n=r.component)==null?void 0:n.exposed}};function Hc({Table:e,config:t,Sort:n}){const{crud:r}=G();function o(i,a,s){const c=t.contextMenu;if(!xe(c)){e.value.setCurrentRow(i);const u=c.map(d=>{switch(d){case"refresh":return{label:r.dict.label.refresh,callback(h){r.refresh(),h()}};case"edit":case"update":return{label:r.dict.label.update,hidden:!r.getPermission("update"),callback(h){r.rowEdit(i),h()}};case"delete":return{label:r.dict.label.delete,hidden:!r.getPermission("delete"),callback(h){r.rowDelete(i),h()}};case"info":return{label:r.dict.label.info,hidden:!r.getPermission("info"),callback(h){r.rowInfo(i),h()}};case"check":return{label:r.selection.find(h=>h.id==i.id)?r.dict.label.deselect:r.dict.label.select,hidden:!t.columns.find(h=>h.type==="selection"),callback(h){e.value.toggleRowSelection(i),h()}};case"order-desc":return{label:`${a.label} - ${r.dict.label.desc}`,hidden:!a.sortable,callback(h){n.changeSort(a.property,"desc"),h()}};case"order-asc":return{label:`${a.label} - ${r.dict.label.asc}`,hidden:!a.sortable,callback(h){n.changeSort(a.property,"asc"),h()}};default:return Z(d)?d(i,a,s):d}}).filter(d=>!!d&&!d.hidden);xe(u)||Nc.open(s,{list:u})}t.onRowContextmenu&&t.onRowContextmenu(i,a,s)}return{onRowContextMenu:o}}function Uc({emit:e}){const{crud:t}=G();function n(r){t.selection.splice(0,t.selection.length,...r),e("selection-change",t.selection)}return{selection:t.selection,onSelectionChange:n}}function Gc({config:e,Table:t,emit:n}){const{crud:r}=G(),o=function(){let{prop:s,order:c}=e.defaultSort||{};const l=e.columns.find(u=>["desc","asc","descending","ascending"].find(d=>d==u.sortable));return l&&(s=l.prop,c=["descending","desc"].find(u=>u==l.sortable)?"descending":"ascending"),c&&s?(r.params.order=["descending","desc"].includes(c)?"desc":"asc",r.params.prop=s,{prop:s,order:c}):{}}();function i({prop:s,order:c}){e.sortRefresh&&(c==="descending"&&(c="desc"),c==="ascending"&&(c="asc"),c||(s=void 0),r.refresh({prop:s,order:c,page:1})),n("sort-change",{prop:s,order:c})}function a(s,c){var l;c==="desc"&&(c="descending"),c==="asc"&&(c="ascending"),(l=t.value)==null||l.sort(s,c)}return{defaultSort:o,onSortChange:i,changeSort:a}}function Vc(e){const{style:t}=U(),n=A(),r=te(Bt(e,ce("useTable__options")||{}));return r.columns=(r.columns||[]).map(o=>Ne(o)),r.autoHeight=r.autoHeight??t.table.autoHeight,r.contextMenu=r.contextMenu??t.table.contextMenu,r.on||(r.on={}),r.props||(r.props={}),{Table:n,config:r}}function kc(){const e=je(),{style:t}=U();function n(r=[]){Rt([...t.table.plugins||[],...r]).forEach(o=>{o({exposed:e.exposed})})}return{create:n}}const Wc=R({name:"cl-table",props:{columns:{type:Array,default:()=>[]},autoHeight:{type:Boolean,default:null},height:null,contextMenu:{type:[Array,Boolean],default:null},defaultSort:Object,sortRefresh:{type:Boolean,default:!0},emptyText:String,rowKey:{type:String,default:"id"}},emits:["selection-change","sort-change"],setup(e,{emit:t,expose:n}){const{crud:r}=G(),{style:o}=U(),{Table:i,config:a}=Vc(e),s=kc(),c=Gc({config:a,emit:t,Table:i}),l=Hc({config:a,Table:i,Sort:c}),u=zc({config:a,Table:i}),d=Lc({config:a,Table:i}),h=Uc({emit:t}),p=Dc({config:a}),x=Ht(["clearSelection","getSelectionRows","toggleRowSelection","toggleAllSelection","toggleRowExpansion","setCurrentRow","clearSort","clearFilter","doLayout","sort","scrollTo","setScrollTop","setScrollLeft","updateKeyChildren"],i),f={Table:i,config:a,columns:a.columns,...h,...d,...c,...l,...u,...p,...x};return Nt(f),n(f),s.create(a.plugins),()=>{const{renderColumn:m,renderAppend:w,renderEmpty:T}=Rc();return f.visible.value&&D(X(g(C("el-table"),{class:"cl-table",ref:i},null),[[En("loading"),r.loading]]),{...a.on,...a.props,maxHeight:a.autoHeight?f.maxHeight.value:null,height:a.autoHeight?a.height:null,rowKey:a.rowKey,defaultSort:f.defaultSort,data:f.data.value,onRowContextmenu:f.onRowContextMenu,onSelectionChange:f.onSelectionChange,onSortChange:f.onSortChange,size:o.size,border:o.table.border,highlightCurrentRow:o.table.highlightCurrentRow,resizable:o.table.resizable,stripe:o.table.stripe},{default(){return m(f.columns)},empty(){return T(a.emptyText||r.dict.label.empty)},append(){return w()}})}}}),Kc=R({name:"cl-upsert",props:{items:{type:Array,default:()=>[]},props:Object,sync:Boolean,op:Object,dialog:Object,onOpen:Function,onOpened:Function,onClose:Function,onClosed:Function,onInfo:Function,onSubmit:Function},emits:["opened","closed"],setup(e,{slots:t,expose:n}){const{crud:r}=G(),o=te(Bt(e,ce("useUpsert__options")||{})),i=A(),a=A("info");function s(v){var S;(S=i.value)==null||S.close(v)}function c(){var v;(v=i.value)==null||v.hideLoading(),o.onClosed&&o.onClosed()}function l(v,S){function _(){S(),c()}o.onClose?o.onClose(v,_):_()}function u(v){const{service:S,dict:_,refresh:$}=r;function O(){var B;(B=i.value)==null||B.done()}function F(B){return new Promise((V,H)=>{S[_.api[a.value]](B).then(k=>{$e.success(_.label.saveSuccess),O(),s("save"),$(),V(k)}).catch(k=>{$e.error(k.message),O(),H(k)})})}o.onSubmit?o.onSubmit(v,{done:O,next:F,close(){s("save")}}):F(v)}function d(){const v=a.value=="info";return new Promise(S=>{var _;i.value&&((_=i.value)==null||_.open({title:r.dict.label[a.value],props:{...o.props,disabled:v},op:{...o.op,hidden:v},dialog:o.dialog,items:o.items||[],on:{open(){o.onOpen&&o.onOpen(),S(!0)},submit:u,close:l},form:{},_data:{isDisabled:v}},o.plugins))})}function h(){var v;const S=(v=i.value)==null?void 0:v.getForm();o.onOpened&&o.onOpened(S)}async function p(){a.value="add",await d(),h()}async function x(v){var S;a.value="add",await d(),v&&((S=i.value)==null||S.bindForm(v)),h()}function f(v){a.value="update",w(v)}function m(v){a.value="info",w(v)}function w(v){var S;(S=i.value)==null||S.showLoading(),o.sync||d();async function _(O){var F,B;(F=i.value)==null||F.hideLoading(),O&&((B=i.value)==null||B.bindForm(O)),o.sync&&await d(),h()}function $(O){return new Promise(async(F,B)=>{var V;await r.service[r.dict.api.info]({[r.dict.primaryId]:O[r.dict.primaryId]}).then(H=>{_(H),F(H)}).catch(H=>{$e.error(H.message),B(H)}),(V=i.value)==null||V.hideLoading()})}o.onInfo?o.onInfo(v,{close:s,next:$,done:_}):$(v)}function T(){var v;(v=i.value)==null||v.hideLoading()}const y={config:o,...jr(o),...Ut({Form:i}),Form:i,get form(){var v;return((v=i.value)==null?void 0:v.form)||{}},mode:a,add:p,append:x,edit:f,info:m,open:d,close:s,done:T,submit:u};return Nt(y),n(y),()=>g("div",{class:"cl-upsert"},[D(g(C("cl-form"),{ref:i},null),{},t)])}});function qc(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Fe(e)}const Xc=R({name:"cl-dialog",components:{Close:Xe,FullScreen:Kt,Minus:Wt},props:{modelValue:{type:Boolean,default:!1},props:Object,title:{type:String,default:"-"},height:String,width:{type:String,default:"50%"},padding:{type:String,default:"20px"},keepAlive:Boolean,fullscreen:Boolean,controls:{type:Array,default:()=>["fullscreen","close"]},hideHeader:Boolean,beforeClose:Function,scrollbar:{type:Boolean,default:!0},transparent:Boolean},emits:["update:modelValue","fullscreen-change"],setup(e,{emit:t,expose:n,slots:r}){const o=We(),i=A(),a=A(!1),s=A(!1),c=A(0),l=Ot(()=>o&&o.isMini?!0:a.value);re(()=>e.modelValue,m=>{s.value=m,m&&!e.keepAlive&&(c.value+=1)},{immediate:!0}),re(()=>e.fullscreen,m=>{a.value=m},{immediate:!0}),re(a,m=>{t("fullscreen-change",m)}),ve("dialog",{visible:s,fullscreen:l});function u(){a.value=!0}function d(){function m(){h()}e.beforeClose?e.beforeClose(m):m()}function h(){t("update:modelValue",!1)}function p(m){a.value=tt(m)?!!m:!a.value}function x(){E(e.controls)&&e.controls.includes("fullscreen")&&p()}function f(){return e.hideHeader||g("div",{class:"cl-dialog__header",onDblclick:x},[g("span",{class:"cl-dialog__title"},[e.title]),g("div",{class:"cl-dialog__controls"},[e.controls.map(m=>{switch(m){case"fullscreen":return o.screen==="xs"?null:l.value?g("button",{type:"button",class:"minimize",onClick:()=>{p(!1)}},[g(C("el-icon"),null,{default:()=>[g(Wt,null,null)]})]):g("button",{type:"button",class:"maximize",onClick:()=>{p(!0)}},[g(C("el-icon"),null,{default:()=>[g(Kt,null,null)]})]);case"close":return g("button",{type:"button",class:"close",onClick:d},[g(C("el-icon"),null,{default:()=>[g(Xe,null,null)]})]);default:return me(m,{slots:r})}})])])}return n({Dialog:i,visible:s,isFullscreen:l,open:u,close:d,changeFullscreen:p}),()=>D(g(C("el-dialog"),{ref:i,class:["cl-dialog",{"is-transparent":e.transparent}],width:e.width,beforeClose:e.beforeClose,"show-close":!1,"append-to-body":!0,fullscreen:l.value,modelValue:s.value,"onUpdate:modelValue":m=>s.value=m,onClose:h},null),{},{header(){return f()},default(){const m=l.value?"100%":e.height,w={padding:e.padding,height:m};function T(){var y;return g("div",{class:"cl-dialog__default",style:w,key:c.value},[(y=r.default)==null?void 0:y.call(r)])}if(e.scrollbar){let y;return w.height="auto",g(C("el-scrollbar"),{height:m},qc(y=T())?y:{default:()=>[y]})}else return T()},footer(){var m,w;const T=(m=r.footer)==null?void 0:m.call(r);return T&&((w=T[0])!=null&&w.shapeFlag)?g("div",{class:"cl-dialog__footer"},[T]):null}})}}),Yc=R({name:"cl-filter",props:{label:String},setup(e,{slots:t}){return()=>{var n;return g("div",{class:"cl-filter"},[X(g("span",{class:"cl-filter__label"},[e.label]),[[ee,e.label]]),(n=t.default)==null?void 0:n.call(t)])}}});function Jc(){const e=je(),{style:t}=U();function n(r=[]){var o;Rt([...((o=t.search)==null?void 0:o.plugins)||[],...r]).forEach(i=>{i({exposed:e.exposed})})}return{create:n}}const Zc=R({name:"cl-search",props:{inline:{type:Boolean,default:!0},props:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]},resetBtn:{type:Boolean,default:!1},collapse:{type:Boolean,default:!1},onLoad:Function,onSearch:Function},emits:["reset"],setup(e,{slots:t,expose:n,emit:r}){const{crud:o}=G(),{refs:i,setRefs:a}=st(),{style:s}=U(),c=Jc(),l=te(se(e,ce("useSearch__options")||{})),u=pc(),d=A(!1),h=A(!l.collapse),p=A(!1);function x(v){var S;const _=(S=u.value)==null?void 0:S.getForm();async function $(O){d.value=!0;const F={page:1,..._,...O,...v};for(const V in F)F[V]===""&&(F[V]=void 0);const B=await o.refresh(F);return d.value=!1,B}l.onSearch?l.onSearch(_,{next:$}):$()}function f(){var v,S;const _={};(v=l.items)==null||v.map($=>{var O;if(typeof $.hook!="string"&&((O=$.hook)!=null&&O.reset)){const F=$.hook.reset($.prop);E(F)&&F.forEach(B=>{_[B]=void 0})}_[$.prop]=void 0}),(S=u.value)==null||S.reset(),x(_),r("reset",_)}function m(){h.value=!h.value,ie(()=>{o==null||o["cl-table"].calcMaxHeight()})}function w(){var v;if(l.collapse){const S=(v=i.form)==null?void 0:v.querySelector(".cl-form__items");S&&(p.value=S.clientHeight>84)}}function T(){w()}const y={search:x,reset:f,Form:u,config:l,...Ut({Form:u})};return Nt(y),n(y),c.create(l.plugins),Ue(()=>{var v,S;(S=u.value)==null||S.open({op:{hidden:!0},props:{labelPosition:"right",...l.props},items:(v=l.items)==null?void 0:v.map(_=>({col:{sm:12,md:8,xs:24,lg:6},..._})),form:l.data,on:{open(_){var $;($=l.onLoad)==null||$.call(l,_),w()},change(_,$){var O;(O=l.onChange)==null||O.call(l,_,$)}}}),He.on("resize",T)}),Pn(()=>{He.off("resize",T)}),()=>{const v=g(C("el-form-item"),{label:" ",class:"cl-search__btns"},{default:()=>{var S,_;return[l.resetBtn&&g(C("el-button"),{size:s.size,icon:$r,onClick:f},{default:()=>[o.dict.label.reset]}),g(C("el-button"),{type:"primary",loading:d.value,size:s.size,icon:Ye,onClick:()=>{x()}},{default:()=>[o.dict.label.search]}),(_=t==null?void 0:t.buttons)==null?void 0:_.call(t,(S=u.value)==null?void 0:S.form)]}});return g("div",{class:["cl-search",h.value?"is-expand":"is-fold",{"is-inline":l.inline,"is-collapse":l.collapse}]},[g("div",{class:"cl-search__form",ref:a("form")},[D(g(C("cl-form"),{ref:u,inner:!0,inline:l.inline,"enable-plugin":!1,name:"search"},null),{},{append(){return l.collapse?null:xe(l.items)||v},...t})]),l.collapse&&g("div",{class:"cl-search__more"},[p.value&&g(C("el-button"),{onClick:m},{default:()=>[g("span",null,[h.value?o.dict.label.collapse:o.dict.label.expand]),g(C("el-icon"),null,{default:()=>[h.value?g(wr,null,null):g(Tr,null,null)]})]}),g(C("cl-flex1"),null,null),v])])}}}),Qc=R({name:"cl-error-message",props:{title:String},setup(e){return()=>g("div",{class:"cl-error-message"},[e.title])}}),eu=R({name:"cl-row",setup(e,{slots:t}){return()=>g(C("el-row"),{class:"cl-row"},{default:()=>[t.default&&t.default()]})}}),mt={Crud:gc,AddBtn:mc,AdvBtn:vc,AdvSearch:xc,Flex:Sc,Form:$c,FormTabs:Ac,FormCard:Pc,MultiDeleteBtn:Ec,Pagination:jc,RefreshBtn:Fc,SearchKey:Ic,Table:Wc,Upsert:Kc,Dialog:Xc,Filter:Yc,Search:Zc,ErrorMessage:Qc,Row:eu,ContextMenu:dr};function tu(e){for(const t in mt)e.component(mt[t].name,mt[t])}const nu={op:"Operation",add:"Add",delete:"Delete",multiDelete:"Delete",update:"Edit",refresh:"Refresh",info:"Details",search:"Search",reset:"Reset",clear:"Clear",save:"Save",close:"Cancel",confirm:"Confirm",advSearch:"Advanced Search",searchKey:"Search Keyword",placeholder:"Please enter",tips:"Tips",saveSuccess:"Save successful",deleteSuccess:"Delete successful",deleteConfirm:"This operation will permanently delete the selected data. Do you want to continue?",empty:"No data available",desc:"Descending",asc:"Ascending",select:"Select",deselect:"Deselect",seeMore:"See more",hideContent:"Hide content",nonEmpty:"{label} cannot be empty",collapse:"Collapse",expand:"Expand"},ru={op:"操作",add:"追加",delete:"削除",multiDelete:"削除",update:"編集",refresh:"リフレッシュ",info:"詳細",search:"検索",reset:"リセット",clear:"クリア",save:"保存",close:"キャンセル",confirm:"確認",advSearch:"高度な検索",searchKey:"検索キーワード",placeholder:"入力してください",tips:"ヒント",saveSuccess:"保存が成功しました",deleteSuccess:"削除が成功しました",deleteConfirm:"この操作は選択したデータを永久に削除します。続行しますか？",empty:"データがありません",desc:"降順",asc:"昇順",select:"選択",deselect:"選択解除",seeMore:"詳細を表示",hideContent:"コンテンツを非表示",nonEmpty:"{label}は空にできません",collapse:"折り畳む",expand:"展開"},ou={op:"操作",add:"新增",delete:"删除",multiDelete:"删除",update:"编辑",refresh:"刷新",info:"详情",search:"搜索",reset:"重置",clear:"清空",save:"保存",close:"取消",confirm:"确定",advSearch:"高级搜索",searchKey:"搜索关键字",placeholder:"请输入",tips:"提示",saveSuccess:"保存成功",deleteSuccess:"删除成功",deleteConfirm:"此操作将永久删除选中数据，是否继续？",empty:"暂无数据",desc:"降序",asc:"升序",select:"选择",deselect:"取消选择",seeMore:"查看更多",hideContent:"隐藏内容",nonEmpty:"{label}不能为空",collapse:"收起",expand:"展开更多"},iu={op:"操作",add:"新增",delete:"刪除",multiDelete:"刪除",update:"編輯",refresh:"刷新",info:"詳情",search:"搜尋",reset:"重置",clear:"清空",save:"保存",close:"取消",confirm:"確定",advSearch:"高級搜索",searchKey:"搜索關鍵字",placeholder:"請輸入",tips:"提示",saveSuccess:"保存成功",deleteSuccess:"刪除成功",deleteConfirm:"此操作將永久刪除選中數據，是否繼續？",empty:"暫無數據",desc:"降序",asc:"升序",select:"選擇",deselect:"取消選擇",seeMore:"查看更多",hideContent:"隱藏內容",nonEmpty:"{label}不能為空",collapse:"收起",expand:"展開"},au={en:nu,ja:ru,"zh-cn":ou,"zh-tw":iu};function lu(e,t={}){const n=ge({permission:{update:!0,page:!0,info:!0,list:!0,add:!0,delete:!0},dict:{primaryId:"id",api:{list:"list",add:"add",update:"update",delete:"delete",info:"info",page:"page"},pagination:{page:"page",size:"size"},search:{keyWord:"keyWord",query:"query"},sort:{order:"order",prop:"prop"},label:au["zh-cn"]},style:{colors:["#d42ca8","#1c109d","#6d17c3","#6dc9f1","#04c273","#06b31c","#f9f494","#aa7a24","#d57121","#e93f4d"],form:{labelPostion:"right",labelWidth:"100px",span:24},table:{border:!0,highlightCurrentRow:!0,autoHeight:!0,contextMenu:["refresh","check","edit","delete","order-asc","order-desc"],column:{align:"center",opWidth:180}}},events:{}},t);return n.events&&cc.init(n.events),e.provide("__config__",n),n}function su(e){const t=te({isMini:!1,screen:"full"});function n(){const r=document.body.clientWidth;r<768?t.screen="xs":r<992?t.screen="sm":r<1200?t.screen="md":r<1920?t.screen="xl":t.screen="full",t.isMini=t.screen==="xs"}window.addEventListener("resize",()=>{n(),He.emit("resize")}),n(),e.provide("__browser__",t)}function cu(e,t={}){su(e),lu(e,t)}const _u={install(e,t){return fr.set("__CrudApp__",e),cu(e,t),tu(e),{name:"cl-crud"}}};export{_u as C,yu as a,Nc as b,mu as c,pc as d,gu as e,vu as f,bu as g,au as l,me as r,dc as u};
