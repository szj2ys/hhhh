import{i as x}from"./kapsule@1.16.3-C41LLEgf.js";import{t as E,J as h,E as j}from"./preact@10.26.8-Bbr8jbWY.js";import{s as O,p as S}from"./d3-selection@3.0.0-z4TKiAR0.js";function b(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,o=Array(e);t<e;t++)o[t]=n[t];return o}function w(n){if(Array.isArray(n))return n}function _(n,e,t){return(e=Y(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function P(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var o,r,p,a,i=[],f=!0,c=!1;try{if(p=(t=t.call(n)).next,e!==0)for(;!(f=(o=p.call(t)).done)&&(i.push(o.value),i.length!==e);f=!0);}catch(l){c=!0,r=l}finally{try{if(!f&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(c)throw r}}return i}}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,o)}return t}function I(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?v(Object(t),!0).forEach(function(o){_(n,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(t,o))})}return n}function T(n,e){return w(n)||P(n,e)||C(n,e)||A()}function k(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var o=t.call(n,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Y(n){var e=k(n,"string");return typeof e=="symbol"?e:e+""}function s(n){"@babel/helpers - typeof";return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(n)}function C(n,e){if(n){if(typeof n=="string")return b(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?b(n,e):void 0}}var d=function(e){if(s(e)!=="object")return e;var t=h(e);if(t.props){var o;t.props=I({},t.props),t!=null&&(o=t.props)!==null&&o!==void 0&&o.children&&(t.props.children=Array.isArray(t.props.children)?t.props.children.map(d):d(t.props.children))}return t},X=function(e){return E(h(e))},D=function(e,t){delete t.__k,j(d(e),t)};function M(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(typeof document>"u")){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}}var R=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;M(R);var W=x({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=o.style,p=r===void 0?{}:r,a=!!e&&s(e)==="object"&&!!e.node&&typeof e.node=="function",i=O(a?e.node():e);i.style("position")==="static"&&i.style("position","relative"),t.tooltipEl=i.append("div").attr("class","float-tooltip-kap"),Object.entries(p).forEach(function(c){var l=T(c,2),u=l[0],y=l[1];return t.tooltipEl.style(u,y)}),t.tooltipEl.style("left","-10000px").style("display","none");var f="tooltip-".concat(Math.round(Math.random()*1e12));t.mouseInside=!1,i.on("mousemove.".concat(f),function(c){t.mouseInside=!0;var l=S(c),u=i.node(),y=u.offsetWidth,m=u.offsetHeight,g=[t.offsetX===null||t.offsetX===void 0?"-".concat(l[0]/y*100,"%"):typeof t.offsetX=="number"?"calc(-50% + ".concat(t.offsetX,"px)"):t.offsetX,t.offsetY===null||t.offsetY===void 0?m>130&&m-l[1]<100?"calc(-100% - 6px)":"21px":typeof t.offsetY=="number"?t.offsetY<0?"calc(-100% - ".concat(Math.abs(t.offsetY),"px)"):"".concat(t.offsetY,"px"):t.offsetY];t.tooltipEl.style("left",l[0]+"px").style("top",l[1]+"px").style("transform","translate(".concat(g.join(","),")")),t.content&&t.tooltipEl.style("display","inline")}),i.on("mouseover.".concat(f),function(){t.mouseInside=!0,t.content&&t.tooltipEl.style("display","inline")}),i.on("mouseout.".concat(f),function(){t.mouseInside=!1,t.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):typeof e.content=="string"?e.tooltipEl.html(e.content):X(e.content)?(e.tooltipEl.text(""),D(e.content,e.tooltipEl.node())):e.tooltipEl.style("display","none"):e.tooltipEl.text("")}});export{W as i};
